var H=Object.defineProperty;var q=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var I=(m,o,d)=>o in m?H(m,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):m[o]=d,u=(m,o)=>{for(var d in o||(o={}))J.call(o,d)&&I(m,d,o[d]);if(q)for(var d of q(o))K.call(o,d)&&I(m,d,o[d]);return m};import{r as x,v as Q,a as V,c as $,j as e,S as X,_ as i}from"./main-677.js";import{p as B,S as Y}from"./bf-773-372.js";import{t as R}from"./bf-44-197.js";import{C as f}from"./bf-149-112.js";import{T as Z}from"./bf-63-135.js";import{b as ee}from"./bf-67-72.js";import{r as te,F as v,a as g,b as L,c as se,d as ae}from"./bf-75-374.js";import"./bf-610-73.js";/* empty css          */import"./bf-288-77.js";import"./bf-648-122.js";import"./bf-878-130.js";function je({formFields:m,setIntegration:o,integrations:d,allIntegURL:A}){const[_,N]=x.useState([]),[D,T]=x.useState([]),[U,p]=x.useState({show:!1}),z=Q();V();const[E,b]=x.useState([]),[O,j]=x.useState([]),[l,c]=x.useState({name:"CPT/Post Creation with MetaBox",type:"MetaBox",post_map:[{post_author:"logged_in_user"}],metabox_map:[{}],metabox_file_map:[{}]}),h=(t,s,n)=>{const a=u({},l);n?a[t]=Number(s):a[t]=s,c(a)},W=(t,s)=>{const n=u({},l);n[t]=s,$({post_type:s},"bitforms_get_metabox_fields").then(a=>{var y,F,C,S,M,k,w,P;a!=null&&a.success&&a!==void 0&&(b((y=a==null?void 0:a.data)==null?void 0:y.metaboxFields),j((F=a==null?void 0:a.data)==null?void 0:F.metaboxFile),(C=a==null?void 0:a.data)!=null&&C.metaboxFields&&(n.metabox_map=(S=a==null?void 0:a.data)==null?void 0:S.metaboxFields.filter(r=>r.required).map(r=>({formField:"",metaboxField:r.key,required:r.required})),((M=n==null?void 0:n.metabox_map)==null?void 0:M.length)<1&&(n.metabox_map=[{}])),(k=a==null?void 0:a.data)!=null&&k.metaboxFile&&(n.metabox_file_map=(w=a==null?void 0:a.data)==null?void 0:w.metaboxFile.filter(r=>r.required).map(r=>({formField:"",metaboxFileUpload:r.key,required:r.required})),((P=n==null?void 0:n.metabox_file_map)==null?void 0:P.length)<1&&(n.metabox_file_map=[{}])),c(n))})};x.useEffect(()=>{$({},"bitforms_get_post_type").then(s=>{var n,a;s!=null&&s.success&&(N(Object.values((n=s==null?void 0:s.data)==null?void 0:n.post_types)),T((a=s==null?void 0:s.data)==null?void 0:a.users))});const t=u({},l);t.post_map=B.filter(s=>s.required).map(s=>({formField:"",postField:s.key,required:s.required})),c(t)},[]);const G=()=>{if(!l.post_type){p({show:!0,msg:i("Post Type cann't be empty")});return}if(!l.post_status){p({show:!0,msg:i("Post Status cann't be empty")});return}if(!se(l)){p({show:!0,msg:i("Please map mandatory fields")});return}if(!ae(l)){p({show:!0,msg:i("Please map mandatory fields")});return}ee(d,o,A,l,z)};return e.jsxs("div",{style:{width:900},children:[e.jsx(X,{snack:U,setSnackbar:p}),e.jsx(Z,{title:R.metaBox.title,youTubeLink:R.metaBox.link}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:i("Integration Name")})}),e.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:t=>h(t.target.name,t.target.value),name:"name",value:l.name,type:"text",placeholder:i("Integration Name...")}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:i("Post Type")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select one of the defined WordPress post types Or custom post types for the post.",e.jsx("br",{})]})})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"post_type",onChange:t=>W(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Post Type"}),_.map((t,s)=>e.jsx("option",{value:t==null?void 0:t.name,children:t==null?void 0:t.label},`pt-${s*7}`))]}),e.jsx("button",{onClick:()=>te(_,N),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh Post Types")}'`},type:"button",children:"↻"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("b",{children:i("Post Status")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the status for the post. If published status is selected and the post date is in the future, it will automatically be changed to scheduled",e.jsx("br",{})]})})]}),e.jsxs("select",{name:"post_status",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Status")}),e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"auto-draft",children:"Auto-Draft"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:i("Author")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the user to be assigned to the post.",e.jsx("br",{})]})})]}),e.jsx("div",{children:e.jsxs("select",{name:"post_author",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Author")}),e.jsx("option",{value:"logged_in_user",children:"Logged In User"}),D.map((t,s)=>e.jsx("option",{value:t.ID,children:t.display_name},`pauth-${s+4}`))]})}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:i("Comment Status")})}),e.jsxs("select",{name:"comment_status",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Status")}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:i("Field Mapping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Post Fields")})})]})]}),l.post_map.map((t,s)=>e.jsx(v,{i:s,type:"post",field:t,formFields:m,dataConf:l,setDataConf:c,customFields:B},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("post_map",l.post_map.length,l,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("div",{children:e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": All your taxonomies will be mapped automatically from your form fields."]})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:i("Metabox Fields Mapping")}),e.jsx("button",{onClick:()=>L(l,b,j),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Metaxbox Fields")})})]})]}),l.metabox_map.map((t,s)=>e.jsx(v,{i:s,type:"metabox",field:t,formFields:m,dataConf:l,setDataConf:c,customFields:E,fieldType:"field"},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("metabox_map",l.metabox_map.length,l,c),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:i("Metabox File Upload Fields Map")}),e.jsx("button",{onClick:()=>L(l,b,j),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Metaxbox Fields")})})]})]}),l.metabox_file_map.map((t,s)=>e.jsx(v,{i:s,type:"metaboxFile",field:t,formFields:m,dataConf:l,setDataConf:c,customFields:O,fieldType:"file"},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("metabox_file_map",l.metabox_file_map.length,l,c),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx(Y,{onClick:()=>G()})]})}export{je as default};
