var bit_rating_field=function(){"use strict";return class{#t=null;#e=null;#s=[];#i=null;#n=null;#h=null;#l=!1;#a=!1;#r=!1;#c=null;#o={};#d=null;#g=null;#u=null;#v=null;#C=null;#m=null;#f=null;#k=null;#S=[];#y=null;#p=!1;constructor(t,e){this.#i=e?.document||document,this.#n=e?.fieldKey,this.#o={status:!1,indx:null},this.#c="string"==typeof t?this.#i.querySelector(t):t,this.#h=e?.contentId,this.#s=e?.options||[],this.#l=e?.showReviewLblOnHover||!1,this.#a=e?.showReviewLblOnSelect||!1,this.#r=e?.selectedRating||!1,this.#y=e?.defaultValue||null,this.init()}#b(){this.#d=`.${this.#n}-rating-img`,this.#g=`.${this.#n}-rating-lbl`,this.#u=`.${this.#n}-rating-input`,this.#v=`.${this.#n}-rating-msg`,this.#C=`${this.#n}-rating-hover`,this.#m=`${this.#n}-rating-scale`,this.#f=`${this.#n}-rating-selected`}#x(){this.#s.forEach(((t,e)=>{(this.#y===t.val||t?.check)&&(this.#o={status:!0,indx:e},this.#a?this.#I(e):this.#E())}))}#M(t,e,s){t.addEventListener(e,s),this.#S.push({selector:t,eventType:e,cb:s})}#O(){let t=-1;const e=this.#s.findIndex((t=>t.check));-1!==e&&(t=e),this.#M(this.#c,"keydown",(e=>{if("ArrowRight"===e.key){if(this.#s.length===t)return;t+=1;const s=e.target.children[t],i=parseInt(s.dataset.indx);if(this.#o.indx!==i&&this.#R(i),this.#q(i),this.#s.length===t+1)return!1}else if("ArrowLeft"===e.key){if(0===t)return;if(t-1<0)return;t-=1,this.#R(t),this.#q(t)}})),this.#M(this.#c,"focusout",(()=>{this.#w()}))}#q(t){this.#w();const e=this.#t[t].querySelector(this.#d);this.#H(e,this.#m)}#w(){for(let t=0;t<this.#s.length;t+=1){const e=this.#t[t].querySelector(this.#d);this.#L(e,this.#m)}}init(){this.#b(),this.#t=this.#c.querySelectorAll(this.#g),this.#e=this.#K(this.#v),this.#x(),this.#O(),this.#t.forEach(((t,e)=>{if(this.#o.status&&e<=this.#o.indx){const s=t.querySelector(this.#d);this.#H(s,this.#f),this.#s[e].check&&(t.querySelector(this.#u).checked=!0)}this.#M(t,"mouseover",(()=>{const e=parseInt(t.dataset.indx);this.#A(e)})),this.#M(t,"mouseout",(()=>{const{indx:e}=t.dataset;this.#N(e)})),this.#M(t,"click",(e=>{const{indx:s}=t.dataset;e.preventDefault(),this.#p=!0,this.#R(s)})),this.#M(t,"touchstart",(e=>{e.preventDefault();const{indx:s}=t.dataset;this.#p=!0,this.#R(s)})),this.#M(t,"touchend",(()=>{const{indx:e}=t.dataset;this.#N(e)}))}))}#K(t){return this.#c.querySelector(t)}#A(t){if(this.#l&&this.#I(t),this.#o.indx&&this.#t?.[this.#o.indx]){const t=this.#t.length-1;this.#t.forEach((t=>{const e=t.querySelector(this.#d);this.#L(e,this.#f)}));for(let t=0;t<=this.#o.indx;t+=1){const e=this.#t[t].querySelector(this.#d);this.#L(e,this.#f)}if(this.#o.indx===t)for(let t=0;t<=this.#o.indx;t+=1){const e=this.#t[t].querySelector(this.#d);this.#L(e,this.#f)}}for(let e=0;e<=t;e+=1)if(e<=t&&this.#t?.[e]){const s=this.#t[e].querySelector(this.#d);this.#H(s,this.#C),e===t&&this.#H(s,this.#m)}}#N(t){this.#l&&(this.#o.status&&this.#o.indx===t?this.#I(t):this.#o.status?this.#I(this.#o.indx):this.#e&&this.#E());for(let e=0;e<=t;e+=1)if(this.#t?.[e]){const t=this.#t[e].querySelector(this.#d);this.#L(t,this.#C),this.#L(t,this.#m)}if(this.#o.status&&this.#t?.[this.#o.indx])for(let t=0;t<=this.#o.indx;t+=1){const e=this.#t[t].querySelector(this.#d);this.#H(e,this.#f)}this.#a?this.#I(this.#o.indx):this.#E()}#R(t){if(this.#t?.[this.#o.indx]){const t=this.#t[this.#o.indx].querySelector(this.#d);this.#L(t,this.#f)}const e=this.#t?.[t].querySelector(this.#u);this.#k&&this.#p?e?.checked?(e.checked=!1,this.#o={status:!1,indx:null}):(e.checked=!0,this.#o={status:!0,indx:t}):(e.checked=!0,this.#o={status:!0,indx:t},this.#k=e),e.dispatchEvent(new Event("input")),this.#t?.forEach((t=>{const e=t.querySelector(this.#d);this.#L(e,this.#C)})),this.#t?.forEach(((e,s)=>{const i=e.querySelector(this.#d);s<=t&&this.#o.status?this.#H(i,this.#f):this.#L(i,this.#f)})),this.#a&&this.#o.status?this.#I(t):this.#E(),this.#p=!1}#$(t){return this.#s[t]}#I(t){const e=this.#$(t);this.#e&&e&&(this.#e.innerText=e.lbl)}#E(){this.#e&&(this.#e.innerHTML="")}#H(t,e){t.classList.add(e)}#L(t,e){t.classList.remove(e)}set value(t){const e=this.#s.findIndex((e=>e.val===t));-1!==e&&this.#R(e)}get value(){const t=this.#s[this.#o.indx];return t.val||t.lbl}#V(){this.#t.forEach((t=>{const e=t.querySelector(this.#d);this.#L(e,this.#f)}))}#W(){this.#S.forEach((({selector:t,eventType:e,cb:s})=>{t.removeEventListener(e,s)}))}destroy(){this.#V(),this.#W(),this.#t=null,this.#e=null}reset(){this.#V(),this.#W(),this.#o={status:!1,indx:null},this.#k=null,this.init()}}}();
