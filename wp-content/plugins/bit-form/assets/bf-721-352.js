var Jl=Object.defineProperty;var Bl=Object.getOwnPropertySymbols;var Ql=Object.prototype.hasOwnProperty,Xl=Object.prototype.propertyIsEnumerable;var Gl=(s,l,c)=>l in s?Jl(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,N=(s,l)=>{for(var c in l||(l={}))Ql.call(l,c)&&Gl(s,c,l[c]);if(Bl)for(var c of Bl(l))Xl.call(l,c)&&Gl(s,c,l[c]);return s};import{r as Dl,j as e,T as A,d$ as v,_ as t,n as Z,o as ne,y as oe,u as jl,$ as fl}from"./main-677.js";import{u as ce}from"./bf-743-127.js";import{C as we}from"./bf-102-76.js";import{r as ve,a as Kl,b as Hl,d as Cl,e as ea,f as la,g as aa,i as sa,j as ia,k as ta,l as da}from"./bf-718-351.js";import{S as ma}from"./bf-648-122.js";import{M as ua}from"./bf-878-130.js";function ra({event:s,projectsConf:l,setProjectsConf:c,formID:i,formFields:u,setSnackbar:w}){var z,W,Y,J,Q,X,j,f,C,ee,le,ae,r,h,L,K,se,te,de,he,xe,be,ge,_e,ke,Ne,ye,Ie,n,V,H,$e,Te,Fe,pe,Ee,Oe,Me,Re,Se,Ae,qe,Le,Ze,ze,Ve,Pe,Ue,Be,Ge,De,Ke,He,We,Ye,Je,Qe,Xe,je,fe,Ce,el,ll,al,sl,il,tl,dl,ml,ul,rl,nl,cl,hl,xl,bl,gl,_l,kl,Nl,yl,Il,wl,vl;const[g,o]=Dl.useState(!1),[_,y]=Dl.useState({show:!1}),$=(a,d,m)=>{const x=N({},l);m!==void 0?m?x.actions[s][d]=a:delete x.actions[s][d]:a?x.actions[s][d]=a:delete x.actions[s][d],c(N({},x))},S=(a,d,m,x)=>{var R;const k=N({},l);(R=k.actions[s])!=null&&R.customTags||(k.actions[s].customTags=[]),a==="add"?k.actions[s].customTags.push({name:"",color:""}):a==="remove"?k.actions[s].customTags.splice(d,1):a==="value"&&(m==="field"?k.actions[s].customTags[d].name+=x:k.actions[s].customTags[d][m]=x),k.actions[s].customTags.length||delete k.actions[s].customTags,c(N({},k))},U=(a,d,m,x)=>{var R;const k=N({},l);(R=k.actions.project)!=null&&R.users||(k.actions.project.users=[]),a==="add"?k.actions.project.users.push({name:"",role:""}):a==="remove"?k.actions.project.users.splice(d,1):a==="value"&&(k.actions.project.users[d][m]=x),c(N({},k))},O=(a,d)=>{const m=N({},l);(!m.actions[s].reminder_string||d==="reminder_criteria")&&(m.actions[s].reminder_string={}),a!==""?m.actions[s].reminder_string[d]=a:delete m.actions[s].reminder_string[d],["custom_date_fld","reminder_time_fld"].includes(d)?delete m.actions[s].reminder_string[d.replace("_fld","")]:["custom_date","reminder_time"].includes(d)&&delete m.actions[s].reminder_string[`${d}_fld`],c(N({},m))},F=(a,d,m)=>{const x=N({},l);(!x.actions[s].recurrence_string||d==="recurring_frequency")&&(x.actions[s].recurrence_string={}),m!==void 0?m?x.actions[s].recurrence_string[d]=a:delete x.actions[s].recurrence_string[d]:a?x.actions[s].recurrence_string[d]=a:delete x.actions[s].recurrence_string[d],["time_span_fld","number_of_occurrences_fld"].includes(d)?delete x.actions[s].recurrence_string[d.replace("_fld","")]:["time_span","number_of_occurrences"].includes(d)&&delete x.actions[s].recurrence_string[`${d}_fld`],c(N({},x))},I=(a,d)=>{var x;const m=N({},l);m.actions[s].timelog||(m.actions[s].timelog={}),(x=l==null?void 0:l.actions[s].timelog)!=null&&x.bill_status||(l.actions[s].timelog.bill_status="Billable"),a?m.actions[s].timelog[d]=a:delete m.actions[s].timelog[d],["date_fld","hours_fld","start_time_fld","end_time_fld"].includes(d)?delete m.actions[s].timelog[d.replace("_fld","")]:["date","hours","start_time","end_time"].includes(d)&&delete m.actions[s].timelog[`${d}_fld`],(!m.actions[s].timelog.date||!m.actions[s].timelog.date_fld)&&delete m.actions[s].timelog,d==="settime"&&(delete m.actions[s].timelog.hours,delete m.actions[s].timelog.hours_fld,delete m.actions[s].timelog.start_time,delete m.actions[s].timelog.start_time_fld,delete m.actions[s].timelog.end_time,delete m.actions[s].timelog.end_time_fld),c(N({},m))},q=a=>{var d,m,x,k,R,ie,P;(l!=null&&l.projectId&&!((x=(m=(d=l.default)==null?void 0:d.users)==null?void 0:m[l.portalId])!=null&&x[l.projectId])||!((R=(k=l.default)==null?void 0:k.users)!=null&&R[l.portalId]))&&ve(i,l,c,o,w),y(a?{show:a}:{show:"owner"}),a==="users"&&!((P=(ie=l==null?void 0:l.actions)==null?void 0:ie.project)!=null&&P.users)&&(l.actions.project.users=[{email:"",role:"employee"},{email:"",role:"manager"},{email:"",role:"contractor"}])},B=()=>{var a,d;(d=(a=l.default)==null?void 0:a.taskLays)!=null&&d[l.portalId]||Kl(i,l,c,o,w),y({show:"task_layout"})},G=()=>{var a,d;(d=(a=l.default)==null?void 0:a.groups)!=null&&d[l.portalId]||Hl(i,l,c,o,w),y({show:"group"})},D=()=>{var d,m;const a=[{title:"Zoho Projects Tags",type:"group",childs:[]}];return(d=l.default.tags)!=null&&d[l.portalId]&&(a[0].childs=Object.values((m=l.default.tags)==null?void 0:m[l.portalId]).map(x=>({label:x.tagName,value:x.tagId}))),a},p=a=>{var m,x,k,R,ie,P,ol,$l,Tl,Fl,pl,El,Ol,Ml,Rl,Sl,Al,ql,Ll,Zl,zl,Vl,Pl,Ul;let d=[];if(a==="taskuser")l!=null&&l.projectId&&((R=(k=(x=(m=l==null?void 0:l.default)==null?void 0:m.users)==null?void 0:x[l.portalId])==null?void 0:k[l.projectId])==null?void 0:R.length)>0?d=(P=(ie=l==null?void 0:l.actions)==null?void 0:ie[s])!=null&&P.owner?(ol=l.actions)==null?void 0:ol[s].owner.split(",").map(E=>l.default.users[l.portalId][l.projectId].filter(T=>T.userId===E)).map(E=>E[0]):[]:((Fl=(Tl=($l=l==null?void 0:l.default)==null?void 0:$l.users)==null?void 0:Tl[l.portalId])==null?void 0:Fl.length)>0&&(d=(El=(pl=l==null?void 0:l.actions)==null?void 0:pl[s])!=null&&El.owner?(Ol=l.actions)==null?void 0:Ol[s].owner.split(",").map(E=>l.default.users[l.portalId].filter(T=>T.userId===E)).map(E=>E[0]):[]);else if(l!=null&&l.projectId&&((Al=(Sl=(Rl=(Ml=l==null?void 0:l.default)==null?void 0:Ml.users)==null?void 0:Rl[l.portalId])==null?void 0:Sl[l.projectId])==null?void 0:Al.length)>0)d=l.default.users[l.portalId][l.projectId];else if(s!=="project"&&(l!=null&&l.subEvent.includes("project"))){if(((Ll=(ql=l==null?void 0:l.default)==null?void 0:ql.users)==null?void 0:Ll[l.portalId].length)>0){let E="",T="";if(l.actions.project.owner&&(E=l.default.users[l.portalId].filter(me=>me.userId===l.actions.project.owner)),l.actions.project.users){T=(Vl=(zl=(Zl=l==null?void 0:l.actions)==null?void 0:Zl.project)==null?void 0:zl.users)==null?void 0:Vl.map(ue=>ue.email&&ue.email.split(",").map(re=>l.default.users[l.portalId].filter(Yl=>Yl.userEmail===re)).map(re=>re[0]));const me=[];for(let ue=0;ue<T.length;ue+=1)for(let re=0;re<T[ue].length;re+=1)me.push(T[ue][re]);T=me}E&&T?(T.push(E[0]),d=T):E&&!T?d=E:T&&!E&&(d=T)}}else((Ul=(Pl=l==null?void 0:l.default)==null?void 0:Pl.users)==null?void 0:Ul[l.portalId].length)>0&&(a==="users"?d=l.default.users[l.portalId].filter(E=>{var T,me;return E.userId!==((me=(T=l==null?void 0:l.actions)==null?void 0:T.project)==null?void 0:me.owner)}):d=l.default.users[l.portalId]);return d},b=()=>{y({show:!1})},M=a=>a==="daily"?"(Day)":a==="weekly"?"(Week)":a==="monthly"?"(Month)":a==="yearly"?"(Year)":"";return e.jsxs("div",{className:"pos-rel",children:[e.jsxs("div",{className:"d-flx flx-wrp",children:[s!=="tasklist"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(A,{onChange:()=>q(),checked:"owner"in l.actions[s],className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_owner`,title:v(t("%s Owner"),s),subTitle:v(t("Add an owner to %s  pushed to Zoho Projects."),s)}),!l.actions[s].owner&&e.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:`${s} owner is required`})]}),s==="project"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(A,{onChange:B,checked:"tasklayoutid"in l.actions.project,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:"Task_Owner",title:t("Task Layout"),subTitle:t("Add a layout to project pushed to Zoho Projects.")}),!l.actions.project.tasklayoutid&&e.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:t("task layout is required")})]}),e.jsx(A,{onChange:a=>$(a.target.value,"public",a.target.checked),checked:"public"in l.actions.project,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:"yes",title:t("Public Project"),subTitle:t("by default, it is set as private project.")}),e.jsx(A,{onChange:()=>q("users"),checked:"users"in l.actions.project,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:"Project_User",title:t("Project user"),subTitle:t("Assign users to project pushed to Zoho Projects.")}),e.jsx(A,{onChange:G,checked:"group_id"in l.actions.project,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:"Project_Group",title:t("Group Name"),subTitle:t("Add a group to project pushed to Zoho Projects.")})]}),(s==="milestone"||s==="tasklist"||s==="issue")&&e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(A,{onChange:()=>y({show:"flag"}),checked:"flag"in l.actions[s],className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_flag`,title:v(t("%s Flag"),s),subTitle:`${t("Add a flag to")} ${s} ${t("pushed to Zoho Projects.")}`}),!l.actions[s].flag&&e.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:`${s} ${t("flag is required")}`})]}),s==="issue"&&e.jsxs(e.Fragment,{children:[e.jsx(A,{onChange:()=>q("followers"),checked:"bug_followers"in l.actions[s],className:"wdt-200 mt-4 mr-2 btcd-ttc",value:"Issue_Followers",title:t("Issue Followers"),subTitle:t("Add followers to issue pushed to Zoho Projects")}),(l==null?void 0:l.projectId)&&["severity","classification","module","priority"].map(a=>e.jsx(A,{onChange:()=>y({show:a}),checked:(a==="priority"?"reproducible_id":`${a}_id`)in l.actions[s],className:"wdt-200 mt-4 mr-2 btcd-ttc",value:a,title:v(t("Issue %s"),a),subTitle:v(t("Add %s to issue pushed to Zoho Projects"),a)},a))]}),(s==="task"||s==="subtask"||s==="issue")&&e.jsxs(e.Fragment,{children:[e.jsx(A,{onChange:()=>y({show:"attachments"}),checked:"attachments"in l.actions[s],className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_attachments`,title:v(t("%s Attachments"),s),subTitle:v("Add attachments to %s pushed to Zoho Projects.",s)}),e.jsx(A,{onChange:()=>y({show:"timelog"}),checked:((W=(z=l.actions[s])==null?void 0:z.timelog)==null?void 0:W.date)||((J=(Y=l.actions[s])==null?void 0:Y.timelog)==null?void 0:J.date_fld)||!1,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_timelog`,title:v(t("%s Time Log"),s),subTitle:v(t("Add time log to %s pushed to Zoho Projects."),s)})]}),s==="task"&&e.jsx(A,{onChange:()=>y({show:"recurrence_string"}),checked:"recurrence_string"in l.actions[s]&&"recurring_frequency"in((Q=l.actions[s])==null?void 0:Q.recurrence_string),className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_reminder`,title:v(t("%s Recurrence"),s),subTitle:v(t("Add recurrence to %s pushed to Zoho Projects."),s)}),(s==="task"||s==="subtask"||s==="issue")&&e.jsx(A,{onChange:()=>y({show:"reminder_string"}),checked:"reminder_string"in l.actions[s]&&"reminder_criteria"in((X=l.actions[s])==null?void 0:X.reminder_string),className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_reminder`,title:v(t("%s Reminder"),s),subTitle:v(t("Add reminder to %s pushed to Zoho Projects."),s)}),e.jsx(A,{onChange:()=>y({show:"tags"}),checked:l.actions[s].tags||((f=(j=l==null?void 0:l.actions)==null?void 0:j[s])==null?void 0:f.customTags)||!1,className:"wdt-200 mt-4 mr-2 btcd-ttc",value:`${s}_tags`,title:v(t("%s Tags"),s),subTitle:v(t("Add tags to %s pushed to Zoho Projects."),s)})]}),s!=="tasklist"&&e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="owner",close:b,action:b,title:v(t("%s Owner"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[s==="task"||s==="subtask"?e.jsx(ce,{defaultValue:l.actions[s].owner,className:"mt-2 w-9",onChange:a=>$(a,"owner"),options:p().map(a=>({label:a.userName,value:a.userId}))}):e.jsxs("select",{value:l.actions[s].owner,className:"btcd-paper-inp",onChange:a=>$(a.target.value,"owner"),children:[e.jsx("option",{value:"",children:t("Select Owner")}),p().length>0&&p().map(a=>e.jsx("option",{value:a.userId,children:a.userName},a.userId))]}),e.jsx("button",{onClick:()=>ve(i,l,c,o,w),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Portal Users")}'`},type:"button",disabled:g,children:"↻"})]})]}),s==="project"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="task_layout",close:b,action:b,title:t("Task Layout"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l.actions.project.tasklayoutid,className:"btcd-paper-inp",onChange:a=>$(a.target.value,"tasklayoutid"),children:[e.jsx("option",{value:"",children:t("Select Layout")}),(le=(ee=(C=l.default)==null?void 0:C.taskLays)==null?void 0:ee[l.portalId])==null?void 0:le.map(a=>e.jsx("option",{value:a.taskLayId,children:a.taskLayName},a.taskLayId))]}),e.jsx("button",{onClick:()=>Kl(i,l,c,o,w),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Task Layouts")}'`},type:"button",disabled:g,children:"↻"})]})]}),e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="users",close:b,action:b,title:t("Assign Project Users"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsx(e.Fragment,{children:((ae=l.actions.project)==null?void 0:ae.users)&&l.actions.project.users.map((a,d)=>e.jsxs("div",{className:"flx flx-between mt-1",children:[e.jsx(ce,{className:"btcd-paper-drpdwn mt-2",defaultValue:a.email,options:p("users").map(m=>({label:m.userName,value:m.userEmail})),onChange:m=>U("value",d,"email",m)}),e.jsx("input",{type:"text",value:a.role,readOnly:!0,className:"btcd-paper-inp mt-2 w-3 ml-1"})]},`us-${d+10}`))})]}),e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="group",close:b,action:b,title:t("Project Group"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l.actions.project.group_id,className:"btcd-paper-inp",onChange:a=>$(a.target.value,"group_id"),children:[e.jsx("option",{value:"",children:t("Select Group")}),(L=(h=(r=l.default)==null?void 0:r.groups)==null?void 0:h[l.portalId])==null?void 0:L.map(a=>e.jsx("option",{value:a.groupId,children:a.groupName},a.groupId))]}),e.jsx("button",{onClick:()=>Hl(i,l,c,o,w),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Project Groups")}'`},type:"button",disabled:g,children:"↻"})]})]})]}),(s==="tasklist"||s==="milestone"||s==="issue")&&e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="flag",close:b,action:b,title:v(t("%s Flag"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsxs("select",{value:l.actions[s].flag,className:"btcd-paper-inp",onChange:a=>$(a.target.value,"flag"),children:[e.jsx("option",{value:"",children:t("Select Flag")}),e.jsx("option",{value:s==="issue"?"Internal":"internal",children:t("Internal")}),e.jsx("option",{value:s==="issue"?"External":"external",children:t("External")})]})})]}),(s==="task"||s==="subtask"||s==="issue")&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="attachments",close:b,action:b,title:t("Select Attachment"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:t("Select file upload fields")}),e.jsx(ce,{defaultValue:l.actions[s].attachments,className:"mt-2 w-9",onChange:a=>$(a,"attachments"),options:u.filter(a=>a.type==="file-up").map(a=>({label:a.name,value:a.key}))})]}),e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="timelog",close:b,action:b,title:v(t("%s Time Log"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2 mb-1",children:t("Select Date")}),e.jsxs("div",{className:"flx",children:[e.jsx("input",{type:"date",className:"btcd-paper-inp",onChange:a=>I(a.target.value,"date"),value:((se=(K=l.actions[s])==null?void 0:K.timelog)==null?void 0:se.date)||"",style:{height:40},max:new Date().toISOString().split("T")[0]}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>I(a.target.value,"date_fld"),value:((de=(te=l.actions[s])==null?void 0:te.timelog)==null?void 0:de.date_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type==="date"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("div",{className:"mt-2 mb-1",children:t("Billing Status")}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>I(a.target.value,"bill_status"),value:((xe=(he=l.actions[s])==null?void 0:he.timelog)==null?void 0:xe.bill_status)||"",children:[e.jsx("option",{value:"Billable",children:t("Billable")}),e.jsx("option",{value:"Non Billable",children:t("Non Billable")})]}),!((ge=(be=l==null?void 0:l.actions[s])==null?void 0:be.timelog)!=null&&ge.settime)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 mb-1",children:t("Enter Hours")}),e.jsxs("div",{className:"flx mb-2",children:[e.jsx("input",{type:"number",className:"btcd-paper-inp",onChange:a=>I(a.target.value,"hours"),value:((ke=(_e=l.actions[s])==null?void 0:_e.timelog)==null?void 0:ke.hours)||""}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>I(a.target.value,"hours_fld"),value:((ye=(Ne=l.actions[s])==null?void 0:Ne.timelog)==null?void 0:ye.hours_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type!=="file-up"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("span",{className:"btcd-link",onClick:()=>I(!0,"settime"),onKeyDown:()=>I(!0,"settime"),role:"button",tabIndex:"0",children:t("set start & end time")})]}),((n=(Ie=l==null?void 0:l.actions[s])==null?void 0:Ie.timelog)==null?void 0:n.settime)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 mb-1",children:t("Start Time")}),e.jsxs("div",{className:"flx",children:[e.jsx("input",{type:"time",className:"btcd-paper-inp",onChange:a=>I(a.target.value,"start_time"),value:((H=(V=l.actions[s])==null?void 0:V.timelog)==null?void 0:H.start_time)||"",style:{height:40}}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>I(a.target.value,"start_time_fld"),value:((Te=($e=l.actions[s])==null?void 0:$e.timelog)==null?void 0:Te.start_time_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type==="time"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("div",{className:"mt-2 mb-1",children:t("End Time")}),e.jsxs("div",{className:"flx mb-2",children:[e.jsx("input",{type:"time",className:"btcd-paper-inp",onChange:a=>I(a.target.value,"end_time"),value:((pe=(Fe=l.actions[s])==null?void 0:Fe.timelog)==null?void 0:pe.end_time)||"",style:{height:40}}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>I(a.target.value,"end_time_fld"),value:((Oe=(Ee=l.actions[s])==null?void 0:Ee.timelog)==null?void 0:Oe.end_time_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type==="time"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("span",{className:"btcd-link",onClick:()=>I(!1,"settime"),onKeyDown:()=>I(!1,"settime"),role:"button",tabIndex:"0",children:t("set hours")})]}),e.jsx("div",{className:"mt-2 mb-1",children:t("User")}),e.jsxs("select",{value:(Re=(Me=l.actions[s])==null?void 0:Me.timelog)==null?void 0:Re.owner,className:"btcd-paper-inp",onChange:a=>I(a.target.value,"owner"),children:[e.jsx("option",{value:"",children:t("Select Owner")}),p("taskuser").length>0&&p("taskuser").map(a=>e.jsx("option",{value:a.userId,children:a.userName},a.userId))]}),e.jsx("div",{className:"mt-2 mb-1",children:t("Notes")}),e.jsxs("select",{className:"btcd-paper-inp mb-2",onChange:a=>I(a.target.value,"notes_fld"),value:((Ae=(Se=l.actions[s])==null?void 0:Se.timelog)==null?void 0:Ae.notes_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type!=="file-up"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]})]}),(s==="task"||s==="subtask"||s==="issue")&&e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="reminder_string",close:b,action:b,title:v(t("%s Reminder"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2 mb-1",children:t("Select Reminder Type")}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>O(a.target.value,"reminder_criteria"),value:((Le=(qe=l.actions[s])==null?void 0:qe.reminder_string)==null?void 0:Le.reminder_criteria)||"",children:[e.jsx("option",{value:"",children:t("Select Type")}),e.jsx("option",{value:"daily",children:t("Daily")}),e.jsx("option",{value:"on same day",children:t("On Same Day")}),e.jsx("option",{value:"before due date",children:t("Before Due Date")}),e.jsx("option",{value:"customdate",children:t("Custom Date")})]}),((ze=(Ze=l.actions[s])==null?void 0:Ze.reminder_string)==null?void 0:ze.reminder_criteria)==="before due date"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 mb-1",children:t("Day Before")}),e.jsx("input",{type:"number",className:"btcd-paper-inp",onChange:a=>O(a.target.value,"day_before"),value:((Pe=(Ve=l.actions[s])==null?void 0:Ve.reminder_string)==null?void 0:Pe.day_before)||""})]}),((Be=(Ue=l.actions[s])==null?void 0:Ue.reminder_string)==null?void 0:Be.reminder_criteria)==="customdate"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 mb-1",children:t("Select Date")}),e.jsxs("div",{className:"flx",children:[e.jsx("input",{type:"date",className:"btcd-paper-inp",onChange:a=>O(a.target.value,"custom_date"),value:((De=(Ge=l.actions[s])==null?void 0:Ge.reminder_string)==null?void 0:De.custom_date)||"",style:{height:40}}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>O(a.target.value,"custom_date_fld"),value:((He=(Ke=l.actions[s])==null?void 0:Ke.reminder_string)==null?void 0:He.custom_date_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type==="date"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]})]}),e.jsx("div",{className:"mt-2 mb-1",children:t("Select Time")}),e.jsxs("div",{className:"flx",children:[e.jsx("input",{type:"time",className:"btcd-paper-inp",onChange:a=>O(a.target.value,"reminder_time"),value:((Ye=(We=l.actions[s])==null?void 0:We.reminder_string)==null?void 0:Ye.reminder_time)||"",style:{height:40}}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>O(a.target.value,"reminder_time_fld"),value:((Qe=(Je=l.actions[s])==null?void 0:Je.reminder_string)==null?void 0:Qe.reminder_time_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type==="time"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("div",{className:"mt-2",children:t("Notify Users")}),e.jsx(ce,{defaultValue:(je=(Xe=l.actions[s])==null?void 0:Xe.reminder_string)==null?void 0:je.reminder_notify_users,className:"mt-1 w-10 btcd-paper-drpdwn",onChange:a=>O(a,"reminder_notify_users"),options:p().map(a=>({label:a.userName,value:a.userId}))})]}),s==="task"&&e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="recurrence_string",close:b,action:b,title:v(t("%s Recurrence"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2 mb-1",children:t("Select Recurring Frequency")}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>F(a.target.value,"recurring_frequency"),value:(Ce=(fe=l.actions[s])==null?void 0:fe.recurrence_string)==null?void 0:Ce.recurring_frequency,children:[e.jsx("option",{value:"",children:t("Select Frequency")}),e.jsx("option",{value:"daily",children:t("Daily")}),e.jsx("option",{value:"weekly",children:t("Weekley")}),e.jsx("option",{value:"monthly",children:t("Monthly")}),e.jsx("option",{value:"yearly",children:t("Yearly")})]}),e.jsx("div",{className:"mt-2 mb-1",children:t(`Once Every ${M((ll=(el=l.actions[s])==null?void 0:el.recurrence_string)==null?void 0:ll.recurring_frequency)}`)}),e.jsxs("div",{className:"flx",children:[e.jsx("input",{type:"number",className:"btcd-paper-inp",onChange:a=>F(a.target.value,"time_span"),min:"1",max:"15",value:((sl=(al=l.actions[s])==null?void 0:al.recurrence_string)==null?void 0:sl.time_span)||""}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>F(a.target.value,"time_span_fld"),value:((tl=(il=l.actions[s])==null?void 0:il.recurrence_string)==null?void 0:tl.time_span_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type!=="file-up"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),e.jsx("div",{className:"mt-2 mb-1",children:t(`End After ${M((ml=(dl=l.actions[s])==null?void 0:dl.recurrence_string)==null?void 0:ml.recurring_frequency)}`)}),e.jsxs("div",{className:"flx mb-2",children:[e.jsx("input",{type:"number",className:"btcd-paper-inp",onChange:a=>F(a.target.value,"number_of_occurrences"),min:"2",max:"30",value:((rl=(ul=l.actions[s])==null?void 0:ul.recurrence_string)==null?void 0:rl.number_of_occurrences)||""}),e.jsxs("select",{className:"btcd-paper-inp",onChange:a=>F(a.target.value,"number_of_occurrences_fld"),value:((cl=(nl=l.actions[s])==null?void 0:nl.recurrence_string)==null?void 0:cl.number_of_occurrences_fld)||"",children:[e.jsx("option",{value:"",children:t("Field")}),u.map(a=>a.type!=="file-up"&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},`ff-zhcrm-${a.key}`))]})]}),["monthly","yearly"].includes((xl=(hl=l.actions[s])==null?void 0:hl.recurrence_string)==null?void 0:xl.recurring_frequency)&&e.jsx(we,{onChange:a=>F(a.target.value,"set_previous_business_day",a.target.checked),checked:((gl=(bl=l.actions[s])==null?void 0:bl.recurrence_string)==null?void 0:gl.set_previous_business_day)||!1,value:"true",title:t("Set to previous business day")}),e.jsx(we,{onChange:a=>F(a.target.value,"is_comments_recurred",a.target.checked),checked:((kl=(_l=l.actions[s])==null?void 0:_l.recurrence_string)==null?void 0:kl.is_comments_recurred)||!1,value:"true",title:t("Retain comments for subsequent recurrences")}),e.jsx(we,{onChange:a=>F(a.target.value,"recurrence_type",a.target.checked),checked:((yl=(Nl=l.actions[s])==null?void 0:Nl.recurrence_string)==null?void 0:yl.recurrence_type)||!1,value:"after_current_task_completed",title:t("Create next recurrence after the close of current task.")})]}),s==="issue"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="followers",close:b,action:b,title:t("Issue Followers"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(ce,{defaultValue:l.actions[s].bug_followers,className:"mt-2 w-9",onChange:a=>$(a,"bug_followers"),options:p().map(a=>({label:a.userName,value:a.userId}))}),e.jsx("button",{onClick:()=>ve(i,l,c,o,w),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Portal Users")}'`},type:"button",disabled:g,children:"↻"})]})]}),(l==null?void 0:l.projectId)&&["severity","classification","module","priority"].map(a=>{var d,m,x,k,R,ie;return e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show===a,close:b,action:b,title:v(t("Issue %s"),a),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsxs("select",{value:l.actions[s][a==="priority"?"reproducible_id":`${a}_id`],className:"btcd-paper-inp",onChange:P=>$(P.target.value,a==="priority"?"reproducible_id":`${a}_id`),children:[e.jsx("option",{value:"",children:`Select ${a}`}),((ie=(R=(k=(x=(m=(d=l.default)==null?void 0:d.fields)==null?void 0:m[l.portalId])==null?void 0:x[l.projectId])==null?void 0:k[s])==null?void 0:R.defaultfields)==null?void 0:ie[`${a}_details`])&&Object.values(l.default.fields[l.portalId][l.projectId][s].defaultfields[`${a}_details`]).map(P=>e.jsx("option",{value:P[`${a}_id`],children:P[`${a}_name`]},P[`${a}_id`]))]})})]},a)})]}),e.jsxs(Z,{className:"custom-conf-mdl",mainMdlCls:"o-v btcd-ttc",btnClass:"blue",btnTxt:t("Ok"),show:_.show==="tags",close:b,action:b,title:v(t("%s Tags"),s),children:[e.jsx("div",{className:"btcd-hr mt-2"}),g?e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(ce,{className:"msl-wrp-options",defaultValue:l.actions[s].tags,options:D(),onChange:a=>$(a,"tags")}),e.jsx("button",{onClick:()=>Cl(i,l,c,o,w),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Tags"'},type:"button",disabled:g,children:"↻"})]}),e.jsx("hr",{}),e.jsx("small",{children:t("Custom Tags")}),((vl=(wl=(Il=l==null?void 0:l.actions)==null?void 0:Il[s])==null?void 0:wl.customTags)==null?void 0:vl.length)>0&&l.actions[s].customTags.map((a,d)=>e.jsxs("div",{className:"flx flx-between mt-2 mb-2",children:[e.jsx("input",{type:"text",className:"btcd-paper-inp",onChange:m=>S("value",d,"name",m.target.value),value:a.name}),e.jsxs("select",{className:"btcd-paper-inp w-3",value:a.field,onChange:m=>S("value",d,"field",m.target.value),children:[e.jsx("option",{value:"",children:t("Field")}),u.map(m=>m.type!=="file-up"&&e.jsx("option",{value:`\${${m.key}}`,children:m.name},`ff-zhcrm-${m.key}`))]}),e.jsxs("select",{className:"btcd-paper-inp w-3",style:{backgroundColor:`${a.color.replace("bg","#")}`},value:a.color,onChange:m=>S("value",d,"color",m.target.value),children:[e.jsx("option",{value:"",children:"Color"}),["0dd3d3","e2b910","7f78e0","f28840","d359aa","83b727","b58a61","ffac14","48b7b4","f56b62","728099","609100","0d6fb7","0995ba","15a8e2","ff5acd","898985","3b92ff","ac57f2","895a59"].map(m=>e.jsx("option",{value:`bg${m}`,style:{backgroundColor:`#${m}`},"aria-label":"color"},m))]}),e.jsx("button",{onClick:()=>S("remove",d),className:"icn-btn ml-2","aria-label":"delete",type:"button",children:e.jsx(oe,{})})]},`tg=${d+79}`)),e.jsx("button",{onClick:()=>S("add"),className:"icn-btn ml-2 mr-2 sh-sm tooltip",style:{"--tooltip-txt":`'${t("Add Custom Tag")}'`},type:"button",children:"+"})]})]})]})}const Wl=(s,l,c,i)=>{const u=N({},l);u.field_map[i].splice(s,0,{formField:"",zohoFormField:""}),c(N({},u))};function na({i:s,event:l,formFields:c,field:i,projectsConf:u,setProjectsConf:w}){var F,I,q,B,G,D,p,b,M,z,W,Y,J,Q,X,j,f,C,ee,le,ae,r,h,L,K,se,te,de,he,xe,be,ge,_e,ke,Ne,ye,Ie;const{portalId:g}=u,o=jl(fl),{isPro:_}=o;let y;u!=null&&u.projectId?y=i.zohoFormField===""||((G=(B=(q=(I=(F=u.default.fields)==null?void 0:F[g])==null?void 0:I[u.projectId])==null?void 0:q[l])==null?void 0:B.required)==null?void 0:G.indexOf(i.zohoFormField))===-1:y=i.zohoFormField===""||((M=(b=(p=(D=u.default.fields)==null?void 0:D[g])==null?void 0:p[l])==null?void 0:b.required)==null?void 0:M.indexOf(i.zohoFormField))===-1;let $="";u!=null&&u.projectId?(Q=(J=(Y=(W=(z=u.default)==null?void 0:z.fields)==null?void 0:W[u.portalId])==null?void 0:Y[u.projectId])==null?void 0:J[l])!=null&&Q.fields&&($=u.field_map[l].length===Object.keys((ee=(C=(f=(j=(X=u.default)==null?void 0:X.fields)==null?void 0:j[u.portalId])==null?void 0:f[u.projectId])==null?void 0:C[l])==null?void 0:ee.fields).length):(h=(r=(ae=(le=u.default)==null?void 0:le.fields)==null?void 0:ae[u.portalId])==null?void 0:r[l])!=null&&h.fields&&($=u.field_map[l].length===Object.keys((te=(se=(K=(L=u.default)==null?void 0:L.fields)==null?void 0:K[u.portalId])==null?void 0:se[l])==null?void 0:te.fields).length);const S=n=>{const V=N({},u);V.field_map[l].length>1&&V.field_map[l].splice(n,1),w(N({},V))},U=(n,V)=>{const H=N({},u);H.field_map[l][V][n.target.name]=n.target.value,n.target.value==="custom"&&(H.field_map[l][V].customValue=""),w(N({},H))},O=(n,V)=>{const H=N({},u);H.field_map[l][V].customValue=n.target.value,w(N({},H))};return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:n=>U(n,s),children:[e.jsx("option",{value:"",children:t("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:c.map(n=>n.type!=="file-up"&&e.jsx("option",{value:n.key,children:n.name},`ff-zhcrm-${n.key}`))}),e.jsx("option",{value:"custom",children:t("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${_?"":"(PRO)"}`,children:_&&((de=ma)==null?void 0:de.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),i.formField==="custom"&&e.jsx(ua,{onChange:n=>O(n,s),label:t("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:t("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zohoFormField",value:i.zohoFormField||"",disabled:!y,onChange:n=>U(n,s),children:[e.jsx("option",{value:"",children:t("Select Field")}),u!=null&&u.projectId?((_e=(ge=(be=(xe=(he=u.default)==null?void 0:he.fields)==null?void 0:xe[g])==null?void 0:be[u.projectId])==null?void 0:ge[l])==null?void 0:_e.fields)&&Object.values(u.default.fields[g][u.projectId][l].fields).map(n=>y?!(n!=null&&n.required)&&e.jsx("option",{value:n.apiName,children:n.displayLabel},n.displayLabel):(n==null?void 0:n.required)&&e.jsx("option",{value:n.apiName,children:n.displayLabel},n.displayLabel)):((Ie=(ye=(Ne=(ke=u.default)==null?void 0:ke.fields)==null?void 0:Ne[g])==null?void 0:ye[l])==null?void 0:Ie.fields)&&Object.values(u.default.fields[g][l].fields).map(n=>y?!(n!=null&&n.required)&&e.jsx("option",{value:n.apiName,children:n.displayLabel},n.displayLabel):(n==null?void 0:n.required)&&e.jsx("option",{value:n.apiName,children:n.displayLabel},n.displayLabel))]})]}),!$&&e.jsx("button",{onClick:()=>Wl(s,u,w,l),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),y&&e.jsx("button",{onClick:()=>S(s),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(oe,{})})]})}function ca({event:s,projectsConf:l,setProjectsConf:c,formID:i,formFields:u,isLoading:w,setisLoading:g,setSnackbar:o}){var $,S,U,O,F,I,q,B,G,D,p,b;let _="";l!=null&&l.projectId&&((F=(O=(U=(S=($=l.default)==null?void 0:$.fields)==null?void 0:S[l.portalId])==null?void 0:U[l.projectId])==null?void 0:O[s])!=null&&F.fields)?_=l.field_map[s].length===Object.keys(l.default.fields[l.portalId][l.projectId][s].fields).length:(G=(B=(q=(I=l.default)==null?void 0:I.fields)==null?void 0:q[l.portalId])==null?void 0:B[s])!=null&&G.fields&&(_=l.field_map[s].length===Object.keys((D=l.default.fields[l.portalId][s])==null?void 0:D.fields).length);const y=()=>{const M=N({},l);M.subEvent.splice(M.subEvent.indexOf(s),1),c(N({},M))};return e.jsxs("div",{className:"btcd-ttc",children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"d-flx flx-between",children:[e.jsxs("div",{children:[e.jsxs("b",{className:"wdt-100",children:[t("Create"),` ${s}`]}),e.jsx("button",{onClick:()=>ea(i,l,c,g,o,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Fields")}'`},type:"button",disabled:w,children:"↻"})]}),l.event!==s&&e.jsx("button",{onClick:y,className:"icn-btn sh-sm ml-2 mr-2",type:"button","aria-label":"delete",children:e.jsx(oe,{})})]})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:t("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:t("Zoho Fields")})})]}),(b=(p=l.field_map)==null?void 0:p[s])==null?void 0:b.map((M,z)=>e.jsx(na,{i:z,event:s,field:M,projectsConf:l,formFields:u,setProjectsConf:c},`projects-m-${z+9}`)),!_&&e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>Wl(l.field_map[s].length,l,c,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsxs("b",{className:"wdt-100",children:[`${s}`," ",t("Actions")]})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(ra,{event:s,projectsConf:l,setProjectsConf:c,formID:i,formFields:u,setSnackbar:o}),e.jsx("br",{}),e.jsx("br",{})]})}function ya({formID:s,formFields:l,handleInput:c,projectsConf:i,setProjectsConf:u,isLoading:w,setisLoading:g,setSnackbar:o}){var y,$,S,U,O,F,I,q,B,G,D,p,b,M,z,W,Y,J,Q,X,j,f,C,ee,le,ae;const _=r=>{let h=N({},i);const L=[];L[0]=r.target.getAttribute("event"),L[0]==="tasklist"&&h.tasklistFlag&&(h.tasklistFlag=""),(h==null?void 0:h.event)==="subtask"&&["project","milestone","tasklist"].includes(L[0])&&!h.subEvent.includes("task")&&(h.taskId="",L.push("task")),h[`${L[0]}Id`]="",L.map(K=>{if(!h.subEvent.includes(K)){h.actions[K]={},h.subEvent.push(K),h=da(s,h,u,g,o),K==="tasklist"&&(h.tasklistFlag="");const se=["project","milestone","tasklist","task","subtask","issue"];h.subEvent.sort((te,de)=>se.indexOf(te)-se.indexOf(de))}}),u(N({},h))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:t("Portal:")}),e.jsxs("select",{onChange:c,name:"portalId",value:i.portalId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Portal")}),((y=i==null?void 0:i.default)==null?void 0:y.portals)&&Object.values(i.default.portals).map(r=>e.jsx("option",{value:r.portalId,children:r.portalName},r.portalId))]}),e.jsx("button",{onClick:()=>la(s,i,u,g,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Projects Portals")}'`},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:t("Event:")}),e.jsxs("select",{onChange:c,name:"event",value:i.event,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Event")}),(i==null?void 0:i.portalId)&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"project",children:t("Create Project")}),e.jsx("option",{value:"milestone",children:t("Create Milestone")}),e.jsx("option",{value:"tasklist",children:t("Create Tasklist")}),e.jsx("option",{value:"task",children:t("Create Task")}),e.jsx("option",{value:"subtask",children:t("Create Sub Task")}),e.jsx("option",{value:"issue",children:t("Create Issue")})]})]}),e.jsx("br",{}),e.jsx("br",{}),(i==null?void 0:i.event)&&i.event!=="project"&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-150 d-in-b",children:"Project:"}),e.jsxs("select",{onChange:c,name:"projectId",value:i.projectId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Project")}),((S=($=i==null?void 0:i.default)==null?void 0:$.projects)==null?void 0:S[i.portalId])&&Object.values(i.default.projects[i.portalId]).map((r,h)=>e.jsx("option",{value:r.projectId,children:r.projectName},`${r.projectId}_${h}`))]}),e.jsx("button",{onClick:()=>aa(s,i,u,g,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Projects")}'`},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"btcd-link",style:{marginLeft:155},event:"project",onClick:_,onKeyDown:_,role:"button",tabIndex:"0",children:t("create a new project")}),e.jsx("br",{}),e.jsx("br",{})]}),((i==null?void 0:i.projectId)||((U=i==null?void 0:i.subEvent)==null?void 0:U.includes("project")))&&!["project","milestone"].includes(i==null?void 0:i.event)&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-150 d-in-b",children:t("Milestone:")}),!i.subEvent.includes("project")&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{onChange:c,name:"milestoneId",value:i.milestoneId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Milestone")}),((F=(O=i==null?void 0:i.default)==null?void 0:O.milestones)==null?void 0:F[i.projectId])&&Object.values(i.default.milestones[i.projectId]).map((r,h)=>e.jsx("option",{value:r.milestoneId,children:r.milestoneName},`${r.milestoneId}_${h}`))]}),e.jsx("button",{onClick:()=>sa(s,i,u,g,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Milestones")}'`},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("span",{className:"btcd-link",style:{marginLeft:i.subEvent.includes("project")?5:155},event:"milestone",onClick:_,onKeyDown:_,role:"button",tabIndex:"0",children:t("create a new milestone")}),e.jsx("br",{}),e.jsx("br",{})]}),((i==null?void 0:i.projectId)||((I=i==null?void 0:i.subEvent)==null?void 0:I.includes("project")))&&["task","subtask"].includes(i==null?void 0:i.event)&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-150 d-in-b",children:i.subEvent.includes("project")||i.subEvent.includes("milestone")?t("Tasklist:"):t("Tasklist Flag:")}),!i.subEvent.includes("project")&&!i.subEvent.includes("milestone")&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{onChange:c,name:"tasklistFlag",value:i.tasklistFlag,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Tasklist Flag")}),!(i!=null&&i.subEvent.includes("milestone"))&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"internal",children:t("Internal")}),e.jsx("option",{value:"external",children:t("External")})]})]}),e.jsx("br",{}),e.jsx("br",{}),(i==null?void 0:i.tasklistFlag)&&!(i!=null&&i.subEvent.includes("milestone"))&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-150 d-in-b",children:t("Tasklist:")}),e.jsxs("select",{onChange:c,name:"tasklistId",value:i.tasklistId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Tasklist")}),i!=null&&i.milestoneId?((D=(G=(B=(q=i==null?void 0:i.default)==null?void 0:q.tasklists)==null?void 0:B[i.portalId])==null?void 0:G[i.milestoneId])==null?void 0:D[i.tasklistFlag])&&Object.values(i.default.tasklists[i.portalId][i.milestoneId][i.tasklistFlag]).map((r,h)=>r.tasklistId&&e.jsx("option",{value:r.tasklistId,children:r.tasklistName},`${r.tasklistId}_${h}`)):((M=(b=(p=i==null?void 0:i.default)==null?void 0:p.tasklists)==null?void 0:b[i.portalId])==null?void 0:M[i.tasklistFlag])&&Object.values(i.default.tasklists[i.portalId][i.tasklistFlag]).map((r,h)=>r.tasklistId&&e.jsx("option",{value:r.tasklistId,children:r.tasklistName},`${r.tasklistId}_${h}`))]}),e.jsx("button",{onClick:()=>ia(s,i,u,g,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${t("Refresh Milestones")}'`},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{})]})]}),e.jsx("span",{className:"btcd-link",style:{marginLeft:i.subEvent.includes("project")||i.subEvent.includes("milestone")?5:155},event:"tasklist",onClick:_,onKeyDown:_,role:"button",tabIndex:"0",children:t("create a new tasklist")}),e.jsx("br",{}),e.jsx("br",{})]}),(i==null?void 0:i.event)==="subtask"&&((i==null?void 0:i.projectId)||i.subEvent.includes("project"))&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-150 d-in-b",children:t("Task:")}),!i.subEvent.includes("project")&&!i.subEvent.includes("milestone")&&!i.subEvent.includes("tasklist")&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{onChange:c,name:"taskId",value:i.taskId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:t("Select Task")}),i!=null&&i.milestoneId?i!=null&&i.tasklistId?((J=(Y=(W=(z=i==null?void 0:i.default)==null?void 0:z.tasks)==null?void 0:W[i.portalId])==null?void 0:Y[i.milestoneId])==null?void 0:J[i.tasklistId])&&Object.values(i.default.tasks[i.portalId][i.milestoneId][i.tasklistId]).map((r,h)=>r.taskId&&e.jsx("option",{value:r.taskId,children:r.taskName},`${r.taskId}_${h}`)):((j=(X=(Q=i==null?void 0:i.default)==null?void 0:Q.tasks)==null?void 0:X[i.portalId])==null?void 0:j[i.milestoneId])&&Object.values(i.default.tasks[i.portalId][i.milestoneId]).map((r,h)=>r.taskId&&e.jsx("option",{value:r.taskId,children:r.taskName},`${r.taskId}_${h}`)):i!=null&&i.tasklistId?((ee=(C=(f=i==null?void 0:i.default)==null?void 0:f.tasks)==null?void 0:C[i.portalId])==null?void 0:ee[i.tasklistId])&&Object.values(i.default.tasks[i.portalId][i.tasklistId]).map((r,h)=>r.taskId&&e.jsx("option",{value:r.taskId,children:r.taskName},`${r.taskId}_${h}`)):((ae=(le=i==null?void 0:i.default)==null?void 0:le.tasks)==null?void 0:ae[i.portalId])&&Object.values(i.default.tasks[i.portalId]).map((r,h)=>r.taskId&&e.jsx("option",{value:r.taskId,children:r.taskName},`${r.taskId}_${h}`))]}),e.jsx("button",{onClick:()=>ta(s,i,u,g,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Tasks"'},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("span",{className:"btcd-link",style:{marginLeft:!i.subEvent.includes("project")&&!i.subEvent.includes("milestone")&&!i.subEvent.includes("tasklist")?155:5},event:"task",onClick:_,onKeyDown:_,role:"button",tabIndex:"0",children:t("create a new task")}),e.jsx("br",{}),e.jsx("br",{})]}),w&&e.jsx(ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(i==null?void 0:i.event)&&(i==null?void 0:i.subEvent)&&(i.event==="project"||(i.projectId?i.event!=="subtask"||i.event==="subtask"&&((i==null?void 0:i.taskId)||(i==null?void 0:i.subEvent.includes("task"))):i.subEvent.includes("project")))&&i.subEvent.map(r=>e.jsx(ca,{event:r,projectsConf:i,setProjectsConf:u,formID:s,formFields:l,isLoading:w,setisLoading:g,setSnackbar:o},`subEvent-${r}`))]})}export{ya as Z};
