var q=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var w=(t,c,s)=>c in t?q(t,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[c]=s,u=(t,c)=>{for(var s in c||(c={}))A.call(c,s)&&w(t,s,c[s]);if(y)for(var s of y(c))R.call(c,s)&&w(t,s,c[s]);return t};import{r as g,u as v,j as l,_ as m,y as N,$ as o,o as I}from"./main-677.js";import{u as z}from"./bf-743-127.js";import{d as U}from"./bf-67-72.js";import{g as P,a as E,b as G,f as O}from"./bf-653-395.js";import{S as _}from"./bf-648-122.js";import{M as x}from"./bf-878-130.js";const T=(t,c,s)=>{const a=u({},c);a.field_map.splice(t,0,{}),s(u({},a))},H=(t,c,s)=>{const a=u({},c);a.field_map.length>1&&a.field_map.splice(t,1),s(u({},a))},V=(t,c,s,a)=>{const i=u({},s);i.field_map[c][t.target.name]=t.target.value,t.target.value==="custom"&&(i.field_map[c].customValue=""),a(u({},i))},B=(t,c,s,a)=>{const i=u({},s);i.field_map[c].customValue=t.target.value,a(u({},i))},M=(t,c,s,a)=>{const i=u({},s);i.field_map_list[c][t.target.name]=t.target.value,t.target.value==="custom"&&(i.field_map_list[c].customValue=""),a(u({},i))},D=(t,c,s,a)=>{const i=u({},s);i.field_map_list[c].customValue=t.target.value,a(u({},i))},L=(t,c,s)=>{const a=u({},c);a.field_map_list.splice(t,0,{}),s(u({},a))},$=(t,c,s)=>{const a=u({},c);a.field_map_list.length>1&&a.field_map_list.splice(t,1),s(u({},a))},k=(t,c,s,a)=>{const i=u({},s);i.field_map_unsubscribe[c][t.target.name]=t.target.value,t.target.value==="custom"&&(i.field_map_unsubscribe[c].customValue=""),a(u({},i))},J=(t,c,s,a)=>{const i=u({},s);i.field_map_unsubscribe[c].customValue=t.target.value,a(u({},i))};function K({i:t,formFields:c,field:s,sendFoxConf:a,setSendFoxConf:i}){var d;g.useEffect(()=>{var e;if(((e=a==null?void 0:a.field_map)==null?void 0:e.length)===1&&s.sendFoxFormField===""){const r=u({},a),j=P(r);r.field_map=j,i(r)}});const p=(a==null?void 0:a.contactFields.filter(e=>e.required===!0))||[],h=(a==null?void 0:a.contactFields.filter(e=>e.required===!1))||[],b=v(o),{isPro:n}=b;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:e=>V(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),l.jsx("optgroup",{label:"Form Fields",children:c.map(e=>e.type!=="file-up"&&l.jsx("option",{value:e.key,children:e.name},`ff-zhcrm-${e.key}`))}),l.jsx("option",{value:"custom",children:m("Custom...")}),l.jsx("optgroup",{label:`General Smart Codes ${n?"":"(PRO)"}`,children:n&&((d=_)==null?void 0:d.map(e=>l.jsx("option",{value:e.name,children:e.label},`ff-rm-${e.name}`)))})]}),s.formField==="custom"&&l.jsx(x,{onChange:e=>B(e,t,a,i),label:m("Custom Value"),className:"mr-2",type:"text",value:s.customValue,placeholder:m("Custom Value")}),l.jsxs("select",{className:"btcd-paper-inp",disabled:t<p.length,name:"sendFoxFormField",value:t<p.length?p[t].key||"":s.sendFoxFormField||"",onChange:e=>V(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),t<p.length?l.jsx("option",{value:p[t].key,children:m(p[t].label)},p[t].key):h.map(({key:e,label:r})=>l.jsx("option",{value:e,children:m(r)},e))]})]}),t>=p.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>T(t,a,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>H(t,a,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx(N,{size:"15"})})]})]})})}function Q({i:t,formFields:c,field:s,sendFoxConf:a,setSendFoxConf:i}){var d;g.useEffect(()=>{var e;if(((e=a==null?void 0:a.field_map_list)==null?void 0:e.length)===1&&s.sendFoxListFormField===""){const r=u({},a),j=E(r);r.field_map_list=j,i(r)}});const p=(a==null?void 0:a.listFields.filter(e=>e.required===!0))||[],h=(a==null?void 0:a.listFields.filter(e=>e.required===!1))||[],b=v(o),{isPro:n}=b;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:e=>M(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),l.jsx("optgroup",{label:"Form Fields",children:c.map(e=>e.type!=="file-up"&&l.jsx("option",{value:e.key,children:e.name},`ff-zhcrm-${e.key}`))}),l.jsx("option",{value:"custom",children:m("Custom...")}),l.jsx("optgroup",{label:`General Smart Codes ${n?"":"(PRO)"}`,children:n&&((d=_)==null?void 0:d.map(e=>l.jsx("option",{value:e.name,children:e.label},`ff-rm-${e.name}`)))})]}),s.formField==="custom"&&l.jsx(x,{onChange:e=>D(e,t,a,i),label:m("Custom Value"),className:"mr-2",type:"text",value:s.customValue,placeholder:m("Custom Value")}),l.jsxs("select",{className:"btcd-paper-inp",disabled:t<p.length,name:"sendFoxListFormField",value:t<p.length?p[t].key||"":s.sendFoxListFormField||"",onChange:e=>M(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),t<p.length?l.jsx("option",{value:p[t].key,children:p[t].label},p[t].key):h.map(({key:e,label:r})=>l.jsx("option",{value:e,children:r},e))]})]}),t>=p.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>L(t,a,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>$(t,a,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx(N,{size:"15"})})]})]})})}function W({i:t,formFields:c,field:s,sendFoxConf:a,setSendFoxConf:i}){var d;g.useEffect(()=>{var e;if(((e=a==null?void 0:a.field_map_unsubscribe)==null?void 0:e.length)===1&&s.sendFoxUnsubscribeFormField===""){const r=u({},a),j=G(r);r.field_map_unsubscribe=j,i(r)}});const p=(a==null?void 0:a.unsubscribeFields.filter(e=>e.required===!0))||[],h=(a==null?void 0:a.unsubscribeFields.filter(e=>e.required===!1))||[],b=v(o),{isPro:n}=b;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:e=>k(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),l.jsx("optgroup",{label:"Form Fields",children:c.map(e=>e.type!=="file-up"&&l.jsx("option",{value:e.key,children:e.name},`ff-zhcrm-${e.key}`))}),l.jsx("option",{value:"custom",children:m("Custom...")}),l.jsx("optgroup",{label:`General Smart Codes ${n?"":"(PRO)"}`,children:n&&((d=_)==null?void 0:d.map(e=>l.jsx("option",{value:e.name,children:e.label},`ff-rm-${e.name}`)))})]}),s.formField==="custom"&&l.jsx(x,{onChange:e=>J(e,t,a,i),label:m("Custom Value"),className:"mr-2",type:"text",value:s.customValue,placeholder:m("Custom Value")}),l.jsxs("select",{className:"btcd-paper-inp",disabled:t<p.length,name:"sendFoxUnsubscribeFormField",value:t<p.length?p[t].key||"":s.sendFoxUnsubscribeFormField||"",onChange:e=>k(e,t,a,i),children:[l.jsx("option",{value:"",children:m("Select Field")}),t<p.length?l.jsx("option",{value:p[t].key,children:p[t].label},p[t].key):h.map(({key:e,label:r})=>l.jsx("option",{value:e,children:r},e))]})]}),t>=p.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>L(t,a,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>$(t,a,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx(N,{size:"15"})})]})]})})}function ll({formFields:t,handleInput:c,sendFoxConf:s,setSendFoxConf:a,isLoading:i,setIsLoading:p,setSnackbar:h}){var d;const b=(((d=s==null?void 0:s.default)==null?void 0:d.allLists)||[]).map(({id:e,name:r})=>({label:r,value:`${e}`})),n=e=>{const r=u({},s);e?r.listId=e:r.listId="",a(u({},r))};return l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("br",{}),l.jsx("b",{className:"wdt-200 d-in-b",children:m("Actions:")}),l.jsxs("select",{onChange:c,name:"mainAction",value:s.mainAction,className:"btcd-paper-inp w-5",children:[l.jsx("option",{value:"",children:m("Select Actions")}),s.allActions&&s.allActions.map(({key:e,label:r})=>l.jsx("option",{value:e,children:r},e))]}),l.jsx("br",{}),l.jsx("br",{}),i&&l.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.mainAction==="1"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-5",children:l.jsx("b",{className:"wdt-100",children:m("Field Map")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("Form Fields")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("SendFox List Fields")})})]}),s==null?void 0:s.field_map_list.map((e,r)=>l.jsx(Q,{i:r,field:e,sendFoxConf:s,formFields:t,setSendFoxConf:a,setSnackbar:h},`rp-m-${r+9}`))]}),s.mainAction==="2"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"d-flx",children:[l.jsx("b",{className:"wdt-200 d-in-b mt-3 mt-i-3",children:m("All List:")}),l.jsx(z,{options:b,className:"btcd-paper-drpdwn w-5",defaultValue:s.listId,onChange:e=>n(e),customValue:!0}),l.jsx("button",{onClick:()=>O(s,a,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${m("Refresh SendFox List")}'`,height:"35px"},type:"button",disabled:i,children:"â†»"})]}),l.jsx("br",{}),l.jsx("div",{className:"mt-5",children:l.jsx("b",{className:"wdt-100",children:m("Field Map")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("Form Fields")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("SendFox Fields")})})]}),(s==null?void 0:s.listId)&&(s==null?void 0:s.field_map.map((e,r)=>l.jsx(K,{i:r,field:e,sendFoxConf:s,formFields:t,setSendFoxConf:a,setSnackbar:h},`rp-m-${r+9}`))),l.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:l.jsx("button",{onClick:()=>U(s.field_map.length,s,a,!1),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),s.mainAction==="3"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-5",children:l.jsx("b",{className:"wdt-100",children:m("Field Map")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("Form Fields")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("SendFox Unsubscribe Fields")})})]}),s==null?void 0:s.field_map_unsubscribe.map((e,r)=>l.jsx(W,{i:r,field:e,sendFoxConf:s,formFields:t,setSendFoxConf:a,setSnackbar:h},`rp-m-${r+9}`))]}),l.jsx("br",{})]})}export{ll as S};
