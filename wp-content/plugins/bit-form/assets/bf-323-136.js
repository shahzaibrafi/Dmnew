var Qe=Object.defineProperty,Ve=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Te=(o,t,s)=>t in o?Qe(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,M=(o,t)=>{for(var s in t||(t={}))Ie.call(t,s)&&Te(o,s,t[s]);if(Me)for(var s of Me(t))Ge.call(t,s)&&Te(o,s,t[s]);return o},R=(o,t)=>Ve(o,Le(t));import{a as L,r as de,j as e,k as ce,u as Q,W as Y,w as K,T as _e,_ as d,am as I,ak as et,al as tt,b$ as st,ag as G,$ as He,p as T,aL as J,ab as ye,cy as Ke,bz as Ce,aO as lt,aN as ot,V as at,I as ve,y as $e,an as it,ap as Ee,dC as nt,dp as ct,U as rt,n as Ye,l as dt,aM as pt,c as mt,d as ut}from"./main-677.js";import{S as ht,a as ft,D as bt,b as xt}from"./bf-937-115.js";import{S as kt}from"./bf-847-196.js";import{B as jt,D as Ae,d as we}from"./bf-8-69.js";import{t as Re}from"./bf-44-197.js";import{A as vt}from"./bf-54-316.js";import{B as V}from"./bf-183-126.js";import{h as We,a as wt,T as pe}from"./bf-610-73.js";import{P as yt}from"./bf-288-77.js";import{C as Nt}from"./bf-99-111.js";import{C as se}from"./bf-102-76.js";import{D as ue}from"./bf-818-129.js";import{B as gt}from"./bf-32-121.js";import{S as be}from"./bf-648-122.js";import{M as Ne}from"./bf-878-130.js";import{M as fe}from"./bf-554-131.js";import{u as Oe}from"./bf-743-127.js";/* empty css          */import"./bf-713-125.js";import"./bf-134-124.js";import"./bf-311-113.js";function ze({title:o,titleOutline:t,accordionActions:s,children:p}){const{css:i}=L(),[l,h]=de.useState(!0),A=()=>{h(f=>!f)};return e.jsxs("div",{className:i(te.section),children:[e.jsxs("div",{className:`${i(te.titleWrp)}`,children:[e.jsxs("button",{type:"button",className:`${i(te.title,t?te.titleOutline:{})} btcd-logic-blk`,onClick:A,children:[o,e.jsx("span",{className:i(te.titleIcn),children:e.jsx(Nt,{size:15,rotate:!l})})]}),e.jsx("div",{className:`${i(te.accrActions)} accr-actions`,children:s})]}),l&&e.jsx("div",{className:i(te.content),children:p}),!l&&e.jsx("div",{className:i(te.content),children:e.jsxs("button",{className:i(te.collapsedAccrdn),type:"button",onClick:A,children:[e.jsx("span",{className:i(te.collapsedCrl)}),e.jsx("span",{className:i(te.collapsedCrl)}),e.jsx("span",{className:i(te.collapsedCrl)})]})})]})}const te={section:{pb:12},accrActions:{dy:"none"},titleWrp:{flx:1,":hover .accr-actions":{flx:1}},title:{bc:"var(--b-50)",h:35,fs:14,p:"0 15px",brs:30,cr:"#fff",fw:600,lh:"29px",cur:"pointer",us:"none",b:0,oe:0,flx:"center"},titleOutline:{b:"2px solid var(--b-50)",bc:"#fff",cr:"var(--b-50)",p:"0 13px"},titleIcn:{ml:8,flx:"center"},content:{my:5,ml:45},collapsedAccrdn:{b:0,oe:0,bc:"#D9D9D9",w:65,brs:10,h:20,flx:"center",rg:5,cg:5,curp:1,mt:15,":focus":{oe:"none"}},collapsedCrl:{dy:"inline-block",w:5,h:5,bc:"#AAAAAA",brs:"50%"}};function Pe({lgcGrpInd:o,condGrpInd:t,actionKey:s,enableAction:p,checkKeyInArr:i,getValueFromArr:l,title:h}){const{css:A}=L(),[f,a]=ce(I),y=Q(et),m=Q(tt),k=Q(st),c=Y(G),r=Q(He),u=()=>{const N=[];return k.map(n=>{(n.type==="file-up"||n.type==="advanced-file-up")&&N.push({label:n.name,value:n.key})}),N},x=()=>k.filter(N=>N.type==="email").length>0,$=()=>{const N=[];if(x()){const n=[];k.map(v=>{v.type==="email"&&n.push({label:v.name,value:`\${${v.key}}`})}),N.push({title:"Form Fields",type:"group",childs:n})}return r.userMail&&Array.isArray(r.userMail)&&N.push({title:"WP Emails",type:"group",childs:r.userMail}),N},O=(N,n)=>{const v=T(f,w=>{const{success:S}=w[o].conditions[t].actions,B=S.find(_=>_.type===s);B&&(B.details[N]=n)});a(v),c(w=>R(M({},w),{unsaved:!0}))};return e.jsxs("div",{className:A(K.mt2),children:[e.jsx(_e,{onChange:N=>p(N.target.checked,s),title:h,checked:i(s),className:A(K.flxc)}),i(s)&&e.jsxs("div",{className:A({mt:5,ml:28}),children:[e.jsx("label",{className:"f-m f-5",children:d("Email Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:N=>O("id",N.target.value),value:l(s,"id"),children:[e.jsx("option",{value:"",children:d("Select Email Template")}),y==null?void 0:y.map((N,n)=>e.jsx("option",{value:N.id?JSON.stringify({id:String(N.id)}):JSON.stringify({index:String(n)}),children:N.title},`sem-${n+2.3}`))]}),e.jsx(ue,{action:N=>O("to",N?N.split(","):[]),value:l(s,"to"),placeholder:d("Add Email Receiver"),title:e.jsx("span",{className:"f-m f-5",children:d("To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"to"))}),e.jsx(ue,{action:N=>O("from",N),placeholder:d("Add mail from address"),value:l(s,"from"),title:e.jsx("span",{className:"f-m f-5",children:d("From Mail")}),titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"from"))}),e.jsx("div",{className:"mt-1"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from_name",className:"f-m f-5",children:d("From Name")}),e.jsx("div",{className:"mt-2"}),e.jsx("input",{id:"from_name",type:"text",className:"btcd-paper-inp",style:{height:"35px",width:"69%",background:"var(--b-79-96)"},value:l(s,"from_name"),onChange:N=>O("from_name",N.target.value),placeholder:"Add mail from name"})]}),e.jsx(ue,{action:N=>O("cc",N?N.split(","):[]),value:l(s,"cc"),placeholder:d("Add Email CC"),title:e.jsx("span",{className:"f-m f-5",children:d("CC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"cc"))}),e.jsx(ue,{action:N=>O("bcc",N?N.split(","):[]),placeholder:d("Add Email BCC"),value:l(s,"bcc"),title:e.jsx("span",{className:"f-m f-5",children:d("BCC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"bcc"))}),e.jsx(ue,{action:N=>O("replyto",N?N.split(","):[]),placeholder:d("Reply To"),value:l(s,"replyto"),title:e.jsx("span",{className:"f-m f-5",children:d("Reply To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"replyto"))}),e.jsx(ue,{action:N=>O("attachment",N?N.split(","):[]),placeholder:d("Attachment"),value:l(s,"attachment"),title:e.jsx("span",{className:"f-m f-5",children:d("Attachment")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",options:u()}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"pdf-template",className:"f-m f-5",children:d("PDF Attachment Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:N=>O("pdfId",N.target.value),value:l(s,"pdfId"),children:[e.jsx("option",{value:"",children:d("Select PDF Template")}),m==null?void 0:m.map((N,n)=>e.jsx("option",{value:N.id?JSON.stringify({id:String(N.id)}):JSON.stringify({index:String(n)}),children:N.title},`sem-${n+2.3}`))]})]})]})]})}const Ct=["text","username","number","email","password","tel","url","search","select","textarea","html-select","currency","phone-number"];function At({clickAction:o,options:t,formFields:s}){const p=[{id:25,type:"back",content:e.jsx(jt,{size:"18"})},{id:6,type:"operator",content:"("},{id:7,type:"operator",content:")"},{id:8,type:"empty",content:""},{id:9,type:"number",content:"7"},{id:10,type:"number",content:"8"},{id:11,type:"number",content:"9"},{id:12,type:"operator",content:"/"},{id:13,type:"number",content:"4"},{id:14,type:"number",content:"5"},{id:15,type:"number",content:"6"},{id:16,type:"operator",content:"*"},{id:17,type:"number",content:"1"},{id:18,type:"number",content:"2"},{id:19,type:"number",content:"3"},{id:20,type:"operator",content:"+"},{id:24,type:"clear",content:"AC"},{id:21,type:"number",content:"0"},{id:22,type:"number",content:"."},{id:23,type:"operator",content:"-"}],{css:i}=L();return e.jsxs("div",{className:i(ne.board),children:[e.jsxs("div",{className:i(ne.leftSlider),children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:i({m:0,td:"underline",mt:5}),children:"Options"}),t.map((l,h)=>l.type==="group"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:i({m:0}),children:l.title}),l.childs.map(A=>e.jsx("div",{role:"button",className:i(ne.field,K.ml1),onClick:()=>o(`${h+1}`,"option",{label:A.label,content:A.value},A.value.length),tabIndex:0,onKeyDown:void 0,children:A.label},`${A.value}${h+1}`))]}):e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${h+1}`,"option",{label:l.label,content:l.value},l.value.length),tabIndex:0,onKeyDown:void 0,children:l.label},`${l.value}${h+1}`)),e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(199,"field",{label:"Separator",content:"_bf_separator"}),tabIndex:0,onKeyDown:void 0,children:"Separator"})]}),e.jsx("h4",{className:i({m:0}),children:"Form Fields"}),s==null?void 0:s.map((l,h)=>e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${h+1}`,"field",{label:l.name,content:l.key}),tabIndex:0,onKeyDown:void 0,children:l.name},`field-${h}`)),e.jsx("h4",{className:i({m:0,td:"underline",mt:5}),children:"Smart Tags"}),be.map((l,h)=>e.jsx("div",{role:"button",className:i(ne.field),onClick:()=>o(`${h+1}`,"field",{label:l.label,content:l.name,isFunction:l.custom}),tabIndex:0,onKeyDown:void 0,children:l.label},l.id))]}),e.jsxs("div",{className:i(ne.keyContainer),children:[p.map(l=>e.jsx("div",{role:"button",className:`custom-button ${i(ne.customButton)} ${l.type}`,onClick:()=>o(l.id,l.type,{content:l.content}),tabIndex:0,onKeyUp:void 0,children:l.content},l.id)),e.jsx("span",{role:"button",className:i(ne.crossButton),onClick:()=>We(),tabIndex:0,onKeyDown:void 0,children:e.jsx(J,{size:"12"})})]})]})}const ne={board:{w:310,h:225,p:2,brs:5,dy:"flex",ta:"left"},leftSlider:{w:"40%",h:"100%",bc:"#F8F8F8",brs:8,cr:"#6A6A6A",dy:"flex",fd:"column",p:5,mr:5,ow:"overlay"},keyContainer:{w:"60%",h:"100%",bc:"white",dy:"flex",flxp:"wrap",pn:"relative"},h4:{fw:"500"},field:{fw:"400",fs:"12px !important",brs:"8px",padding:"5px",cur:"pointer",":hover":{bc:"#E5E5E5"}},customButton:{w:"45px",h:"45px",brs:"10px",br:"none",bc:"white",cr:"black",dy:"flex",ai:"center",jc:"center",cur:"pointer",fw:"600",fs:"18px",lh:"17px",":hover":{bc:"#F8F8F8"},"&.empty:hover":{bc:"white",cur:"default"}},crossButton:{pn:"absolute",w:"20px",h:"20px",brs:"50%",bc:"#F4F4F4",dy:"flex",jc:"center",ai:"center",cur:"pointer",rt:"-5px",tp:"-5px"}};function Xe({label:o,onChange:t,value:s,disabled:p,type:i,textarea:l,className:h,options:A,formFields:f}){const{css:a}=L(),y=Q(ye),m=Ke(y),[k,c]=de.useState(()=>De(s,m)),[r,u]=de.useState(k.length),[x,$]=de.useState(!1),O=de.useRef(null),N=k.length>0,n=g=>{let F="",j=0,W=0;for(!x&&c(C=>C.filter(z=>(z==null?void 0:z.type)!=="caret")),k.map(C=>{C.type==="field"?C.dataObj.isFunction?(j+=1,F+=`\${${C.dataObj.content}`):F+=`\${${C.dataObj.content}}`:(F+=C.dataObj.content,j&&C.dataObj.content==="("&&(W+=1),j&&C.dataObj.content===")"&&(W-=1,W||(F+="}",j-=1)))});j--;)F+="}";t(F)},v=()=>{!x&&c(g=>T(g,F=>{F.splice(r,0,{id:0,type:"caret",dataObj:{content:""}})}))},w=g=>{const{key:F}=g,j=g.target.selectionEnd;u(j),N&&S({key:F})},S=g=>{const{key:F}=g;if(g.preventDefault&&g.preventDefault(),(F==="ArrowUp"||F==="Home")&&r>0)c(j=>{const W=j.filter(C=>C.type!=="caret");return W.unshift({id:0,type:"caret",dataObj:{content:""}}),W}),u(0);else if((F==="ArrowDown"||F==="End")&&r<k.length-1){const j=k.length-1;c(W=>{const C=W.filter(z=>z.type!=="caret");return C.push({id:0,type:"caret",dataObj:{content:""}}),C}),u(j)}else if(F==="ArrowLeft"&&r>0){const j=r-1;u(j),c(W=>T(W,C=>{[C[j],C[j+1]]=[C[j+1],C[j]]}))}else if(F==="ArrowRight"&&r<k.length-1){const j=r+1;u(j),c(W=>T(W,C=>{[C[j-1],C[j]]=[C[j],C[j-1]]}))}else F==="Backspace"?r>0&&(c(j=>j.slice(0,r-1).concat(j.slice(r))),u(j=>j-1)):F==="Delete"?r<k.length&&c(j=>j.slice(0,r+1).concat(j.slice(r+2))):/^\s{1}/.test(F)?(c(j=>T(j,W=>{W.splice(r,0,{type:"space",dataObj:{content:F}})})),u(j=>j+1)):!isNaN(F)||F==="."?(c(j=>T(j,W=>{W.splice(r,0,{type:"number",dataObj:{content:F}})})),u(j=>j+1)):"+-*/(),<>".indexOf(F)!==-1?(c(j=>T(j,W=>{W.splice(r,0,{type:"operator",dataObj:{content:F}})})),u(j=>j+1)):/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/.test(F)?(c(j=>T(j,W=>{W.splice(r,0,{type:"symbol",dataObj:{content:F}})})),u(j=>j+1)):/^([A-Z]|[a-z]){1}\b/.test(F)&&(c(j=>T(j,W=>{W.splice(r,0,{type:"letters",dataObj:{content:F}})})),u(j=>j+1))};function B(g,F="before"){F==="straight"?r!==g&&(c(j=>{const W=j.filter(C=>C.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),u(g)):F==="before"&&r!==g-1?(r<g&&(g-=1),c(j=>{const W=j.filter(C=>C.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),u(g)):F==="after"&&r!==g+1&&(g+=1,r<g&&(g-=1),c(j=>{const W=j.filter(C=>C.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),u(g))}const _=g=>{const F=g.target.selectionStart;u(F)},D=g=>{const F=g.pageX,j=g.pageY;if(g.target.classList.contains("calculator-field")){const W=g.target,C=W.children;if(W.children.length>1){let z=0;for(z=0;z<C.length;z+=1){const E=C[z].getBoundingClientRect();if(!(j>E.y+E.height)){if(F<E.x){B(z,"straight");break}else if(C[z+1]&&C[z+1].getBoundingClientRect().y>E.y+E.height){B(z+1,"straight");break}}}z===C.length&&B(z-1,"straight")}}else{const{target:W}=g,C=W.parentElement.children;for(let z=0;z<C.length;z+=1)if(C[z]===W){const E=W.getBoundingClientRect(),b=E.width/2;if(F>b+E.x){B(z,"after");break}else{B(z,"before");break}}}},X=(g,F,j,W)=>{if(F==="clear"){c([]),u(0),t("");return}if(k.length===0)if(F==="back"&&s)t(s.slice(0,r-1)+s.slice(r)),u(C=>C-(W||1));else if(F!=="field"&&F!=="back"){const C=s.slice(0,r)+j.content+s.slice(r);u(z=>z+(W||1)),t(C)}else{const C=`${s.slice(0,r)}\${${j.content}}${s.slice(r)}`,z=De(C,m);c(z),u(E=>E+(W||1))}else F==="back"?r>0&&(c(C=>C.slice(0,r-1).concat(C.slice(r))),u(C=>C-(W||1))):j.isFunction?(j.content=j.content.slice(0,j.content.indexOf("(")),c(C=>C.slice(0,r).concat([{id:g,type:F,dataObj:j},{id:g+1,type:"operator",dataObj:{content:"("}}],C.slice(r,r+1),[{id:g+2,type:"operator",dataObj:{content:")"}}],C.slice(r+1))),u(C=>C+(W||2))):(c(C=>C.slice(0,r).concat([{id:g,type:F,dataObj:j}],C.slice(r))),u(C=>C+(W||1)));setTimeout(()=>{var C;return(C=O.current)==null?void 0:C.focus()},0)};return e.jsxs("div",{className:a(je.wrp),children:[N&&e.jsx("div",{className:`${a(je.calculateField)} calculator-field`,role:"textbox",ref:O,onClick:D,onKeyDown:S,onFocus:v,onBlur:n,tabIndex:0,children:k.map((g,F)=>g&&e.jsxs("span",{className:`${a(je[g.type])} ${g.dataObj.isFunction?a(je.function):""}`,children:[g.dataObj.label||g.dataObj.content,g.type==="caret"&&e.jsx("span",{className:"caret"})]},`sp-${F}`))}),!N&&e.jsx(Ne,{label:o,type:i,disabled:p,onChange:g=>t(g.target.value),onKeyUp:w,onClick:_,value:s,textarea:l,className:`${h} cal-fld-inp`}),e.jsx(wt,{trigger:"click",theme:"light",maxWidth:"520px",onShow:()=>{var g;$(!0),(g=O.current)==null||g.focus()},onHidden:()=>{$(!1),O.current!==document.activeElement&&c(g=>g.filter(F=>(F==null?void 0:F.type)!=="caret"))},p:"5px",distance:"400",interactive:!0,content:e.jsx(At,{clickAction:X,options:A,formFields:f}),children:e.jsx("span",{className:a(je.dotOpt),children:e.jsx(gt,{size:"20"})})})]})}function De(o,t){const s=[];if(/\${\w[^ ${}]*}|^\(/g.test(o)){const p=o.match(/\${\w[^ ${}]*}|\d|\D/g);p==null||p.map((i,l)=>{if(/^\s{1}/g.test(i))s.push({id:l,type:"space",dataObj:{content:i}});else if(/^([A-Z]|[a-z]){1}\b/g.test(i))s.push({id:l,type:"letters",dataObj:{content:i}});else if(!isNaN(i)||i===".")s.push({id:l,type:"number",dataObj:{content:i}});else if(/^[+\-*/(),<>]{1}$/g.test(i))s.push({id:l,type:"operator",dataObj:{content:i}});else if(/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/g.test(i))s.push({id:l,type:"symbol",dataObj:{content:i}});else if(/\${\w[^]*[\d\D\s]\)}/g.test(i)){let h=i.replace(/^\${|}$/g,"");const A=h.slice(h.indexOf("("));h=h.replace(/\([ \d\D]*\)/g,"()");const f=be.find(a=>a.name===h);h=h.replace(/\([ \d\D]*\)/g,""),s.push({id:l,type:"field",dataObj:{label:f==null?void 0:f.label,content:h,isFunction:!0}}),s.push(...De(A,t))}else if(/\${\w[^ ${}]*}/g.test(i)){const h=i.replace(/^\${|}$/g,""),A=t.find(f=>f.key===h);if(A)s.push({id:l,type:"field",dataObj:{label:A==null?void 0:A.name,content:A==null?void 0:A.key}});else{const f=be.find(a=>a.name===h);f?s.push({id:l,type:"field",dataObj:{label:f==null?void 0:f.label,content:f==null?void 0:f.name}}):s.push({id:l,type:"field",dataObj:{label:"Separator",content:i}})}}})}return s}const je={wrp:{w:"100%",mnh:38,h:"auto",lh:1.5,brs:8,dy:"flex",p:0,mt:5},calculateField:{w:"100%",h:"auto",p:5,ta:"left",b:"1px solid var(--gray-3)",brs:"8px 0px 0px 8px",dy:"flex",rg:"3px",ai:"center",jc:"left",flxp:"wrap",cur:"text",":focus-visible":{oe:"none"},":focus":{bcr:"var(--b-50)",bs:"0 0 0 2px var(--b-50) inset"}},dotOpt:{dy:"inline-flex",ai:"center",bc:"hsl(0deg 0% 85%)",p:5,b:"none",brs:"0px 8px 8px 0px",":hover":{bc:"hsl(0deg 0% 80%)"}},field:{p:"1px 7px",bc:"#E5E8FF",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"8px"},option:{p:"1px 7px",bc:"#e6e6e6",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"11px"},operator:{fs:"17px",fw:"600",p:"0px 1px"},space:{fs:"17px",fw:"600",p:"0px 3px"},function:{mr:"0px !important",brs:"8px 0px 0px 8px !important",bc:"hsl(233deg 100% 90%)"},caret:{dy:"inline-block",w:0,pn:"relative",h:"20px"}},_t=(o,t="")=>{if(t==="")return o;const s=t.split("."),p=s.length-1;return s.slice(0,p).forEach(l=>{o=o[l]}),s.length?o[s[p]]:o},$t=[{key:"_bf_form",name:"Form"},{key:"_bf_step_no",name:"Step No."}],Ze=o=>{const t=[];return o.forEach(s=>{typeof s=="object"&&!Array.isArray(s)?t.push(s):Array.isArray(s)&&t.push(...Ze(s))}),t},Ft=()=>{const o=Ce(ot),t=Array.isArray(o)&&o.length>1,s=Ce(at),p=t?s.multiStepSettings.btnSettings:{},{show:i,prevBtn:l,nextBtn:h}=p;return i?{[l.key]:M({},l),[h.key]:M({},h)}:{}},ge=o=>{var y;const t=Ce(ye),s=M(M({},t),Ft()),p=Ce(lt),i=Ke(s,[]),l=Ze(o.logics||[]),h=((y=o==null?void 0:o.actions)==null?void 0:y.fields)||[],A=[...l,...h].map(m=>m.field).filter(m=>m),f=i.filter(m=>m.type==="repeater").map(m=>m.key);let a="";if(f.forEach(m=>{p[m].lg.map(u=>u.i).some(u=>A.includes(u))&&(a=m)}),a){f.splice(f.indexOf(a),1);const m=f.reduce((k,c)=>{const u=p[c].lg.map(x=>x.i);return[...k,...u]},[]);return i.filter(k=>!m.includes(k.key)&&!f.includes(k.key))}return i};function Ot({action:o,lgcGrp:t,lgcGrpInd:s,actionInd:p,condGrpInd:i,actionType:l,formFields:h}){var X,g,F,j,W,C,z;const A=Y(I),f=Q(ye),a=Y(G),{css:y}=L();let m="",k="";h!==null&&h.map(E=>{E.key===o.field&&(k=E.type,m=E.key)});const c=()=>{var b,q,H,le,ee,oe,Z,me;if(k==="razorpay")return;let E;if(E=(q=(b=f==null?void 0:f[m])==null?void 0:b.opt)==null?void 0:q.map(U=>({label:U.lbl,value:U.val||U.lbl})),k==="select"){const{optionsList:U}=(f==null?void 0:f[m])||{};if(o.action==="value")return U.reduce((P,re)=>{const ae=Object.keys(re)[0],xe=Object.values(re)[0];return P.push({type:"group",title:ae,childs:xe.map(ke=>({label:ke.lbl,value:ke.val||ke.lbl}))}),P},[]);if(o.action==="activelist")return U.reduce((P,re)=>{const ae=Object.keys(re)[0];return P.push({label:ae,value:ae}),P},[])}if(k==="decision-box"){const U=f==null?void 0:f[m];return[{label:(H=U==null?void 0:U.msg)==null?void 0:H.checked,value:(le=U==null?void 0:U.msg)==null?void 0:le.checked},{label:(ee=U==null?void 0:U.msg)==null?void 0:ee.unchecked,value:(oe=U==null?void 0:U.msg)==null?void 0:oe.unchecked}]}return E||(E=(me=(Z=f==null?void 0:f[m])==null?void 0:Z.options)==null?void 0:me.map(U=>({label:U.lbl,value:U.val||U.code||U.i||U.lbl}))),E},r=E=>{A(b=>T(b,q=>{const{fields:H}=q[s].conditions[i].actions;H[p].action=E})),a(b=>R(M({},b),{unsaved:!0}))},u=E=>{A(b=>T(b,q=>{const{fields:H}=q[s].conditions[i].actions;H[p].val=E})),a(b=>R(M({},b),{unsaved:!0}))},x=E=>{A(b=>T(b,q=>{const{fields:H}=q[s].conditions[i].actions;H[p].field=E,H[p].val=""})),a(b=>R(M({},b),{unsaved:!0}))},$=()=>{A(E=>T(E,b=>{const{fields:q}=b[s].conditions[i].actions;q.length>1&&q.splice(p,1)})),a(E=>R(M({},E),{unsaved:!0}))},O=((X=f[o.field])==null?void 0:X.typ)||"",N=((g=f[o.field])==null?void 0:g.typ)!=="file-up"&&((F=f[o.field])==null?void 0:F.typ)!=="advanced-file-up",n=((j=f[o.field])==null?void 0:j.typ)!=="button",v=((W=f[o.field])==null?void 0:W.typ)==="title",w=l!=="onsubmit",S=l!=="onvalidate",B=((C=f[o.field])==null?void 0:C.typ)==="decision-box",_=Ct.includes((z=f[o.field])==null?void 0:z.typ),D=o.field==="_bf_form";return e.jsxs("div",{className:"flx pos-rel btcd-logic-blk",children:[e.jsxs(fe,{label:"Form Fields",value:o.field||"",onChange:E=>x(E.target.value),style:{width:720},children:[e.jsx("option",{value:"",children:d("Select One")}),h.map(E=>e.jsx("option",{value:E.key,children:E.name},`ff-Ab-${E.key}`)),$t.map(E=>e.jsx("option",{value:E.key,children:E.name},`ff-Ab-${E.key}`))]}),e.jsx("div",{className:y({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:y({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsxs(fe,{label:"Action",onChange:E=>r(E.target.value),value:o.action||"",style:{width:400},className:"w-4",children:[e.jsx("option",{value:"",children:d("Select One")}),D&&e.jsx("option",R(M({value:"save_draft"},!ve&&{disabled:!0}),{children:d(`Save Draft ${ve?"":"(PRO)"}`)})),!D&&e.jsxs(e.Fragment,{children:[!n&&t.action_type==="oninput"&&e.jsx("option",{value:"click",children:d("Click")}),N&&n&&S&&e.jsx("option",{value:"value",children:d("Value")}),w&&S&&e.jsx("option",{value:"enable",children:d("Enable")}),w&&S&&e.jsx("option",{value:"disable",children:d("Disable")}),w&&S&&N&&n&&e.jsx("option",{value:"readonly",children:d("Readonly")}),w&&S&&N&&n&&e.jsx("option",{value:"writeable",children:d("Writeable")}),w&&S&&e.jsx("option",{value:"hide",children:d("Hide")}),w&&S&&e.jsx("option",{value:"show",children:d("Show")}),l==="onvalidate"&&e.jsx("option",{value:"required",children:d("Required")}),l==="onvalidate"&&e.jsx("option",{value:"notrequired",children:d("Not Required")}),O==="select"&&e.jsx("option",{value:"activelist",children:d("Active List")}),w&&S&&N&&n&&e.jsx("option",{value:B?"ct":"lbl",children:d("Label")}),w&&S&&N&&n&&e.jsx("option",{value:"sub-titl",children:d("Sub Title")}),_&&e.jsx("option",{value:"placeholder",children:d("Placeholder")}),w&&S&&N&&n&&!v&&e.jsx("option",{value:"hlp-txt",children:d("Helper Text")}),v&&e.jsx("option",{value:"title",children:d("Title")})]})]}),["value","activelist","lbl","ct","sub-titl","hlp-txt","title","placeholder"].includes(o.action)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:y({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:y({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsx(Xe,{label:"Value",type:k.match(/select|check|radio|number|range/g)?"text":k,onChange:u,value:o.val||"",options:c(),formFields:h})]}),e.jsx("div",{className:"btcd-li-side-btn",children:e.jsx(V,{onClick:$,icn:!0,className:"ml-2 sh-sm white",children:e.jsx($e,{})})})]})}function St({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:i}=L(),[l,h]=ce(I),A=Y(G),{fields:f}=s.actions,a=()=>{const y=T(l,m=>{const{fields:k}=m[t].conditions[p].actions;let c="disable";m[t].action_type==="onsubmit"&&(c="value"),k.push({field:"",action:c})});h(y),A(m=>R(M({},m),{unsaved:!0}))};return e.jsxs("div",{className:i(K.mt2),children:[e.jsx("div",{className:i(Bt.title),children:e.jsx("b",{className:"txt-dp",children:"Field Actions"})}),f.map((y,m)=>e.jsx("div",{className:`mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(Ot,{lgcGrp:o,lgcGrpInd:t,condGrpInd:p,action:y,actionInd:m,actionType:o.action_type,formFields:ge(s)})},`atn-${m+22}`)),e.jsx(pe,{msg:"Add More",children:e.jsx(V,{onClick:()=>a(),icn:!0,className:`blue sh-sm mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(J,{size:"14",className:"icn-rotate-45"})})})]})}const Bt={title:{mb:7},chip:{mnh:30,dy:"flex !important",ai:"center",w:60,mt:9,mb:9}};function Wt({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){const{css:l}=L(),[h,A]=ce(I),f=Y(G),a=Q(it),y=m=>{const k=T(h,c=>{const{success:r}=c[o].conditions[t].actions,u=r.find(x=>x.type==="integ");u&&(u.details.id=m.map(x=>x.value))});A(k),f(c=>R(M({},c),{unsaved:!0}))};return e.jsxs("div",{className:l(K.mt2),children:[e.jsx(_e,{onChange:m=>s(m.target.checked,"integ"),title:d("Integration"),checked:p("integ"),className:l(K.flxc)}),p("integ")&&e.jsx(ue,{action:m=>y(m),jsonValue:!0,value:i("integ","id"),titleClassName:l({mt:5,ml:28,w:"67.5%"}),className:"w-10",isMultiple:ve,options:a==null?void 0:a.map((m,k)=>({label:m.name,value:m.id?JSON.stringify({id:String(m.id)}):JSON.stringify({index:String(k)})})),placeholder:d("Select Integation")})]})}function Dt({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){var m,k;const{css:l}=L(),[h,A]=ce(I),f=Y(G),a=Q(Ee),y=c=>{const r=T(h,u=>{const{success:x}=u[o].conditions[t].actions,$=x.find(O=>O.type==="redirectPage");$&&($.details.id=c)});A(r),f(u=>R(M({},u),{unsaved:!0}))};return e.jsxs("div",{className:l(K.mt2),children:[e.jsx(_e,{onChange:c=>s(c.target.checked,"redirectPage"),title:d("Redirect URL"),checked:p("redirectPage"),className:l(K.flxc)}),p("redirectPage")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:c=>y(c.target.value),value:i("redirectPage","id"),children:[e.jsx("option",{value:"",children:d("Select Page To Redirect")}),(k=(m=a==null?void 0:a.type)==null?void 0:m.redirectPage)==null?void 0:k.map((c,r)=>e.jsx("option",{value:c.id?JSON.stringify({id:String(c.id)}):JSON.stringify({index:String(r)}),children:c.title},`sr-${r+2.5}`))]})})]})}function Et({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:i}){var m,k;const{css:l}=L(),[h,A]=ce(I),f=Y(G),a=Q(Ee),y=c=>{const r=T(h,u=>{const{success:x}=u[o].conditions[t].actions,$=x.find(O=>O.type==="successMsg");$&&($.details.id=c)});A(r),f(u=>R(M({},u),{unsaved:!0}))};return e.jsxs("div",{className:l(K.mt2),children:[e.jsx(_e,{onChange:c=>s(c.target.checked,"successMsg"),title:d("Success Message"),checked:p("successMsg"),className:l(K.flxc)}),p("successMsg")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:c=>y(c.target.value),value:i("successMsg","id"),children:[e.jsx("option",{value:"",children:d("Select Message")}),(k=(m=a==null?void 0:a.type)==null?void 0:m.successMsg)==null?void 0:k.map((c,r)=>e.jsx("option",{value:c.id?JSON.stringify({id:String(c.id)}):JSON.stringify({index:String(r)}),children:c.title},`sm-${r+2.3}`))]})})]})}function Mt({lgcGrpInd:o,condGrp:t,condGrpInd:s}){var a,y;const[p,i]=ce(I),l=Y(G),h=Q(Ee),{failure:A}=t.actions,f=m=>{const k=T(p,c=>{c[o].conditions[s].actions.failure=m});i(k),l(c=>R(M({},c),{unsaved:!0}))};return e.jsxs(fe,{onChange:m=>f(m.target.value),value:A,label:"Error Message",className:"w-7 mt-3",children:[e.jsx("option",{value:"",children:d("Select Message")}),(y=(a=h==null?void 0:h.type)==null?void 0:a.successMsg)==null?void 0:y.map((m,k)=>e.jsx("option",{value:m.id?JSON.stringify({id:String(m.id)}):JSON.stringify({index:String(k)}),children:m.title},`vm-${k+2.7}`))]})}function Ue({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:i}=L(),[l,h]=ce(I),A=Y(G),{success:f}=s.actions,a=(c,r)=>{const u=T(l,x=>{const{success:$}=x[t].conditions[p].actions;if(c)r==="mailNotify"?$.push({type:r,details:{}}):r==="dblOptin"?$.push({type:r,details:{}}):$.push({type:r,details:{id:""}});else for(let O=0;O<$.length;O+=1)if($[O].type===r){$.splice(O,1);break}});h(u),A(x=>R(M({},x),{unsaved:!0}))},y=c=>f==null?void 0:f.some(r=>r.type===c),m=c=>{const r=T(l,u=>{const{actions:x}=u[t].conditions[p];x.avoid_delete=c});h(r),A(u=>R(M({},u),{unsaved:!0}))},k=(c,r)=>{const u=f.find(x=>x.type===c);return u!==void 0?u.details[r]:""};return e.jsxs(e.Fragment,{children:[o.action_type!=="onvalidate"&&o.action_run!=="delete"&&e.jsx(St,{lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}),(o.action_type==="onsubmit"||o.action_run==="delete")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:i(K.mt3,K.mb1),children:e.jsx("b",{className:"txt-dp",children:"Additional Actions"})}),e.jsxs("div",{className:s.cond_type==="always"?"ml-4":"",children:[o.action_run!=="delete"&&e.jsx(Et,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),!o.action_run.match(/^(delete|edit)$/)&&e.jsx(Dt,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),o.action_run!=="delete"&&e.jsx(Wt,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:y,getValueFromArr:k}),e.jsx(Pe,{title:d("Email Notification"),lgcGrpInd:t,condGrpInd:p,actionKey:"mailNotify",enableAction:a,checkKeyInArr:y,getValueFromArr:k}),e.jsx(Pe,{title:d("Double Opt-in"),lgcGrpInd:t,condGrpInd:p,actionKey:"dblOptin",enableAction:a,checkKeyInArr:y,getValueFromArr:k})]})]}),o.action_run==="delete"&&e.jsx(se,{className:i({mt:5,ml:s.cond_type==="always"?12:-8}),onChange:c=>m(c.target.checked),checked:l[t].avoid_delete,title:e.jsx("small",{className:"txt-dp",children:"Prevent Delete"})}),o.action_type==="onvalidate"&&o.action_run!=="delete"&&e.jsx(Mt,{lgcGrpInd:t,condGrp:s,condGrpInd:p})]})}const Tt={equal:{label:d("Equal"),notFields:["button"]},not_equal:{label:d("Not Equal"),notFields:["button","user"]},null:{label:d("Is Null"),notFields:["button","user"]},not_null:{label:d("Is Not Null"),notFields:["button","user"]},contain:{label:d("Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},contain_all:{label:d("Contain All"),fields:["select"]},not_contain:{label:d("Not Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},greater:{label:d("Greater Than"),fields:["number","date","time","datetime-local"]},less:{label:d("Less Than"),fields:["number","date","time","datetime-local"]},greater_or_equal:{label:d("Greater Than or Equal"),fields:["number","date","time","datetime-local"]},less_or_equal:{label:d("Less Than or Equal"),fields:["number","date","time","datetime-local"]},start_with:{label:d("Start With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},end_with:{label:d("End With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},between:{label:d("Between"),fields:["number","date","time","datetime-local"]},on_click:{label:d("On Click"),fields:["button.btnTyp:button","button.btnTyp:next-step","button.btnTyp:previuos-step"]}};function Se({logic:o,fieldVal:t,delLogic:s,lgcInd:p,subLgcInd:i,subSubLgcInd:l,value:h,addInlineLogic:A,changeLogic:f,logicValue:a,changeValue:y,changeSmartKey:m,changeFormField:k,smartTagAllowed:c,formFields:r}){var g,F,j,W,C,z,E;const{css:u}=L(),x=Q(ye);let $=!1,O="",N="",n="";(g=r==null?void 0:r.find)==null||g.call(r,b=>{if(b.key===t)return b.type.match(/^(check|radio|select|html-select|image-select)$/)?O="text":O=b.type,N=b.type,n=b.key,!0});const v=[{label:d("Logged In"),value:"logged_in"},{label:d("Logged Out"),value:"logged_out"}],w=()=>{var q,H,le,ee,oe,Z,me,U;if(N==="razorpay")return;let b;if(N==="user"?b=v:b=(H=(q=x==null?void 0:x[n])==null?void 0:q.opt)==null?void 0:H.map(P=>({label:P.lbl,value:P.val||P.lbl})),N==="select"){const{optionsList:P}=(x==null?void 0:x[n])||{};return P.reduce((re,ae)=>{const xe=Object.keys(ae)[0],ke=Object.values(ae)[0];return re.push({type:"group",title:xe,childs:ke.map(Fe=>({label:Fe.lbl,value:Fe.val||Fe.lbl}))}),re},[])}if(O==="decision-box"){const P=x==null?void 0:x[n];return[{label:(le=P==null?void 0:P.msg)==null?void 0:le.checked,value:(ee=P==null?void 0:P.msg)==null?void 0:ee.checked},{label:(oe=P==null?void 0:P.msg)==null?void 0:oe.unchecked,value:(Z=P==null?void 0:P.msg)==null?void 0:Z.unchecked}]}return b||(b=(U=(me=x==null?void 0:x[n])==null?void 0:me.options)==null?void 0:U.map(P=>({label:P.lbl,value:P.val||P.code||P.i||P.lbl}))),b},S=(b,q)=>q.find(H=>{if(H===b)return!0;if(!H.includes("."))return!1;const le=H.indexOf("."),ee=H.substring(0,le);if(b!==ee)return!1;const oe=H.substring(le+1);if(!oe)return!1;const[Z,me]=oe.split(":"),U=Z.split("."),P=r.find(ae=>ae.key===n)||{};return U.reduce((ae,xe)=>ae[xe],P)===me}),B=b=>be.find(q=>b===`\${${q.name}}`);O||(O=((F=B(t))==null?void 0:F.type)||""),$||($=((j=B(t))==null?void 0:j.singleSelect)||!1);const _=b=>{var le;const q=((le=B(t))==null?void 0:le.type)||b;return q?Object.entries(Tt).reduce((ee,[oe,Z])=>Z.notFields&&S(q,Z.notFields)?ee:Z.fields?S(q,Z.fields)?[...ee,{key:oe,lbl:Z.label}]:ee:[...ee,{key:oe,lbl:Z.label}],[]):[]},D=b=>b==="${_bf_custom_date_format()}"?d("Date Format"):b==="${_bf_user_meta_key()}"?d("Meta Key"):b==="${_bf_query_param()}"?d("Query Param"):"Smart Key",X=["null","not_null","on_click"];return e.jsxs("div",{className:`${u(qe.lgcBlk)} btcd-logic-blk`,children:[e.jsxs("div",{className:u(qe.processDgrm),children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Form Fields",value:t,onChange:b=>k(b.target.value,p,i,l),children:[e.jsx("option",{value:"",children:d("Select Form Field")}),!!r.length&&e.jsx("optgroup",{label:"Form Fields",children:r.map(b=>!nt.includes(b.type)&&e.jsx("option",{value:b.key,children:b.name},`ff-lb-${b.key}`))}),c&&e.jsx("optgroup",{label:`General Smart Codes ${ve?"":"(PRO)"}`,children:(W=be)==null?void 0:W.map(({name:b,label:q})=>e.jsx("option",{value:`\${${b}}`,disabled:!ve,children:q},`ff-rm-${b}`))})]})})}),((C=B(t))==null?void 0:C.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Field Parameter",onChange:b=>m(b.target.value,p,i,l),value:o.smartKey||"",children:[e.jsx("option",{value:"",children:d("Select Form Field")}),!!r.length&&e.jsx("optgroup",{label:"Form Fields",children:r.map(b=>!b.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:b.key,children:b.name},`ff-lb-${b.key}`))})]})})}),((z=B(t))==null?void 0:z.custom)&&!((E=B(t))!=null&&E.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsx(Ne,{label:D(t),type:"text",onChange:b=>m(b.target.value,p,i,l),value:o.smartKey||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Logic",value:a,onChange:b=>f(b.target.value,p,i,l),children:[e.jsx("option",{value:"",children:d("Select One")}),_(O).map(({key:b,lbl:q})=>e.jsx("option",{value:b,children:q},b))]})})}),a!=="between"&&a!=="not between"&&!X.includes(a)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:O.match(/user|select|check|radio/g)?e.jsx(Oe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:h||"",onChange:b=>y(b,p,i,l),options:w(),fldType:O,singleSelect:$}):e.jsx(Xe,{label:"Value",type:O.match(/select|check|radio|number|range/g)?"text":O,disabled:a==="null"||a==="not_null",onChange:b=>y(b,p,i,l),value:h||"",options:w(),formFields:r})})}),(a==="between"||a==="not between")&&e.jsx("div",{className:"block-wrapper",children:e.jsxs("div",{className:"block-group",children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:N.match(/select|check|radio/g)?e.jsx(Oe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:h.min||"",onChange:b=>y(b,p,i,l,"min"),options:w(),customValue:!0,fldType:N}):e.jsx(Ne,{label:"Min Value",type:O,disabled:a==="null"||a==="not_null",onChange:b=>y(b.target.value,p,i,l,"min"),value:h.min||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:N.match(/select|check|radio/g)?e.jsx(Oe,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:h.max||"",onChange:b=>y(b,p,i,l,"max"),options:w(),customValue:!0,fldType:N}):e.jsx(Ne,{label:"Max Value",type:O,disabled:a==="null"||a==="not_null",onChange:b=>y(b.target.value,p,i,l,"max"),value:h.max||""})})})]})})]}),e.jsxs("div",{className:"btcd-li-side-btn",children:[e.jsx(V,{onClick:()=>s(p,i,l),icn:!0,className:"ml-2 white mr-2 sh-sm",children:e.jsx($e,{size:"16"})}),e.jsxs(V,{onClick:()=>A("and",p,i,l),className:"white mr-2 sh-sm",children:[e.jsx(J,{size:"10",className:"icn-rotate-45 mr-1"}),"AND"]}),e.jsxs(V,{onClick:()=>A("or",p,i,l),className:"white sh-sm",children:[e.jsx(J,{size:"10",className:"icn-rotate-45 mr-1"}),"OR"]})]})]})}const qe={lgcBlk:{pn:"relative",dy:"flex",cg:15,rg:15,my:5,":hover":{bc:"#F0F0F0"}},lgcGrp:{b:"0.5px solid #D5D5D5",brs:8,p:10,ml:20},blkItm:{w:"100%"},processDgrm:{"--linethick":"1px","--linewidth":"1.5em","--line-color":"#b9c5ff",flx:"align-center",w:"100%",m:0,p:0,ls:"none",ta:"center","& > .block-wrapper":{flex:"1 1 auto"},"& .block-wrapper>.block-content":{cr:"#666",brs:10},"& .block-wrapper::before, & .block-wrapper::after, & .block-group::before, & .block-group::after, & .block-content::before, & .block-content::after":{bse:"solid",bcr:"var(--line-color)"},"& .block-wrapper .block-group .block-wrapper:first-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:first-child::before":{btlr:10},"&  .block-wrapper .block-group .block-wrapper:first-child .block-content::after, & .block-wrapper .block-group .block-wrapper:first-child::after":{btrr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:last-child::before":{bblr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::after, &  .block-wrapper .block-group .block-wrapper:last-child::after":{bbrr:10},"& ol, & .block-group, & .block-wrapper":{ls:"none",ta:"center"},"& .block-wrapper":{pn:"relative",mb:0,w:"100%"},"& > .block-wrapper, & ol > .block-wrapper, & .block-group > .block-wrapper":{p:"4px 0"},"&  .block-group":{pn:"relative",pl:"var(--linewidth)"},"& .block-group::before, &  .block-group::after":{pn:"absolute",ct:'""',tp:"50%",w:"var(--linewidth)",dy:"block",bwh:"var(--linethick) 0 0"},"& .block-group::before":{lt:0},"&  .block-group::after":{rt:0},"&  .block-group>.block-wrapper::after, &  .block-group>.block-wrapper::before":{pn:"absolute",ct:'""',tp:0,bm:0,w:"var(--linewidth)",h:"100%",dy:"block"},"&  .block-group>.block-wrapper::before":{lt:0,bwh:"0 0 0 var(--linethick)"},"&  .block-group>.block-wrapper::after":{rt:0,bwh:"0 var(--linethick) 0 0"},"&  .block-group>.block-wrapper:first-child::before, &  .block-group>.block-wrapper:first-child::after":{tp:"50%",bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:last-child::before, &  .block-group>.block-wrapper:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:first-child:last-child::before, &  .block-group>.block-wrapper:first-child:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-wrapper>.block-content":{pn:"relative",ml:"var(--linewidth)"},"& >.block-wrapper:first-child>.block-content":{ml:0},"&  .block-wrapper:not(:last-child) .block-wrapper>.block-content":{mr:"var(--linewidth)"},"&  .block-wrapper>.block-content::before, &  .block-wrapper>.block-content::after":{ct:'""',tp:"50%",w:"var(--linewidth)",pn:"absolute",bwh:"var(--linethick) 0 0",h:"50%"},"&  .block-wrapper>.block-content::after":{rt:"calc(0em - var(--linewidth) + 2px)",mr:"calc(0px - var(--linethick))"},"&  .block-wrapper>.block-content::before":{lt:"calc(0em - var(--linewidth) + 2px)",ml:"calc(0px - var(--linethick))"},"&  .block-wrapper:last-child>.block-content::after, & .block-wrapper:last-child>.block-content::before":{tp:0,bwh:"0 0 var(--linethick)"},"& >.block-wrapper:first-child>.block-content::before, & >.block-wrapper:first-child>.block-group::before, & >.block-wrapper:first-child>.block-group>.block-wrapper::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>.block-content:first-child::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>ol>.block-wrapper:first-child>.block-content::before, & >.block-wrapper:last-child>.block-content::after, & >.block-wrapper:last-child>.block-group::after":{b:0},"& >.block-wrapper>.block-content::after,  &  ol>.block-wrapper>.block-content::after, & >.block-wrapper>.block-group::after,  &  ol>.block-wrapper>.block-group::after":{dy:"none"},"& >.block-wrapper>.block-content, &  ol>.block-wrapper>.block-content":{mr:0},"& >.block-wrapper>.block-group,  &  ol>.block-wrapper>.block-group":{pr:0},"& >.block-wrapper:last-child>.block-content::after,  &  ol>.block-wrapper:last-child>.block-content::after,  & >.block-wrapper:last-child>.block-group::after,  &  ol>.block-wrapper:last-child>.block-group::after":{dy:"block"},"& >.block-wrapper:last-child>.block-content, & ol>.block-wrapper:last-child>.block-content":{mr:0},"&  .block-wrapper:last-child>.block-group::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper>.block-content::after":{dy:"none"}}};function Be({logic:o,nested:t,onChange:s,className:p=null}){return e.jsx("div",{children:e.jsxs("select",{value:o,onChange:s,className:`btcd-logic-chip ${p} ${t&&"scl-8"}`,children:[e.jsx("option",{value:"or",children:d("OR")}),e.jsx("option",{value:"and",children:d("AND")})]})})}function Rt({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){var N;const{css:i}=L(),[l,h]=ce(I),A=Y(G),f=Q(ye),a=(n,v,w)=>{const S=T(l,B=>{const _=B[t].conditions[p].logics;if(_.length>1)if(w!==void 0)if(_[n][v].length===w+1)if(_[n][v].length===3){const D=_[n][v][w-2];_[n].splice(v,1),_[n].push(D)}else _[n][v].splice(w-1,2);else if(_[n][v].length===3){const D=_[n][v][w+2];_[n].splice(v,1),_[n].push(D)}else _[n][v].splice(w,2);else if(v!==void 0)if(_[n].length===v+1)if(_[n].length===3){const D=_[n][v-2];_.splice(n,1),_.splice(n,0,D)}else _[n].splice(v-1,2);else if(_[n].length===3){const D=_[n][v+2];_.splice(n,1),_.splice(n,0,D)}else _[n].splice(v,2);else n!==0?_.splice(n-1,2):_.splice(n,2)});h(S),A(B=>R(M({},B),{unsaved:!0}))},y=(n,v,w,S)=>{const B=T(l,_=>{const D=_[t].conditions[p].logics;S!==void 0?(n==="null"&&(D[v][w][S].val=""),D[v][w][S].logic=n):w!==void 0?(n==="null"&&(D[v][w].val=""),D[v][w].logic=n):(n==="null"&&(D[v].val=""),D[v].logic=n)});h(B),A(_=>R(M({},_),{unsaved:!0}))},m=(n,v,w,S)=>{const B=T(l,_=>{const D=_[t].conditions[p].logics;S!==void 0?D[v][w][S]=n:w!==void 0?D[v][w]=n:D[v]=n});h(B),A(_=>R(M({},_),{unsaved:!0}))},k=(n,v,w,S)=>S!==void 0?n[v][w][S]:w!==void 0?n[v][w]:n[v],c=(n,v,w,S,B="")=>{const _=T(l,D=>{const X=D[t].conditions[p].logics,g=k(X,v,w,S);B?(typeof g.val=="string"&&(g.val={}),g.val[B]=n):g.val=n});h(_),A(D=>R(M({},D),{unsaved:!0}))},r=(n,v,w,S)=>{const B=be.find(D=>D.name===n),_=T(l,D=>{const X=D[t].conditions[p].logics,g=k(X,v,w,S);g.field=n,g.val="",B!=null&&B.custom||delete g.smartKey});h(_),A(D=>R(M({},D),{unsaved:!0}))},u=(n,v,w,S)=>{const B=T(l,_=>{const D=_[t].conditions[p].logics;S!==void 0?D[v][w].splice(S+1,0,n,{field:"",logic:"",val:""}):w!==void 0?D[v].splice(w+1,0,n,{field:"",logic:"",val:""}):D.splice(v+1,0,n,{field:"",logic:"",val:""})});h(B),A(_=>R(M({},_),{unsaved:!0}))},x=(n,v,w,S)=>{const B=T(l,_=>{const D=_[t].conditions[p].logics,X=k(D,v,w,S);X.smartKey=n});h(B),A(_=>R(M({},_),{unsaved:!0}))},$=(n,v)=>{if(o.action_type!=="oninput")return!0;const w=n.findIndex(S=>S.field&&S.field in f);return w>=0&&w!==v},O=(n,v,w=0)=>{const S=[n],B={field:"",logic:"",val:""};w?S.push([B,n,B]):S.push(B),h(_=>T(_,D=>{const{logics:X}=_[t].conditions[p],g=[...X[v],...S];D[t].conditions[p].logics[v]=g}))};return(N=s==null?void 0:s.logics)==null?void 0:N.map((n,v)=>e.jsxs("span",{children:[typeof n=="object"&&!Array.isArray(n)&&e.jsx(Se,{logic:n,fieldVal:n.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:n.logic,changeLogic:y,addInlineLogic:u,delLogic:a,lgcGrpInd:t,lgcInd:v,value:n.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(s.logics,v),formFields:ge(s)}),typeof n=="string"&&e.jsx(Be,{logic:n,onChange:w=>m(w.target.value,v)}),Array.isArray(n)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[n.map((w,S)=>e.jsxs("span",{children:[typeof w=="object"&&!Array.isArray(w)&&e.jsx(Se,{logic:w,fieldVal:w.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:w.logic,changeLogic:y,addInlineLogic:u,delLogic:a,lgcGrpInd:t,lgcInd:v,subLgcInd:S,value:w.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(n,S),formFields:ge(s)}),typeof w=="string"&&e.jsx(Be,{logic:w,nested:!0,onChange:B=>m(B.target.value,v,S)}),Array.isArray(w)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[w.map((B,_)=>e.jsxs("span",{children:[typeof B=="object"&&!Array.isArray(B)&&e.jsx(Se,{logic:B,fieldVal:B.field,changeFormField:r,changeValue:c,changeSmartKey:x,logicValue:B.logic,changeLogic:y,addInlineLogic:u,delLogic:a,lgcGrpInd:t,lgcInd:v,subLgcInd:S,subSubLgcInd:_,value:B.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(w,_),formFields:ge(s)}),typeof B=="string"&&e.jsx(Be,{logic:B,nested:!0,onChange:D=>m(D.target.value,v,S,_)})]},`subsubLogic-${_+90}`)),e.jsxs(Ae,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(V,{icn:!0,className:"blue sh-sm",children:e.jsx(J,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>u("and",v,S,w.length),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>u("or",v,S,w.length),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]})]})]})]})]},`subLogic-${S*7}`)),e.jsxs(Ae,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(V,{icn:!0,className:"blue sh-sm",children:e.jsx(J,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>O("and",v),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>O("or",v),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>O("and",v,1),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:i(he.addItemBtn),onClick:()=>O("or",v,1),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})]})]},`logic-${v+44}`))}const he={addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function zt({lgcGrpInd:o,lgcGrp:t}){var f;const{css:s}=L(),p=Y(I),i=Y(G),l=a=>a.replace(/-/g," ").split(" ").map(y=>ct(y)).join(" "),h=a=>{We(),p(y=>T(y,m=>{const{conditions:k}=m[o],c=R(M({},we),{cond_type:a});a==="else"&&delete c.logics,a==="else-if"&&k[k.length-1].cond_type==="else"?k.splice(k.length-1,0,c):k.push(c)})),i(y=>R(M({},y),{unsaved:!0}))},A=(a,y,m="",k=0)=>{We();const c=[a],r={field:"",logic:"",val:""};k?c.push([r,a,r]):c.push(r),p(u=>T(u,x=>{let $=x[o].conditions[y].logics;$=_t($,m),$.push(...c)})),i(u=>R(M({},u),{unsaved:!0}))};return e.jsxs("div",{className:s(ie.container),children:[e.jsxs("div",{className:s(ie.section),children:[t.action_behaviour==="cond"&&e.jsxs("div",{className:s(ie.sideBdr),children:[e.jsx("div",{className:s(ie.sideBdrLn)}),e.jsx("div",{className:s(ie.sideBdrCrl)})]}),(f=t==null?void 0:t.conditions)==null?void 0:f.map((a,y)=>e.jsxs(de.Fragment,{children:[t.action_behaviour==="cond"&&a.cond_type!=="else"&&e.jsxs(ze,{title:l(a.cond_type),accordionActions:a.cond_type!=="if"&&e.jsx(Je,{lgcGrpInd:o,condGrpInd:y}),children:[e.jsx(Rt,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ae,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(V,{icn:!0,className:"blue sh-sm",children:e.jsx(J,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>A("and",y),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>A("or",y),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>A("and",y,"",1),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>A("or",y,"",1),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})})]},a.cond_type+0),t.action_behaviour==="cond"&&e.jsx(ze,{title:a.cond_type==="else"?"Else":"Then",titleOutline:a.cond_type!=="else",accordionActions:a.cond_type==="else"&&e.jsx(Je,{lgcGrpInd:o,condGrpInd:y,add:!1,clone:!1}),children:e.jsx(Ue,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y})},a.cond_type+1),t.action_behaviour!=="cond"&&e.jsx(Ue,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:y})]},`wkf-${y+99}`))]}),t.action_behaviour==="cond"&&e.jsxs(Ae,{place:"bottom",children:[e.jsx(pe,{msg:"Add Condition",children:e.jsx(V,{icn:!0,className:"blue sh-sm ml-2",children:e.jsx(J,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>h("else-if"),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else If"]}),t.conditions[t.conditions.length-1].cond_type!=="else"&&e.jsxs("button",{type:"button",className:s(ie.addItemBtn),onClick:()=>h("else"),children:[e.jsx(J,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else"]})]})]})]})}const Je=({lgcGrpInd:o,condGrpInd:t,add:s,clone:p,remove:i})=>{const[l,h]=de.useState({show:!1}),A=Y(I),f=Y(G),a=()=>{h({show:!1})},y=()=>{h({show:!1}),A(u=>T(u,x=>{x[o].conditions.splice(t,1)})),f(u=>R(M({},u),{unsaved:!0}))},m=()=>{h({btnTxt:"Delete",body:"Are you sure to delete this logic?",btnClass:"",action:()=>{y(),a()},show:!0})},k=()=>{A(u=>T(u,x=>{x[o].conditions.splice(t+1,0,dt(x[o].conditions[t]))})),f(u=>R(M({},u),{unsaved:!0}))},c=()=>{A(u=>T(u,x=>{x[o].conditions.splice(t+1,0,R(M({},we),{cond_type:"else-if"}))})),f(u=>R(M({},u),{unsaved:!0}))},r=u=>typeof u=="boolean"?u:!0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[r(s)&&e.jsx(pe,{msg:"Add Else If",children:e.jsx(V,{onClick:c,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(yt,{size:"16"})})}),r(p)&&e.jsx(pe,{msg:"Clone",children:e.jsx(V,{onClick:k,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(rt,{size:"16"})})}),r(i)&&e.jsx(pe,{msg:"Delete",children:e.jsx(V,{onClick:m,icn:!0,className:"white ml-2 sh-sm",children:e.jsx($e,{size:"16"})})})]}),e.jsx(Ye,{show:l.show,close:a,btnTxt:l.btnTxt,btnClass:l.btnClass,body:l.body,action:l.action})]})},ie={container:{mt:10},section:{pn:"relative",w:"100%",zx:1,mb:10,pb:10},sideBdr:{flx:"center",fd:"column",w:50,pn:"absolute",h:"100%",zx:-1},sideBdrLn:{w:2,bc:"var(--b-50)",h:"100%"},sideBdrCrl:{brs:"50%",bc:"var(--b-50)",h:8,w:8,mt:-1},addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function Pt({lgcGrpInd:o,lgcGrp:t}){var f;const[s,p]=ce(I),i=Y(G),l=a=>{const y=T(s,m=>{a==="delete"?delete m[o].action_type:m[o].action_type===void 0&&(m[o].action_type="onload"),m[o].action_run=a});p(y),i(m=>R(M({},m),{unsaved:!0}))},h=a=>{const y=T(s,m=>{a==="onsubmit"&&m[o].conditions.forEach(c=>{var u,x;const r=(x=(u=c.actions)==null?void 0:u.fields)==null?void 0:x.length;for(let $=0;$<r;$+=1)c.actions.fields[$].action="value"}),m[o].action_behaviour="cond",m[o].conditions.forEach(c=>{a==="onvalidate"?(c.actions.failure="",delete c.actions.fields,delete c.actions.success):(c.actions.fields=[{field:"",action:"value"}],c.actions.success=[],delete c.actions.failure)});const[k]=m[o].conditions;k.cond_type="if",k.logics||(k.logics=we.logics),m[o].action_type=a});p(y),i(m=>R(M({},m),{unsaved:!0}))},A=a=>{const y=T(s,m=>{m[o].action_behaviour=a;const[k]=m[o].conditions;k.cond_type=a==="cond"?"if":a,a==="always"?delete k.logics:a==="cond"&&(k.logics=we.logics),m[o].conditions=[k]});p(y),i(m=>R(M({},m),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Run When:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(se,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Record Create/Edit")}),checked:t.action_run==="create_edit",value:"create_edit"}),e.jsx(se,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Record Create")}),checked:t.action_run==="create",value:"create"}),e.jsx(se,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Record Edit")}),checked:t.action_run==="edit",value:"edit"}),e.jsx(se,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Record Delete")}),checked:t.action_run==="delete",value:"delete"})]})]}),t.action_run!=="delete"&&e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Effect:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(se,{radio:!0,onChange:a=>h(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Always")}),checked:t.action_type==="always",value:"always"}),e.jsx(se,{radio:!0,onChange:a=>h(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Only on Form Load")}),checked:t.action_type==="onload",value:"onload"}),e.jsx(se,{radio:!0,onChange:a=>h(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Only on Field Input")}),checked:t.action_type==="oninput",value:"oninput"}),e.jsx(se,{radio:!0,onChange:a=>h(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Only on Form Validate")}),checked:t.action_type==="onvalidate",value:"onvalidate"}),e.jsx(se,{radio:!0,onChange:a=>h(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Only on Form Submit")}),checked:t.action_type==="onsubmit",value:"onsubmit"})]})]}),e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Behaviour:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[!((f=t==null?void 0:t.action_type)!=null&&f.match(/^(onvalidate|oninput)$/))&&e.jsx(se,{radio:!0,onChange:a=>A(a.target.value),name:`ab-${o+121}`,title:e.jsx("small",{className:"txt-dp",children:d("Always")}),checked:t.action_behaviour==="always",value:"always"}),e.jsx(se,{radio:!0,onChange:a=>A(a.target.value),title:e.jsx("small",{className:"txt-dp",children:d("Condition")}),checked:t.action_behaviour==="cond",value:"cond"})]})]})]})}function rs(){const o=Q(pt),[t,s]=de.useState({show:!1}),[p,i]=ce(I),l=Y(G),{css:h}=L(),A=Q(He),{isPro:f}=A,a=x=>{switch(x){case"onload":return d("On Load");case"oninput":return d("On Field Input");case"onvalidate":return d("On Form Validate");case"onsubmit":return d("On Form Submit");case"create_edit":return d("Record Create/Edit");case"create":return d("Record Create");case"edit":return d("Record Edit");case"delete":return d("Record Delete");case"always":return d("Always");case"cond":return d("With Condition")}},y=()=>{const x=T(p,$=>{$.unshift({title:`Action ${p.length+1}`,action_type:"always",action_run:"create_edit",action_behaviour:"cond",conditions:[M({},we)]})});i(x),l($=>R(M({},$),{unsaved:!0}))},m=x=>{if(p[x].id){const $=mt({formID:o,id:p[x].id},"bitforms_delete_workflow").then(O=>{if(O!==void 0&&O.success){const N=T(p,n=>{n.splice(x,1)});i(N)}});ut.promise($,{success:"Successfully Deleted.",loading:"Deleting...",error:"Error occurred, Try again."})}else{const $=T(p,O=>{O.splice(x,1)});i($)}},k=(x,$)=>{const O=T(p,N=>{N[$].title=x.target.value});i(O),l(N=>R(M({},N),{unsaved:!0}))},c=()=>{t.show=!1,s(M({},t))},r=x=>{t.btnTxt="Delete",t.body="Are you sure to delete this conditional logic?",t.btnClass="",t.action=()=>{m(x),c()},t.show=!0,s(M({},t))},u=({oldIndex:x,newIndex:$})=>{x!==$&&(i(O=>xt(O,x,$)),l(O=>R(M({},O),{unsaved:!0})))};return e.jsxs("div",{className:"btcd-workflow",style:{width:"93%"},children:[e.jsx(Ye,{show:t.show,close:c,btnTxt:t.btnTxt,btnClass:t.btnClass,body:t.body,action:t.action}),e.jsx("h2",{children:d("Conditional Logics")}),e.jsxs("h5",{children:["How to configure conditional logics: ",e.jsx("a",{href:Re.conditionalLogic.link,target:"_blank",rel:"noreferrer",className:"yt-txt ml-1 mr-1",children:"YouTube"}),e.jsx("a",{href:Re.conditionalLogicDoc.link,target:"_blank",rel:"noreferrer",className:"doc-txt",children:"Documentation"})]}),(!f&&!p.length||f)&&e.jsxs(V,{className:"blue",onClick:y,children:[e.jsx(J,{size:"10",className:"icn-rotate-45 mr-1"}),d("Add Conditional Logic")]}),p.length===0&&e.jsxs("div",{className:h(K.btcdEmpty,K.txCenter),children:[e.jsx(kt,{size:"50"}),d("Empty")]}),e.jsx(ht,{onSortEnd:u,useDragHandle:!0,children:p.map((x,$)=>e.jsxs(ft,{index:$,children:[e.jsxs("div",{className:"workflow-grp d-flx mt-2",children:[e.jsxs(vt,{customTitle:e.jsx(bt,{className:"workflow-drg-handle mr-1 flx"}),title:x.title,header:e.jsxs("small",{className:"f-right txt-dp mr-4",children:[e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_run)]}),x.action_type!==void 0&&e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_type)]}),e.jsxs("span",{children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(x.action_behaviour)]})]}),titleEditable:!0,onTitleChange:O=>k(O,$),notScroll:!0,cls:f?"w-9":"w-10",children:[e.jsx(Pt,{lgcGrpInd:$,lgcGrp:x}),e.jsx(zt,{lgcGrpInd:$,lgcGrp:x})]}),f&&e.jsx("div",{className:"mt-2",children:e.jsx(V,{onClick:()=>r($),icn:!0,className:"ml-2 sh-sm btcd-menu-btn tooltip",style:{"--tooltip-txt":'"Delete Action"'},children:e.jsx($e,{size:"16"})})})]}),!f&&e.jsxs("div",{className:"txt-center bg-pro p-5 mt-2",children:[d("For"),"",e.jsx("span",{className:"txt-pro",children:d("UNLIMITED")}),"",d("Conditional Logics"),",",e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("b",{className:"txt-pro",children:d("Buy Premium")})})]})]},`workflows-grp-${$+13}`))}),p.length>1&&e.jsxs("div",{className:h(K.w9,{fs:13},K.mt4),children:[e.jsx("strong",{children:"Note: "}),"Conditional Logics are triggered based on the order of the logic groups. The higher the logic group, the higher the priority. If you want to change the priority, you can sort by drag and drop the logic group."]})]})}export{rs as default};
