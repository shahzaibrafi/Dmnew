var saveFormProgress=function(){"use strict";return async function(e){const a=e?[e]:Object.keys(window?.bf_globals||{}),n={};return await Promise.all(a.map((async e=>{const a=bfSelect(`#form-${e}`),t=window?.bf_globals?.[e];if(a){const r=new URL(t?.ajaxURL),d="bitforms_save_partial_form_progress";r.searchParams.append("action",d),t?.entryId&&(r.searchParams.append("_ajax_nonce",t.nonce||""),r.searchParams.append("entryID",t.entryId),r.searchParams.append("formID",t.formId),r.searchParams.append("entryToken",t.entryToken));let s=new FormData(a);"undefined"!=typeof advancedFileHandle&&(s=advancedFileHandle(t,s)),t.GCLID&&s.set("GCLID",t.GCLID);const o=[];Object.entries(t?.fields||{}).forEach((e=>{e[1]?.valid?.hide&&o.push(e[0])})),o.length&&s.append("hidden_fields",o);const i=await fetch(r,{method:"POST",body:s,keepalive:!0}),c=await i.json();if(n[e]=c,c?.success){if("user_id"in(c?.data||{})&&!c?.data?.user_id){const e=c.data.fields;e.entryId=c.data.entry_id,localStorage.setItem(`bitform-partial-form-${t.formId}`,JSON.stringify(e))}c?.data?.entry_id&&(setHiddenFld({name:"entryID",value:c.data.entry_id,type:"number"},a),bf_globals[e].entryId=c.data.entry_id),c?.data?.entry_token&&(bf_globals[e].entryToken=c.data.entry_token)}}}))),n}}();
