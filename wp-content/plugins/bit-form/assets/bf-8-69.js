var ss=Object.defineProperty,rs=Object.defineProperties;var ns=Object.getOwnPropertyDescriptors;var Ct=Object.getOwnPropertySymbols;var os=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable;var Lt=(r,o,l)=>o in r?ss(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,i=(r,o)=>{for(var l in o||(o={}))os.call(o,l)&&Lt(r,l,o[l]);if(Ct)for(var l of Ct(o))as.call(o,l)&&Lt(r,l,o[l]);return r},R=(r,o)=>rs(r,ns(o));import{D as ls,F as xt,G as We,H as Tt,J as Z,j as n,K as is,O as cs,P as ds,a as ce,t as $e,u as I,Q as ms,w as fs,$ as us,r as S,U as bs,d as _e,_ as K,V as _t,v as Vt,k,W as h,X as At,p as St,Y as Dt,Z as It,a0 as ps,a1 as hs,a2 as xe,c as ze,a3 as ys,a4 as gs,a5 as vs,a6 as Ss,a7 as ws,a8 as xs,a9 as Ts,L as _s,aa as Et,ab as Rt,ac as Pt,ad as $s,ae as ks,af as Ot,ag as He,ah as Ut,ai as js,aj as Mt,ak as zt,al as Ht,am as Wt,an as Kt,ao as qt,ap as Gt,aq as Cs,ar as Jt,as as Qt,at as Yt,au as Ls,av as Xt,aw as Zt,ax as es,ay as ts,az as Ds,aA as Is,aB as Ft,aC as Fs,aD as Ns,aE as Bs,aF as Vs,aG as Ke,aH as qe,aI as As,o as $t,aJ as Es,n as Rs,N as Nt,aK as Ps,aL as Os,aM as Us,aN as Ms,aO as zs,aP as Hs,aQ as Ws,e as Ks,aR as qs,aS as Gs,aT as Js,aU as Te,aV as g}from"./main-677.js";import{T as Qs,a as Ys,R as Xs}from"./bf-610-73.js";const Ge=ls({allThemeVars:{},allThemeColors:{},allStyles:{}}),vr=xt(r=>{const o=r(We),{lightThemeColors:l,darkThemeColors:t}=r(Ge).allThemeColors;return o==="dark"?i(i({},l),t):l}),Sr=xt(r=>{const o=r(We)==="dark",l=r(Tt),{lgLightThemeVars:t,lgDarkThemeVars:u,mdLightThemeVars:d,mdDarkThemeVars:b,smLightThemeVars:_,smDarkThemeVars:$}=r(Ge).allThemeVars;if(l==="lg")return o?i(i({},t),u):t;if(l==="md")return i(i(i(i({},t),o&&u),d),o&&b);if(l==="sm")return i(i(i(i(i(i({},t),o&&u),d),o&&b),_),o&&$)}),wr=xt(r=>{const o=r(We)==="dark",l=r(Tt),{lgLightStyles:t,lgDarkStyles:u,mdLightStyles:d,mdDarkStyles:b,smLightStyles:_,smDarkStyles:$}=r(Ge).allStyles;if(l==="lg")return o?Z(t,u):t;if(l==="md")return o?Z(t,u,d,b):Z(t,d);if(l==="sm")return o?Z(t,u,d,b,_,$):Z(t,d,_)});function Zs({size:r=14,stroke:o=3,className:l}){return n.jsx("svg",{className:l,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 30 30",children:n.jsx("polyline",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,points:"26 15.2 4 15.2 12.38 23.69 4 15.2 12.77 6.31"})})}var er={name:"Contact Form",theme:"bitformDefault",fields:{"fld_key-1":{typ:"button",btnSiz:"md",btnTyp:"submit",txt:"Submit",icn:{pos:"",url:""},valid:{},customClasses:{},customAttributes:{},fulW:!0},"fld_key-2":{typ:"text",lbl:"Name",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0}},customClasses:{},customAttributes:{},fieldName:"name",acHide:!0,ac:"name",ph:"John Doe"},"fld_key-3":{typ:"textarea",lbl:"Message",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Message can not be empty.</p>'}},customClasses:{},customAttributes:{},fieldName:"textarea-44-3",ph:"Write your message..."},"fld_key-5":{typ:"email",lbl:"Email",ph:"example@mail.com",phHide:!0,pattern:"^[^$_bf_$s@]+@[^$_bf_$s@]+$_bf_$.[^$_bf_$s@]+$",valid:{req:!0,reqPos:"after",reqShow:!0},err:{invalid:{dflt:'<p style="margin:0">Please, Enter a valid email address.</p>',show:!0},req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Please enter your email.</p>'}},customClasses:{},customAttributes:{},fieldName:"email",acHide:!0,ac:"email"}},layouts:{lg:[{w:60,h:77,x:0,y:0,i:"fld_key-2"},{w:60,h:77,x:0,y:77,i:"fld_key-5"},{w:60,h:98,x:0,y:154,i:"fld_key-3",minW:9},{w:60,h:50,x:0,y:252,i:"fld_key-1"}],md:[],sm:[]}};function tr(r,o){let l={};r==="contact_form"?l=er:l=ds;const{name:t,fields:u,layouts:d,conditions:b,confirmations:_,theme:$,additionalSettings:C}=l;d.md=Z(d.lg,d.md),d.sm=Z(d.lg,d.md,d.sm);const q=Object.keys(u),p={},v={lg:[],md:[],sm:[]},L=Z(is(),_||{}),T=[...rr(),...b||[]];q.forEach((N,ee)=>{const P=`b${o}-${ee+1}`,c=i({},u[N]);c.fieldName=`${c.typ}-${P}`,p[P]=c;const x=d.lg.find(V=>V.i===N),B=d.md.find(V=>V.i===N),W=d.sm.find(V=>V.i===N);v.lg.push(R(i({},x),{i:P})),v.md.push(R(i({},B),{i:P})),v.sm.push(R(i({},W),{i:P}))});const H=Object.entries(p),{themeColors:D,themeVars:F,styles:w}=cs($,H,o);return{name:t,fields:p,layouts:v,confirmations:L,conditions:T,allThemeColors:D,allThemeVars:F,allStyles:w,additionalSettings:C}}const sr={cond_type:"if",logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}],actions:{fields:[{field:"",action:"value"}],success:[{type:"successMsg",details:{id:'{"index":0}'}}]}};function rr(){return[{title:"Show Success Message",action_type:"onsubmit",action_run:"create_edit",action_behaviour:"always",conditions:[sr]}]}function nr(){const{css:r}=ce(),{formID:o}=$e(),l=I(us);return n.jsxs("a",{href:`${l.siteURL}/bitform-form-view/${o}`,target:"_blank",className:r(or.shareIcn),rel:"noreferrer",children:[n.jsx("span",{children:"Preview"}),n.jsx(ms,{size:13,className:r(fs.ml1)})]})}const or={title:{fs:14,mb:5,fw:600},shareIcn:{bd:"none",px:15,py:7,oe:"none",b:"none",cr:"var(--white-100)",flx:"align-center",fs:12,fw:400,tn:"background 0.2s",my:5,brs:8,curp:1,":hover":{bd:"var(--b-35-33)",cr:"var(--white-100)"},":visited":{bd:"var(--b-35-33)",cr:"var(--white-100)"}},downmenu:{w:200,px:5,py:8},downmenuinput:{w:"100% !important",fs:12}};function Bt({id:r,className:o,cls:l,value:t,readOnly:u=!0}){const{css:d}=ce(),b=S.useRef(null),_=()=>navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t):(b.current.focus(),b.current.select(),new Promise((C,q)=>{document.execCommand("copy")?C():q()})),$=()=>{_().then(()=>_e.success(K("Copied on clipboard."))).catch(()=>_e.error(K("Failed to Copy, Try Again.")))};return n.jsxs("div",{className:`${d(wt.wrapper)} ${o}`,children:[n.jsx("input",{"aria-label":"Copy field key",ref:b,className:`${d(wt.input)} ${l}`,id:"text-copy",type:"text",value:t,readOnly:u}),n.jsx(Qs,{msg:"Copy",children:n.jsx("button",{"data-testid":`${r}-col-cpy-btn`,onClick:$,className:`${d(wt.btn)}`,type:"button","aria-label":"Copy field key",children:n.jsx(bs,{w:"20"})})})]})}const wt={wrapper:{pn:"relative"},input:{bd:"var(--white-0-95)",oe:"none",b:"none !important",brs:"10px !important",p:"2px 40px 2px 10px !important",w:100,lh:"1 !important",fw:"500 !important",bs:"none !important",":focus-visible":{bs:"0 0 0 2px var(--b-50) !important"}},btn:{pn:"absolute !important",b:"none",oe:"none",bd:"none",tp:"50%",tm:"translateY(-50%)",rt:2,cur:"pointer",tn:"color 0.2s",cr:"var(--white-0-61)",flx:"center-between","&:hover":{cr:"var(--b-50)"}}};function ar({children:r,instance:o=null,width:l="auto",place:t="bottom",onShow:u,onHide:d,arrow:b=!0,trigger:_="click",offset:$=[0,10],hideOnClick:C=!0}){return n.jsx(Ys,R(i(i({ref:o,inertia:!0,trigger:_,placement:t,duration:350,interactiveBorder:20},u&&{onShow:u}),d&&{onHide:d}),{theme:"light-border",animation:"shift-away-extreme",interactive:!0,maxWidth:l,offset:$,arrow:b&&Xs,content:r[1],hideOnClick:C,children:n.jsx("span",{children:r[0]})}))}function lr(){const{css:r}=ce(),{formID:o}=$e(),l=I(_t),{conversationalSettings:t={}}=l;return n.jsxs(ar,{children:[n.jsx("button",{type:"button",className:r(ie.shareIcn),children:"Publish"}),n.jsxs("div",{className:r(ie.downmenu),children:[n.jsxs("div",{children:[n.jsx("div",{className:r(ie.title),children:"Short Code"}),n.jsx(Bt,{cls:r(ie.downmenuinput),value:`[bitform id='${o}']`})]}),t.enable&&n.jsxs("div",{children:[n.jsx("div",{className:r(ie.title),children:"Conversational Form Short Code"}),n.jsx(Bt,{cls:r(ie.downmenuinput),value:`[bitform id='${o}' type='conversational']`})]})]})]})}const ie={title:{fs:14,mb:5,fw:600},shareIcn:{bd:"none",px:15,py:7,oe:"none",b:"none",cr:"var(--white-100)",flx:"align-center",fs:12,fw:400,tn:"background 0.2s",my:5,brs:8,curp:1,":hover":{bd:"var(--b-35-33)"}},downmenu:{w:260,px:5,py:8,dy:"flex",fd:"column",gp:10},downmenuinput:{w:"100% !important",fs:12}};function Me(r){const o=$e(),l=Object.keys(r);let t=!0;return l.forEach(u=>{r[u]!=="?"&&u!=="render"&&o[u]!==r[u]&&(r[u]===!0&&o[u]===void 0||r[u]!==!0)&&(t=!1)}),t&&r.render}const z={btct_bld_nav:{flx:"center-between",bd:"var(--dp-blue-bg)",pn:"fixed",h:40,w:"100%",zx:999,inset:0},builder_routes:{mt:40,pn:"relative"},btcd_bld_title:{flx:"align-center",w:320},nav_back_icn:{w:38,ow:"hidden",py:4,cr:"var(--white-100)",pr:15,pl:25,mx:5,brs:100,":hover":{cr:"var(--white-100)",bd:"var(--b-50-22)"}},bit_icn:{flx:"center",w:40,h:"70%",p:"5px 7px",bl:"0.5px solid var(--b-38-62-40)",br:"0.5px solid var(--b-38-62-40)",my:5},btcd_bld_title_inp:{bd:"var(--dp-blue-bg)",cr:"var(--white)",py:6,px:10,fs:14,b:"none",tn:"background 0.3s !important",oe:"none",ml:8,brs:8,"&:hover":{bd:"var(--b-16-35)"},"&:focus":{bd:"var(--b-44-87)",cr:"var(--b-54-12)"}},btcd_bld_lnk:{w:320},btcd_bld_btn:{flx:"align-center",w:320,jc:"end"},cls_btn:{cr:"var(--white)",se:30,mr:15,flx:"center",p:0,ta:"center",tn:"color 0.5s !important","&:hover":{cr:"var(--red-100-61) !important"}},btn:{fw:500,bd:"var(--g-45)",oe:"none",cr:"var(--b-63-18-67)",brs:"10px !important",b:"1px solid var(--g-89-7)",h:28,td:"none",my:5,mx:10,py:7,px:15,pn:"relative",fs:14,curp:1,flx:"align-center",w:"auto","&:disabled":{bd:"var(--b-100-50-5) !important"}},visDisable:{bd:"var(--b-50-22) !important",cr:"var(--b-37-69) !important",b:"none !important",fw:600}};function ir({componentMounted:r,modal:o,setModal:l}){const t=Vt(),{page:u,formType:d,formID:b,"*":_}=$e(),{css:$}=ce(),[C,q]=S.useState(d==="edit"?"Update":"Save"),[p,v]=S.useState(d==="edit"?b:0),[L,T]=S.useState(!1),[H,D]=k(Et),F=I(Rt),w=I(_t),{formName:N,multiStepSettings:ee}=w,P=I(Pt),c=h($s),x=h(ks),B=h(Ot),W=At(He),V=h(Ut),Je=I(js),[J,ke]=k(Mt),[Q,de]=k(zt),[Y,me]=k(Ht),[A,Qe]=k(He),[Ye,M]=k(Wt),[G,je]=k(Kt),[Xe,Ze]=k(qt),[et,tt]=k(Gt),fe=I(Cs),st=h(Jt),rt=h(Qt),nt=h(Yt),ot=h(Ls),at=I(Xt),Ce=I(Zt),lt=I(es),Le=I(ts),it=I(Ds),De=I(Is),{staticStyles:ct}=Ce;S.useEffect(()=>{var e,a;if((e=G[G.length-1])!=null&&e.newItegration||(a=G[G.length-1])!=null&&a.editItegration){const y=St(G,O=>{O.pop()});je(y),te("integrations",y)}},[G]),S.useEffect(()=>{var e;if((e=Q[Q.length-1])!=null&&e.updateTem){const a=St(Q,y=>{y.pop()});de(a),te("email-template",a)}},[Q]),S.useEffect(()=>{var e;if((e=Y[Y.length-1])!=null&&e.updateTem){const a=St(Y,y=>{y.pop()});me(a),te("pdf-template",a)}},[Y]);const ne=e=>{if((e.key==="s"||e.key==="S")&&e.ctrlKey)return e.preventDefault(),!A.disabled&&!L&&Fe(),!1},Ie=e=>{if(A.unsaved){const a=e;return a.preventDefault(),a.returnValue="Are you sure you want to exit?",a.returnValue}};S.useEffect(()=>{var a;document.addEventListener("keydown",ne);const e=(a=document.getElementById("bit-grid-layout"))==null?void 0:a.contentDocument;return e==null||e.addEventListener("keydown",ne),window.addEventListener("beforeunload",Ie),()=>{document.removeEventListener("keydown",ne),e==null||e.removeEventListener("keydown",ne),window.removeEventListener("beforeunload",Ie)}});const dt=()=>{if(A.errors){const e=A.errors[A.errors.length-1];if(e.errorMsg?_e.error(e.errorMsg):_e.error(K("Please fix the errors")),e.errorUrl){const a=Bs();t(`${a}/${e.errorUrl}`)}return e.fieldKey&&(ot(e.fieldKey),setTimeout(()=>{var a;(a=Vs(`[data-key="${e.fieldKey}"]`))==null||a.focus()},500)),!0}return!1},Fe=e=>{const a=Ft("#secondary-update-btn");if(it.styleMode&&Fs(),a)a.click();else if(e==="update-btn"){if(dt())return;te()}else Ft("#update-btn").click()};S.useEffect(()=>{A.unsaved&&L&&T(!1)},[A]);const Ne=()=>{const e=Object.values(F).filter(y=>y.typ==="button"&&y.btnTyp==="submit");return(F?Object.values(F).filter(y=>Ns.includes(y.typ)):[]).length>0||e.length>0},te=(e,a)=>{p&&T(!0);let y=Q,O=Y,m=Xe,E=G;if(e==="email-template"?y=a:e==="pdf-template"?O=a:e==="additional"?m=a:e==="integrations"&&(E=a),!Ne()){const f=i({},o);f.show=!0,f.title=K("Sorry"),f.btnTxt=K("Close"),f.msg=K("Please add a submit button"),f.cancelBtn=!1,l(f),T(!1);return}const j=Dt(fe)||fe===void 0,{layouts:U,nestedLayouts:oe,lightThemeColors:ut,darkThemeColors:bt,lgLightThemeVars:pt,lgDarkThemeVars:ht,mdLightThemeVars:yt,mdDarkThemeVars:gt,smLightThemeVars:vt,smDarkThemeVars:Be,lgLightStyles:Ve,lgDarkStyles:Ae,mdLightStyles:Ee,mdDarkStyles:Re,smLightStyles:Pe,smDarkStyles:Oe}=It(p),ue={lightThemeColors:ut,darkThemeColors:bt},be={lgLightThemeVars:pt,lgDarkThemeVars:ht,mdLightThemeVars:yt,mdDarkThemeVars:gt,smLightThemeVars:vt,smDarkThemeVars:Be};let ae={lgLightStyles:Ve,lgDarkStyles:Ae,mdLightStyles:Ee,mdDarkStyles:Re,smLightStyles:Pe,smDarkStyles:Oe};ae=ps(ae);let se=sessionStorage.getItem("btcd-fs");se=se&&hs(se);const pe=R(i(R(i(i(i(i(R(i(i(i({},p&&{id:p}),!p&&{form_id:P}),p&&{currentReport:Je}),{layout:U,nestedLayouts:oe,formInfo:w,fields:F,form_name:N,report_id:J.id,additional:m,workFlows:Ye,formStyle:se}),!j&&{style:xe.stringify(ae)}),!j&&{staticStyles:xe.stringify(Ce)}),!j&&{themeColors:xe.stringify(ue)}),!j&&{themeVars:xe.stringify(be)}),{breakpointSize:lt}),Le.isFetched&&{customCodes:Le}),{layoutChanged:sessionStorage.getItem("btcd-lc"),rowHeight:sessionStorage.getItem("btcd-rh"),formSettings:i({formName:N,confirmation:et,mailTem:y,pdfTem:O,integrations:E},!Dt(De)&&{formAbandonment:De}),builderSettings:at});p&&H.length!==0&&(pe.deletedFldKey=H);const le=p?"bitforms_update_form":"bitforms_create_new_form",Ue=ze(pe,le).then(f=>{var X,he,ye,ge,ve,Se,we;if(f!=null&&f.success&&r){let{data:s}=f;typeof s!="object"&&(s=JSON.parse(s)),x(re=>R(i({},re),{reRenderGridLayoutByRootLay:re.reRenderGridLayoutByRootLay+1})),(X=s==null?void 0:s.formSettings)!=null&&X.confirmation&&tt(s.formSettings.confirmation),s!=null&&s.workFlows&&M(s.workFlows),(he=s==null?void 0:s.formSettings)!=null&&he.integrations&&je(s.formSettings.integrations),(ye=s==null?void 0:s.formSettings)!=null&&ye.mailTem&&de(s.formSettings.mailTem),(ge=s==null?void 0:s.formSettings)!=null&&ge.pdfTem&&me(s.formSettings.pdfTem),s!=null&&s.additional&&Ze(s.additional),s!=null&&s.Labels&&B(s.Labels),s!=null&&s.reports&&V((s==null?void 0:s.reports)||[]),!(J!=null&&J.id)&&((ve=s==null?void 0:s.form_content)!=null&&ve.report_id)&&ke({id:(Se=s==null?void 0:s.form_content)==null?void 0:Se.report_id,isDefault:((we=s==null?void 0:s.form_content)==null?void 0:we.is_default)||0}),j||(st(ue),rt(be),nt(xe.parse(s==null?void 0:s.style)),ys()),c(re=>gs(re,{type:le==="bitforms_create_new_form"?"add":"update",data:{formID:s.id,status:s.status!=="0",formName:s.form_name,shortcode:`bitform id='${s.id}'`,entries:s.entries,views:s.views,conversion:s.entries===0?0:(s.entries/(s.views==="0"?1:s.views)*100).toPrecision(3),created_at:s.created_at}})),W(),D([]),le==="bitforms_create_new_form"&&p===0&&C==="Save"&&(v(s.id),q("Update"),t(`/form/${u}/edit/${s.id}/${_}`,{replace:!0})),setTimeout(()=>It(s.id),100),sessionStorage.removeItem("btcd-lc"),sessionStorage.removeItem("btcd-fs"),sessionStorage.removeItem("btcd-rh")}else!(f!=null&&f.success)&&(f==null?void 0:f.data)==="Token expired"?window.location.reload():f!=null&&f.success||setTimeout(()=>{window.location.reload()},2e3);return f}).catch(f=>{console.error("form save error=",f)});p&&_e.promise(Ue,{loading:K("Updating..."),success:f=>{var X;return T(!1),((X=f==null?void 0:f.data)==null?void 0:X.message)||(f==null?void 0:f.data)},error:()=>(T(!1),K("Error occurred, Please try again."))}),mt(),ft()},mt=()=>{var a;if(!((a=w.standaloneSettings)!=null&&a.styles))return;const e=vs(w.standaloneSettings.styles);ze({css:e,formID:b},"bitforms_save_standalone_css")},ft=()=>{var y;if(!((y=w.conversationalSettings)!=null&&y.enable))return;let e=Ss(i(i({},ct),ws(p)));const{nestedLayoutStyleText:a}=xs();a.lg&&(e+=a.lg),a.md&&(e+=a.md),a.sm&&(e+=a.sm),e+=Ts(),ze({css:e,formID:b},"bitforms_save_conversational_css")};return n.jsxs("button",{id:"update-btn",className:`${$(z.btn)} tooltip ${A.unsaved?"":$(z.visDisable)}`,type:"button",onClick:()=>Fe("update-btn"),disabled:A.disabled||L,style:{"--tooltip-txt":`'${K("ctrl + s")}'`},children:[C,A.loading&&n.jsx(_s,{size:20,clr:"white",className:"ml-1"})]})}function cr({defaultActive:r,options:o,size:l=100,component:t="a",onChange:u,variant:d="white",show:b,activeShow:_,square:$}){const{css:C}=ce(),q=Number(l),p=c=>Math.floor(q/c),v={};d==="white"&&(v.tabBg="var(--white-0-95)",v.selectorBg="var(--white-100)",v.active="var(--b-50) !important"),d==="blue"&&(v.selectorBg="var(--b-50)",v.tabBg="#454A65",v.tabClr="var(--b-44-87)",v.active="var(--white-100) !important"),d==="lightgray"&&(v.selectorBg="var(--white-100)",v.tabBg="var(--white-0-95)",v.tabClr="var(--b-44-87)",v.active="var(--b-50) !important");const L={wrapper:{ta:"center"},tabs:{fs:p(6.67),py:p(33.34),px:p(20),bd:v.tabBg,ls:"none",dy:"inline-block",brs:p(7.15),pn:"relative","& .active":{cr:v.active},"& button":{bd:"none",oe:"none",b:"none"}},selector:{w:0,h:"80%",dy:"inline-block",pn:"absolute",lt:p(20),tp:"50%",tm:"translatey(-50%)",zx:1,brs:p(9.09),tdn:"0.3s",ttf:"cubic-bezier(0.42, 0.44, 0.57, 1.35)",bd:v.selectorBg,willChange:"transform",bs:d==="blue"&&"0 2px 7px -2px rgb(0 11 49 / 79%)"},tab_link:R(i({curp:1,td:"none",fw:500,flxi:"align-center",pn:"relative",py:$?0:p(10),px:$?0:p(5),textShadow:d==="blue"&&"0 1px 1px #6e6e6e70",zx:1},$&&{aspectRatio:"1/1",w:30,h:30,flxi:"center"}),{tdy:"0.3s",tdn:"0.6s",cr:v.tabClr,"transition-property":"color",":hover:not(.active)":{cr:"var(--white-0-100-90)",tdy:"0s",tdn:"300ms"},":focus-visible":{oe:"2px solid var(--b-50)"},"& .icn":{mr:b!=null&&b.includes("label")?p(20):0,lh:"75%",dy:"block"}})},T=S.useRef(null),H=S.useRef(null),D=S.useRef(null),[F,w]=S.useState(r||o[0].label),N=t;S.useEffect(()=>{F!==r&&w(r)},[r]),S.useLayoutEffect(()=>{var x;const c=(x=D==null?void 0:D.current)==null?void 0:x.querySelector(`[data-label="${F}"]`);if(c){const{width:B}=c.getBoundingClientRect()||{width:0};if(!T.current)return;T.current.style.width===""?(H.transition=T.current.style.transition,T.current.style.transition="all 0s"):T.current.style.transition=H.transition,T.current.style.width=`${B}px`,T.current.style.transform=`translate(${c.offsetLeft-5}px, -50%)`}});const ee=(c,x)=>{var V;if(c.preventDefault(),c.type==="keypress"&&c.code!=="Space"||c.type==="keypress"&&c.code!=="Enter")return;const B=c.currentTarget;if(!c.type==="keypress"||!c.type==="click")return;const W=(V=D==null?void 0:D.current)==null?void 0:V.querySelector(`.tabs ${t}.active`);B!==W&&(W==null||W.classList.remove("active"),w(o[x].label),u(o[x].label))},P=(c,x)=>!!(c[x]&&(_&&F===c.label&&_.includes(x)||b&&b.includes(x)||!b&&!_));return n.jsx("div",{className:C(L.wrapper),children:n.jsxs("div",{ref:D,className:`${C(L.tabs)} tabs`,children:[n.jsx("div",{ref:T,className:`selector ${C(L.selector)}`}),o==null?void 0:o.map((c,x)=>n.jsxs(N,R(i(i({className:`${C(L.tab_link)} ${F===c.label?" active":""}`,onClick:B=>ee(B,x),onKeyDown:B=>ee(B,x),"data-label":c.label,"data-testid":`${c.label}-tab`},t==="button"&&{type:"button"}),t==="a"&&{href:`#${c.label}`}),{href:`#${c.label}`,type:"button",children:[P(c,"icn")&&n.jsx("span",{className:`icn ${F===c.label?C(L.segment_img):""}`,children:c.icn}),P(c,"label")&&K(c.label)]}),`segment-option-${x*10}`))]})})}const dr=Ke(()=>qe(()=>import("./bf-485-83.js").then(r=>r.p),["./bf-485-83.js","./main-677.js","./main-677.css","./bf-489-107.js","./bf-610-73.js","./bf-496-416.css","./bf-417-108.js","./bf-493-110.js","./bf-99-111.js","./bf-149-112.js","./bf-311-113.js","./bf-5-418.css","./bf-769-109.js","./bf-108-114.js","./bf-937-115.js","./bf-713-125.js","./bf-134-124.js","./bf-419-81.js","./bf-873-116.js","./bf-372-117.js","./bf-367-71.js"],import.meta.url),{fallback:n.jsx(As,{})}),mr=Ke(()=>qe(()=>import("./bf-44-84.js"),["./bf-44-84.js","./main-677.js","./main-677.css","./bf-419-81.js","./bf-41-74.js","./bf-647-118.js","./bf-648-122.js","./bf-812-420.css","./bf-610-73.js","./bf-496-416.css","./bf-434-119.js","./bf-207-123.js","./bf-134-124.js","./bf-713-125.js","./bf-288-77.js","./bf-183-126.js","./bf-743-127.js","./bf-818-129.js","./bf-720-421.css","./bf-878-130.js","./bf-554-131.js","./bf-32-121.js","./bf-747-419.css"],import.meta.url),{fallback:n.jsx($t,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})}),fr=Ke(()=>qe(()=>import("./bf-536-85.js").then(r=>r.a),["./bf-536-85.js","./main-677.js","./main-677.css","./bf-501-79.js","./bf-833-143.js","./bf-873-116.js","./bf-367-71.js"],import.meta.url),{fallback:n.jsx($t,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})}),ur=Ke(()=>qe(()=>import("./bf-706-86.js").then(r=>r.aQ),["./bf-706-86.js","./main-677.js","./main-677.css","./bf-352-145.js","./bf-311-113.js","./bf-610-73.js","./bf-496-416.css","./bf-434-119.js","./bf-207-123.js","./bf-134-124.js","./bf-713-125.js","./bf-288-77.js","./bf-183-126.js","./bf-743-127.js","./bf-818-129.js","./bf-720-421.css","./bf-878-130.js","./bf-554-131.js","./bf-149-112.js","./bf-747-419.css"],import.meta.url),{fallback:n.jsx($t,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})});function br(){let r=!0;const o=Vt(),{formType:l,formID:t}=$e(),u=h(Ut),d=h(Us),b=h(Rt),_=h(Ot),[$,C]=S.useState(!0),[q,p]=S.useState([]),[v,L]=S.useState(!0),T=I(He),[H,D]=k(_t),{formName:F}=H,[w,N]=S.useState({show:!1,title:"",msg:"",action:()=>Ne(),btnTxt:""}),ee=h(zt),P=h(Ht),c=h(Wt),x=h(qt),[B,W]=k(Kt),V=h(Gt),Je=h(Mt),J=h(Ms),ke=h(zs),Q=h(Jt),de=h(Qt),Y=h(Yt),me=h(Ge),A=h(Hs),Qe=h(He),Ye=I(Pt),{css:M}=ce(),[G,je]=k(Zt),Xe=h(Tt),[Ze,et]=k(Ws),[tt,fe]=k(Xt),[st,rt]=k(We),[nt,ot]=k(ts),[at,Ce]=k(Et),[lt,Le]=k(es),it=Es().map(e=>At(e)),De=()=>{const a=Ks().pathname.split("/");return a[2].charAt(0).toUpperCase()+a[2].slice(1)},ct=()=>{const{name:e,fields:a,layouts:y,confirmations:O,conditions:m,allThemeColors:E,allThemeVars:j,allStyles:U,additionalSettings:oe}=tr(l,Ye);D({formName:e}),b(a),J(y),V(O),c(m),Q(E),de(j),Y(U),me({allThemeColors:E,allThemeVars:j,allStyles:U}),A(!0),Te({state:{fields:a,layouts:y,allThemeColors:E,allThemeVars:j,allStyles:U}},!1,0),L(!1),oe&&x(oe)},ne=()=>{if(window.scrollTo(0,0),qs(),d(t),l!=="edit"){ct();return}Fe()},Ie=()=>{Gs(),C(!1),Js(),it.forEach(e=>e())};S.useEffect(()=>(ne(),()=>{r=!1,Ie()}),[]);const dt=()=>{var Be,Ve,Ae,Ee,Re,Pe,Oe,ue,be,ae,se,pe,le,Ue,f,X,he,ye,ge,ve,Se,we,s,re,kt,jt;let e=0;const a=(Be=g(`btcd-breakpoint-bf-${t}`))!=null?Be:e+=1,y={lgLightThemeVars:(Ve=g(`btcd-themeVarsLgLight-bf-${t}`,{strType:"json"}))!=null?Ve:e+=1,mdLightThemeVars:(Ae=g(`btcd-themeVarsMdLight-bf-${t}`,{strType:"json"}))!=null?Ae:e+=1,smLightThemeVars:(Ee=g(`btcd-themeVarsSmLight-bf-${t}`,{strType:"json"}))!=null?Ee:e+=1,lgDarkThemeVars:(Re=g(`btcd-themeVarsLgDark-bf-${t}`,{strType:"json"}))!=null?Re:e+=1,mdDarkThemeVars:(Pe=g(`btcd-themeVarsMdDark-bf-${t}`,{strType:"json"}))!=null?Pe:e+=1,smDarkThemeVars:(Oe=g(`btcd-themeVarsSmDark-bf-${t}`,{strType:"json"}))!=null?Oe:e+=1},O={lightThemeColors:(ue=g(`btcd-lightThemeColors-bf-${t}`,{strType:"json"}))!=null?ue:e+=1,darkThemeColors:(be=g(`btcd-darkThemeColors-bf-${t}`,{strType:"json"}))!=null?be:e+=1},m={lgLightStyles:(ae=g(`btcd-stylesLgLight-bf-${t}`,{strType:"json"}))!=null?ae:e+=1,mdLightStyles:(se=g(`btcd-stylesMdLight-bf-${t}`,{strType:"json"}))!=null?se:e+=1,smLightStyles:(pe=g(`btcd-stylesSmLight-bf-${t}`,{strType:"json"}))!=null?pe:e+=1,lgDarkStyles:(le=g(`btcd-stylesLgDark-bf-${t}`,{strType:"json"}))!=null?le:e+=1,mdDarkStyles:(Ue=g(`btcd-stylesMdDark-bf-${t}`,{strType:"json"}))!=null?Ue:e+=1,smDarkStyles:(f=g(`btcd-stylesSmDark-bf-${t}`,{strType:"json"}))!=null?f:e+=1},E=(X=g(`btcd-layouts-bf-${t}`,{strType:"json"}))!=null?X:e+=1,j=(he=g(`btcd-nested-layouts-bf-${t}`,{strType:"json"}))!=null?he:e+=1,U=(ye=g(`btcd-fields-bf-${t}`,{strType:"json"}))!=null?ye:e+=1,oe=(ge=g(`btcd-breakpointSize-bf-${t}`,{strType:"json"}))!=null?ge:lt,ut=(ve=g(`btcd-staticStyles-bf-${t}`,{strType:"json"}))!=null?ve:G,bt=(Se=g(`btcd-builderHelperStates-bf-${t}`,{strType:"json"}))!=null?Se:Ze,pt=(we=g(`btcd-builderSettings-bf-${t}`,{strType:"json"}))!=null?we:tt,ht=(s=g(`btcd-colorScheme-bf-${t}`))!=null?s:st,yt=(re=g(`btcd-customCodes-bf-${t}`,{strType:"json"}))!=null?re:nt,gt=(kt=g(`btcd-deletedFldKey-bf-${t}`,{strType:"json"}))!=null?kt:at,vt=(jt=g(`btcd-formInfo-bf-${t}`,{strType:"json"}))!=null?jt:H;return e===0?(J(E),ke(j),b(U),Te({state:{layouts:E,fields:U}},!1,0),Xe(a),de(y),Q(O),Y(m),je(ut),me({allThemeVars:y,allThemeColors:O,allStyles:m}),et(bt),fe(pt),rt(ht),ot(yt),Ce(gt),D(vt),Qe({unsaved:!0}),Le(oe),A(!0),!0):!1},Fe=()=>{l==="edit"&&ze({id:t},"bitforms_get_a_form").then(e=>{var a,y,O;if(e!=null&&e.success&&r){const m=e.data,E=(a=m==null?void 0:m.reports)==null?void 0:a.find(U=>U.isDefault.toString()==="1"),j=dt();j||(J(m.form_content.layout),Te({state:{layouts:m.form_content.layout}},!1,0)),j||(ke(m.form_content.nestedLayout||{}),Te({state:{nestedLayouts:m.form_content.nestedLayout||{}}},!1,0)),j||(b(m.form_content.fields),Te({state:{fields:m.form_content.fields}},!1,0)),j||D(U=>i(i({},U),m.form_content.formInfo)),c(m.workFlows),x(m.additional),W(m.formSettings.integrations),V(m.formSettings.confirmation),ee(m.formSettings.mailTem),P(m.formSettings.pdfTem),!j&&m.builderSettings&&fe(m.builderSettings),Je({id:((y=m==null?void 0:m.form_content)==null?void 0:y.report_id)||(E==null?void 0:E.id),isDefault:((O=m==null?void 0:m.form_content)==null?void 0:O.report_id)===null}),_(m.Labels),u(m.reports||[]),L(!1)}else!e.success&&e.data==="Token expired"&&window.location.reload(),L(!1)}).catch(()=>{L(!1)})},Ne=()=>{w.show=!1,N(i({},w))},te=e=>{e.preventDefault(),N({show:!0,title:"Warning",msg:"Are you sure you want to leave the form? Unsaved data will be lost.",btnTxt:"Okay",action:()=>o("/",{replace:!0})})},mt=[{label:"Builder"},{label:"Responses"},{label:"Settings"}],ft=e=>{e==="Builder"&&o(`/form/builder/${l}/${t}/fields-list`),e==="Responses"&&o(`/form/responses/${l}/${t}/`),e==="Settings"&&o(`/form/settings/${l}/${t}/form-settings`)};return n.jsxs("div",{className:`btcd-builder-wrp ${$&&"btcd-ful-scn"}`,children:[n.jsx(Rs,{title:w.title,action:w.action,show:w.show,body:w.msg,btnTxt:w.btnTxt,cancelBtn:w.cancelBtn,close:Ne}),n.jsxs("nav",{className:M(z.btct_bld_nav),children:[n.jsxs("div",{className:M(z.btcd_bld_title),children:[n.jsx(Nt,{className:M(z.nav_back_icn),to:"/",onClick:T.unsaved?te:null,children:n.jsx("span",{className:"g-c",children:n.jsx(Zs,{size:"22",className:"mr-2",stroke:"3"})})}),n.jsx("div",{className:M(z.bit_icn),children:n.jsx("img",{width:"16",src:Ps,alt:"BitForm logo"})}),n.jsx("input",{className:M(z.btcd_bld_title_inp),onChange:({target:{value:e}})=>{D(a=>R(i({},a),{formName:e})),Qe(a=>R(i({},a),{unsaved:!0}))},value:F,"data-testid":"form-name"})]}),n.jsx("div",{className:M(z.btcd_bld_lnk),children:n.jsx(cr,{defaultActive:De(),options:mt,size:"90",component:"button",onChange:ft,variant:"blue"})}),n.jsxs("div",{className:M(z.btcd_bld_btn),children:[n.jsx(nr,{}),l==="edit"&&n.jsx(lr,{}),n.jsx(ir,{componentMounted:r,modal:w,setModal:N}),n.jsx(Nt,{to:"/",className:M(z.cls_btn),onClick:T.unsaved?te:null,children:n.jsx(Os,{size:"14"})})]})]}),n.jsxs("div",{className:M(z.builder_routes),children:[n.jsx(Me,{page:"responses",formType:!0,formID:!0,render:n.jsx(mr,{isLoading:v,allResp:q,setAllResp:p,integrations:B})}),n.jsx(Me,{page:"builder",formType:!0,formID:!0,render:n.jsx(dr,{isLoading:v})}),n.jsx(Me,{page:"settings",formType:!0,formID:!0,render:n.jsx(fr,{})}),n.jsx(Me,{page:"report-view",formType:!0,formID:!0,render:n.jsx(ur,{})})]})]})}var pr=S.memo(br),xr=Object.freeze({__proto__:null,default:pr});export{vr as $,Zs as B,Bt as C,ar as D,xr as F,Sr as a,wr as b,Ge as c,sr as d};
