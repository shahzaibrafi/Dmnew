var jt=Object.defineProperty,yt=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var qe=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Ye=(t,a,f)=>a in t?jt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):t[a]=f,G=(t,a)=>{for(var f in a||(a={}))Nt.call(a,f)&&Ye(t,f,a[f]);if(qe)for(var f of qe(a))_t.call(a,f)&&Ye(t,f,a[f]);return t},ke=(t,a)=>yt(t,gt(a));import{u as P,r,a as le,j as e,M as je,b as ae,L as ye,_ as i,o as ie,bb as vt,$ as ne,c as V,p as St,b$ as Dt,d as we,n as tt,c0 as Y,c1 as ge,y as Ee,bo as st,t as Te,x as Ct,ab as Me,af as Ne,aD as at,C as It,aM as kt,an as wt,S as nt,B as pe,w as be,c2 as $e,A as $t,c3 as Ft,c4 as it,c5 as Fe,c6 as lt,aL as rt,ai as ct,c7 as Lt,U as Et,W as Tt,v as Mt,l as zt,c8 as Qe,a4 as At,aO as Ot,ad as Ht,aj as Pt,ah as Rt}from"./main-677.js";import{S as Bt}from"./bf-419-81.js";import{T as Jt,a as Ut,b as fe,c as xe}from"./bf-41-74.js";import{T as Kt}from"./bf-647-118.js";import{T as oe,h as Ze}from"./bf-610-73.js";import{C as Xt,d as Wt,F as Gt}from"./bf-434-119.js";/* empty css          */import{D as Vt}from"./bf-8-69.js";import{B as qt}from"./bf-32-121.js";import"./bf-648-122.js";import"./bf-207-123.js";import"./bf-134-124.js";import"./bf-713-125.js";import"./bf-288-77.js";import"./bf-183-126.js";import"./bf-743-127.js";/* empty css          */import"./bf-818-129.js";import"./bf-878-130.js";import"./bf-554-131.js";function Yt(t){const{formID:a,entryID:f,setAllResp:N,setSnackbar:o}=t,g=P(ne),[p,C]=r.useState(!1),[_,w]=r.useState(!1),[l,y]=r.useState(!0),[v,I]=r.useState(null),x=r.useRef(null),{css:$}=le();r.useEffect(()=>{C(!0)},[f,a]);const S=B=>{B.preventDefault(),w(!0);const u=x.current.contentWindow,n=u.document,m=n==null?void 0:n.querySelector("form"),c=m.id.slice(m.id.indexOf("-")+1);let k=new FormData(m);console.log("advancedFileHandle= ",typeof u.advancedFileHandle);const J={formID:a,entryID:t.entryID},z=[],H=u.bf_globals[c];typeof u.advancedFileHandle!="undefined"&&(k=u.advancedFileHandle(H,k)),typeof u.decisionFldHandle!="undefined"&&(k=u.decisionFldHandle(H,k)),Object.entries((H==null?void 0:H.fields)||{}).forEach(A=>{var h,O;(O=(h=A[1])==null?void 0:h.valid)!=null&&O.hide&&z.push(A[0])}),z.length&&k.append("hidden_fields",z),V(k,"bitforms_update_form_entry",void 0,J).then(A=>{if(A!==void 0&&A.success){if(A.data.cron||A.data.cronNotOk){const h=A.data.cron||A.data.cronNotOk;if(typeof h=="string"){const O=new URL(h);O.protocol!==window.location.protocol&&(O.protocol=window.location.protocol),fetch(O)}else{const O=new URL(g.ajaxURL);O.searchParams.append("action","bitforms_trigger_workflow");const U={cronNotOk:h,id:`bitforms_${a}`};fetch(O,{method:"POST",body:JSON.stringify(U),headers:{"Content-Type":"application/json"}}).then(q=>q.json())}}o({show:!0,msg:A.data.message}),N(h=>St(h,O=>{const U=O.findIndex(q=>q.entry_id===t.entryID);O[U]=G(G({},O[U]),A.data.updatedData)})),t.close(!1)}else A.data&&I(A.data)}).finally(()=>w(!1))},T=document.querySelector(".btcd-modal-wrp"),M=T!=null&&T.offsetHeight?T.offsetHeight-150:0;return e.jsxs(je,{hdrActn:e.jsxs("button",{onClick:S,disabled:_,type:"button",className:`${$(ae.btn,ae.blueGrd)} btn-md blue btcd-mdl-hdr-btn`,children:["Update",_&&e.jsx(ye,{size:20,clr:"#fff",className:"ml-2"})]}),lg:!0,show:p,setModal:t.close,title:i("Edit"),children:[l&&e.jsx(ie,{className:$({ta:"center"})}),e.jsx(vt,{autoHide:!0,autoHeight:!0,autoHeightMin:M,autoHeightMax:M,children:e.jsx("iframe",{ref:x,title:"Form Entry Edit",src:`${window.location.origin}/bitform-form-entry-edit/${a}/${f}`,className:$(et.iframe,et.body),onLoad:()=>y(!1)})})]})}const et={iframe:{width:"100%",height:"80vh"},body:{"> body":{height:"80vh"},"> html":{height:"80vh"}}};var de=""+new URL("bf-892-2.svg",import.meta.url).href;function Qt({formID:t,entryID:a,allLabels:f,showForm:N,setShowForm:o,setFetchData:g,data:p,setData:C}){const _=!!p.noteID,{css:w}=le(),[l,y]=r.useState(!1),[v,I]=r.useState(p.title),[x,$]=r.useState(p.content),S=P(Dt),T=n=>{I(n)},M=n=>{$(n)},B=n=>{if(n.preventDefault(),!!x)if(y(!0),_){const m={noteID:p.noteID,formID:t,entryID:a,title:v,content:x};V({},"bitforms_form_entry_update_note","multipart/form-data",m).then(c=>{c!==void 0&&c.success&&(we.success(i("Note Updated Successfully")),u(),g(!0)),y(!1)})}else V({},"bitforms_form_entry_create_note","multipart/form-data",{formID:t,entryID:a,title:v,content:x}).then(c=>{c!==void 0&&c.success&&(we.success(i("Note Added Successfully")),u(),g(!0)),y(!1)})},u=()=>{o(!1),C({title:"",content:""})};return e.jsxs("div",{className:"mt-2 w-7",children:[e.jsxs("b",{children:[_?i("Edit Note "):i("Create New Note "),e.jsx("button",{type:"button",className:w(ae.btn),onClick:()=>_?u():o(!1),style:{fontSize:16},children:"x"})]}),e.jsx("br",{}),e.jsxs("form",{method:"POST",onSubmit:B,onKeyDown:n=>{n.key==="Enter"&&n.target.tagName!=="TEXTAREA"&&n.preventDefault()},children:[e.jsx("input",{type:"text",name:"title",className:"btcd-paper-inp mt-2",placeholder:"Note Title",value:v,onChange:n=>T(n.target.value)}),e.jsx(Kt,{id:"body-content",value:x,onChangeHandler:M,formFields:S}),_&&e.jsx("button",{type:"button",className:`${w(ae.btn)} btn-md mr-2`,onClick:u,children:i("Cancel")}),e.jsxs("button",{type:"submit",className:`${w(ae.btn)} btn-md blue`,disabled:l,children:[_?i("Edit"):i("Add")," ",i("Note"),l&&e.jsx(ye,{size:20,clr:"#fff",className:"ml-2"})]})]})]})}function Zt({formID:t,entryID:a,allLabels:f,rowDtl:N}){const o=P(ne),{isPro:g}=o,{css:p}=le(),C=`${o.dateFormat} ${o.timeFormat}`,[_,w]=r.useState(!1),[l,y]=r.useState({show:!1}),[v,I]=r.useState(!1),[x,$]=r.useState([]),[S,T]=r.useState(!1),[M,B]=r.useState(!1),[u,n]=r.useState({title:"",content:""});r.useEffect(()=>{g&&w("allNotes"),T(!0)},[]),r.useEffect(()=>{if(g&&w("allNotes"),M){B(!1);return}g&&V({formID:t,entryID:a},"bitforms_form_entry_get_notes").then(h=>{h!==void 0&&h.success&&$(h.data),w(!1)})},[M,a]),r.useEffect(()=>{u.content&&I(!0)},[u]);const m=h=>{I(!1);const O=x.find(ee=>ee.id===h),{title:U,content:q}=JSON.parse(O.info_details);n({noteID:h,title:U,content:q}),I(!0)},c=h=>{l.noteID=h,l.show=!0,y(G({},l))},k=()=>{l.show=!1,y(G({},l))},J=()=>{w("delete"),k(),V({noteID:l.noteID,formID:t,entryID:a},"bitforms_form_entry_delete_note").then(h=>{h!==void 0&&h.success&&(we.success(i("Note Deleted Successfully")),B(!0)),w(!1)})},z=h=>{var re,X;const O=/\${\w[^ ${}]*}/g,U=((re=h==null?void 0:h.match)==null?void 0:re.call(h,O))||"",q=((X=U==null?void 0:U.filter)==null?void 0:X.call(U,(b,te)=>U.indexOf(b)===te))||[];let ee=h;for(let b=0;b<q.length;b+=1){const te=q[b].slice(2,-1);ee=ee.replace(new RegExp(`\\${q[b]}`,"gi"),te in N?N[te]:"[Field Deleted]")}return ee},H=h=>{const O=JSON.parse(h.info_details),U=_==="delete"&&l.noteID===h.id;return e.jsxs("div",{children:[e.jsxs("div",{children:[h.updated_at?e.jsxs("small",{children:[i("updated on:"),` ${Y(h.updated_at,C)}`]}):e.jsxs("small",{children:[i("created at:"),` ${Y(h.created_at,C)}`]}),e.jsx("button",{type:"button",className:"icn-btn ml-1 tooltip pos-rel",style:{"--tooltip-txt":`'${i("Edit")}'`,fontSize:16},onClick:()=>m(h.id),children:e.jsx(ge,{size:"15"})}),e.jsxs("button",{type:"button",onClick:()=>c(h.id),className:`${U?p(ae.btn):"icn-btn"} ml-1 tooltip pos-rel`,style:{"--tooltip-txt":`'${i("Delete")}'`,fontSize:16},disabled:U,children:[e.jsx(Ee,{size:"15"}),U&&e.jsx(ye,{size:20,clr:"#000",className:"ml-2"})]})]}),e.jsxs("div",{children:[O.title&&e.jsx("h3",{children:O.title}),e.jsx("div",{children:e.jsx(st,{html:z(O.content)})})]}),e.jsx("hr",{className:"btcd-hr"})]},h.id)},A=()=>x.length?x.map(h=>H(h)):S&&e.jsx("img",{src:de,alt:"no data found",style:{height:150,width:"100%"}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pos-rel",children:[!g&&e.jsx("div",{className:"pro-blur mt-4 flx",children:e.jsxs("div",{className:"pro",children:[i("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",i("Premium")]})})]})}),v?e.jsx(Qt,{formID:t,entryID:a,allLabels:f,showForm:v,setShowForm:I,setFetchData:B,data:u,setData:n}):e.jsx("button",{type:"button",className:p(ae.btn),onClick:()=>I(!0),children:i("create new note")}),_==="allNotes"?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):A()]}),e.jsxs(tt,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"red",btnTxt:"Ok",show:l.show,close:k,action:J,title:i("Confirmation"),children:[e.jsx("div",{className:"txt-center mt-5 mb-4",children:i("Are you sure to delete this note")}),_&&e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}})]})]})}const es=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):t!=null&&t.create_time?t:{};function ts({paymentInfo:t,payInfoFound:a}){var _,w,l,y;const f=P(ne),N=`${f.dateFormat} ${f.timeFormat}`,o=es(t),g="subscriber"in o,p=g?o.subscriber:o.payer,C=g?(w=(_=o==null?void 0:o.billing_info)==null?void 0:_.last_payment)==null?void 0:w.amount:(y=(l=o==null?void 0:o.purchase_units)==null?void 0:l[0])==null?void 0:y.amount;return e.jsx("div",{children:a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("PayPal")}),e.jsxs("div",{children:[e.jsx("small",{children:Y(o.create_time,N)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Type")}: ${g?i("Subscription"):i("Order")}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${o.id}`})}),e.jsx("h3",{children:`${p.name.given_name} ${p.name.surname}`}),e.jsx("small",{children:p.email_address}),g&&e.jsx("h4",{children:`${i("Plan ID")}: ${o.plan_id}`}),g&&e.jsxs("small",{children:[i("Next Billing Time"),":"," ",Y(o.billing_info.next_billing_time,N)]}),e.jsxs("p",{children:[i("Total Paid"),":"," ",C.value," ",C.currency_code]})]},o.id)]}):e.jsx("img",{src:de,alt:i("no data found"),style:{height:150,width:"100%"}})})}const ss=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):t!=null&&t.created_at?t:{};function as({paymentInfo:t,payInfoFound:a,fldKey:f,transactionID:N}){const o=P(ne),{formID:g}=Te(),p=P(Ct),_=P(Me)[f],{payIntegID:w}=_.options,l=p.find(M=>M.id===w),y=`${o.dateFormat} ${o.timeFormat}`,[v,I]=r.useState(t),[x,$]=r.useState(!1),S=ss(v),T=S.created_at*1e3;return r.useEffect(()=>{a.current===2&&($(!0),V({formID:g,transactionID:N,razorpaySettings:l},"bitforms_razorpay_transaction_info").then(M=>{M.success&&(I(M.data),a.current=1)}).finally(()=>{$(!1)}))},[]),e.jsxs("div",{children:[x&&e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}),a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("Razorpay")}),e.jsxs("div",{children:[e.jsx("small",{children:Y(T,y)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Status")}: ${S.status}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${S.id}`})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Email")}: ${S.email}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Contact")}: ${S.contact}`}),e.jsx("br",{}),e.jsxs("p",{children:[i("Total Paid"),":"," ",S.amount/100," ",S.currency]})]})]}):!x&&e.jsx("img",{src:de,alt:i("no data found"),style:{height:150,width:"100%"}})]})}const ns=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):{};function is({paymentInfo:t,payInfoFound:a}){const f=P(ne),N=`${f.dateFormat} ${f.timeFormat}`,o=ns(t);return e.jsx("div",{children:a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("Stripe")}),e.jsxs("div",{children:[e.jsx("small",{children:Y(o.created*1e3,N)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${o.id}`})}),e.jsxs("p",{children:[i("Total Paid"),":"," ",o.amount/100," ",o.currency]})]},o.id)]}):e.jsx("img",{src:de,alt:i("no data found"),style:{height:150,width:"100%"}})})}function ls({formID:t,rowDtl:a}){const f=P(Ne),N=P(ne),{isPro:o}=N,[g,p]=r.useState({}),[C,_]=r.useState(!1),l=f.filter(I=>at.includes(I.type)).find(I=>a[I.key])||{},y=r.useRef(0);r.useEffect(()=>{var I;if(o){_(!0);const x=a==null?void 0:a[l==null?void 0:l.key],$=(I=x==null?void 0:x.split(","))==null?void 0:I[0];V({formID:t,transactionID:$},"bitforms_payment_details").then(S=>{S.success&&S.data.length?(p(S.data[0]),y.current=1):y.current=2}).finally(()=>{_(!1)})}return()=>p({})},[]);const v=()=>{switch(l==null?void 0:l.type){case"paypal":return e.jsx(ts,{paymentInfo:g,payInfoFound:y});case"razorpay":return e.jsx(as,{paymentInfo:g,payInfoFound:y,fldKey:l==null?void 0:l.key,transactionID:a==null?void 0:a[l==null?void 0:l.key]});case"stripe":return e.jsx(is,{paymentInfo:g,payInfoFound:y,fldKey:l==null?void 0:l.key,transactionID:a==null?void 0:a[l==null?void 0:l.key]});default:return e.jsx("h1",{children:i("No Payment Info Found!")})}};return e.jsxs("div",{className:"pos-rel",children:[!o&&e.jsx("div",{className:"pro-blur mt-4 flx",children:e.jsxs("div",{className:"pro",children:[i("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",i("Premium")]})})]})}),C?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):v()]})}function rs({formID:t,entryID:a,integrations:f}){const N=P(ne),o=P(Ne),g=`${N.dateFormat} ${N.timeFormat}`,[p,C]=r.useState([]),[_,w]=r.useState([]),[l,y]=r.useState([]),[v,I]=r.useState(!1);r.useEffect(()=>(I(!0),V({formID:t,entryID:a},"bitforms_form_log_history").then(n=>{n!==void 0&&n.success&&(C(n.data),w(n.integrations)),I(!1)}),()=>C([])),[a]);const x=n=>{var A;const m=/\${\w[^ ${}]*}/g,c=/[\]["]/g,k=((A=n.match(m))==null?void 0:A[0])||"",J=k?o.find(h=>`\${${h.key}}`===k):"",z=J?J.adminLbl:"",H=z?n.replace(m,z):"";return H?H.replace(c,""):"Field Deleted"},$=(n,m)=>(n==null?void 0:n.length)>m?`${n.substr(0,m-1)}&hellip;`:n,S=n=>{l.push(n),y([...l])},T=n=>{const m=[...l];m.splice(m.indexOf(n),1),y([...m])},M=n=>{var J;const m=l.find(z=>z===n.id),c={};_.map(z=>{var A;let H=(A=f.find(h=>h.id===z.integration_id))==null?void 0:A.name;if(H)c[H]||(c[H]=[]),n.id===z.log_id&&c[H].push(z);else if(Number(z.integration_id)&&n.id===z.log_id){const h=JSON.parse(z.api_type);H=`${h.type_name} ${h.type}`,H==="ReCaptcha v3"&&(c[H]=[z])}});const k=()=>n.content===null&&n.action_type==="update"?e.jsx("p",{children:i("No field data change")}):n.content===null&&n.action_type==="create"?e.jsx("p",{children:i("Form Submitted")}):n.content.split("b::f").map(z=>e.jsxs("p",{children:[" ",e.jsx(ge,{size:"15"}),x(z)]},z));return e.jsxs("div",{children:[k(),!!((J=Object.keys(c))!=null&&J.length)&&e.jsxs(e.Fragment,{children:[!m&&n.integration&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>S(n.id),onKeyDown:()=>S(n.id),children:i("Show Integration Logs")}),m&&n.integration&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>T(n.id),onKeyDown:()=>T(n.id),children:i("Hide Integration Logs")}),m&&n.integration&&B(c)]})]})},B=n=>Object.keys(n).map(m=>e.jsxs("div",{children:[e.jsx("h5",{children:`${m} - `}),e.jsx("div",{className:"m-0 ml-6",children:n[m].map(c=>{const k=JSON.parse(c.api_type);return e.jsxs("div",{className:"flx",children:[e.jsx("p",{className:"mr-2",children:`${k.type_name} ${k.type} ${c.response_type}`}),e.jsx(It,{value:c.response_obj,className:"field-key-cpy w-0 ml-0",readOnly:!0})]})})})]})),u=n=>{const m=l.find(k=>k===n.id),c=JSON.parse(n.content);if(n.content!==null)return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[i("Note")," ",n.action_type==="create"&&i("Added"),n.action_type==="update"&&i("Updated"),n.action_type==="delete"&&i("Deleted"),":"]}),c.title&&e.jsx("h4",{children:c.title}),e.jsx("div",{children:e.jsx(st,{html:m?c.content||"":$(c.content||"",20)})}),!m&&(c.content||"").length>20&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>S(n.id),onKeyDown:()=>S(n.id),children:i("Read More")}),m&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>T(n.id),onKeyDown:()=>T(n.id),children:i("Show Less")})]});if(n.content===null&&n.action_type==="update")return e.jsx("p",{children:i("Note no change")})};return e.jsx(e.Fragment,{children:v?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):p.map(n=>e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("span",{children:Y(n.created_at,g)}),e.jsx("div",{children:n.log_type==="entry"?M(n):u(n)})]},n.id))})}var cs=r.memo(rs);function os({rowDtl:t}){var g,p,C,_,w,l,y,v,I,x,$,S,T,M,B,u;const[a,f]=r.useState([]),[N,o]=r.useState(!1);return r.useEffect(()=>{o(!0),V({gclid:t==null?void 0:t.GCLID},"bitforms_get_gclid_info").then(n=>{n!==void 0&&n.success&&n.data[0]&&f(JSON.parse(n.data[0].gclid_response)),o(!1)})},[]),e.jsx(e.Fragment,{children:N?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsx("div",{children:e.jsx("table",{className:"btcd-row-detail-tbl",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Account"}),e.jsx("td",{className:"td",children:(g=a["@attributes"])==null?void 0:g.account})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Campaign ID"}),e.jsx("td",{className:"td",children:(p=a["@attributes"])==null?void 0:p.campaignID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"AdGroup Id"}),e.jsx("td",{className:"td",children:(C=a["@attributes"])==null?void 0:C.adGroupID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Id"}),e.jsx("td",{className:"td",children:(_=a["@attributes"])==null?void 0:_.adID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Keyword Id"}),e.jsx("td",{className:"td",children:(w=a["@attributes"])==null?void 0:w.keywordID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Keyword"}),e.jsx("td",{className:"td",children:(l=a["@attributes"])==null?void 0:l.CriteriaParameters})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Match type"}),e.jsx("td",{className:"td",children:(y=a["@attributes"])==null?void 0:y.KeywordMatchType})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Click type"}),e.jsx("td",{className:"td",children:(v=a["@attributes"])==null?void 0:v.clickType})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Device Type"}),e.jsx("td",{className:"td",children:(I=a["@attributes"])==null?void 0:I.device})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Search Partner Network"}),e.jsx("td",{className:"td",children:(x=a["@attributes"])==null?void 0:x.networkWithSearchPartners})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Campaign Name"}),e.jsx("td",{className:"td",children:($=a["@attributes"])==null?void 0:$.campaign})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad group Name"}),e.jsx("td",{className:"td",children:(S=a["@attributes"])==null?void 0:S.adGroup})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Network"}),e.jsx("td",{className:"td",children:(T=a["@attributes"])==null?void 0:T.network})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Click Date"}),e.jsx("td",{className:"td",children:(M=a["@attributes"])==null?void 0:M.day})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Customer ID"}),e.jsx("td",{className:"td",children:(B=a["@attributes"])==null?void 0:B.customerID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"GCLID"}),e.jsx("td",{className:"td",children:(u=a["@attributes"])==null?void 0:u.googleClickID})]})]})})})})}function ds({entryID:t,rowDtl:a,setSnackbar:f,close:N}){const o=P(kt),g=P(Ne),p=P(wt),C=g.filter(_=>at.includes(_.type));return e.jsxs(Jt,{selectedTabClassName:"s-t-l-active",children:[e.jsxs(Ut,{className:"flx m-0",children:[!!(C!=null&&C.length)&&e.jsx(fe,{className:"btcd-s-tab-link",children:i("Payment")}),e.jsx(fe,{className:"btcd-s-tab-link",children:i("Timeline")}),e.jsx(fe,{className:"btcd-s-tab-link",children:i("Notes")}),!!(a!=null&&a.GCLID)&&e.jsx(fe,{className:"btcd-s-tab-link",children:i("Google Ads Information")})]}),!!(C!=null&&C.length)&&e.jsx(xe,{children:e.jsx(ls,{formID:o,rowDtl:a})}),e.jsx(xe,{children:e.jsx(cs,{formID:o,entryID:t,integrations:p})}),e.jsx(xe,{children:e.jsx(Zt,{formID:o,entryID:t,allLabels:g,setSnackbar:f,rowDtl:a})}),!!(a!=null&&a.GCLID)&&e.jsx(xe,{children:e.jsx(os,{rowDtl:a})})]})}var ot=r.memo(ds);function us({entryID:t,rowDtl:a,setSnackbar:f,close:N}){return e.jsx(je,{lg:!0,show:!0,setModal:N,title:i("Related Info"),children:e.jsx(ot,{entryID:t,rowDtl:a,setSnackbar:f,close:N})})}function ms({size:t}){return e.jsx("svg",{width:t,height:t,viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M42 27C42 33 38 43 24 43C10 43 6 33 6 27"}),e.jsx("path",{d:"M24.0078 5.10059V33.0001"}),e.jsx("path",{d:"M12 17L24 5L36 17"})]})})}function hs({showExportMdl:t,close:a,cols:f,formID:N,report:o}){var B,u,n,m;const[g,p]=r.useState({show:!1}),[C,_]=r.useState(!1),{css:w}=le(),[l,y]=r.useState({fileFormate:"csv",sort:"ASC",sortField:"bitforms_form_entry_id",limit:null,custom:"all",formId:N,selectedField:""});o&&((u=(B=o[o.length-1])==null?void 0:B.details)==null||u.order);const v=o?(m=(n=o[o.length-1])==null?void 0:n.details)==null?void 0:m.hiddenColumns:[],I=f.filter(c=>c.Header!=="#"&&typeof c.Header!="object"),x=[],$=[];let S=0;I.map(c=>{v!=null&&v.includes(c.accessor)||(x[S]={key:c.accessor,val:c.Header},$[S]=c.accessor,S+=1)}),l.selectedField=JSON.stringify($);const T=c=>{c.preventDefault(),_(!0),V({data:l},"bitforms_filter_export_data").then(k=>{var J;if(k!==void 0&&k.success)if(((J=k.data)==null?void 0:J.count)!==0){const z=[];z[0]="Entry ID",x.map((h,O)=>{z[O+1]=h.val});const H=XLSX.utils.json_to_sheet(k.data),A=XLSX.utils.book_new();XLSX.utils.sheet_add_aoa(H,[z]),XLSX.utils.book_append_sheet(A,H),XLSX.writeFile(A,`bitform ${N}.${l==null?void 0:l.fileFormate}`)}else p({show:!0,msg:i("no response found")});_(!1)})},M=(c,k)=>{const J=G({},l);typeof k=="number"?J[c]=Number(k):J[c]=k,y(J)};return e.jsxs("div",{children:[e.jsx(nt,{snack:g,setSnackbar:p}),e.jsx(je,{md:!0,show:t,setModal:a,title:"Export Data",style:{overflow:"auto"},children:e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("How many rows to export")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"custom",style:{width:250},onChange:c=>M(c.target.name,c.target.value),value:l.custom||"",children:[e.jsx("option",{disabled:!0,value:"0",children:"Choose option"}),e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),l.custom==="custom"&&e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Enter row number")}),e.jsx("input",{"aria-label":"Export Row Number",type:"text",style:{width:250},name:"limit",onChange:c=>M(c.target.name,c.target.value),className:"btcd-paper-inp mt-2",placeholder:"Export Row Number",value:l.limit||""})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Sort Order")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"sort",style:{width:250},value:l.sort||"ASC",onChange:c=>M(c.target.name,c.target.value),children:[e.jsx("option",{value:"ASC",children:"Ascending"}),e.jsx("option",{value:"DESC",children:"Descending"})]})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Sort by")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"sortField",value:l.sortField||"bitforms_form_entry_id",onChange:c=>M(c.target.name,c.target.value),style:{width:250},children:[e.jsx("option",{value:"bitforms_form_entry_id",children:"ID"}),x.map(c=>e.jsx("option",{value:c.key,children:c.val},c.key))]})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Export File Format")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"fileFormate",value:l.fileFormate||"csv",style:{width:250},onChange:c=>M(c.target.name,c.target.value),children:[e.jsx("option",{value:"csv",children:"CSV"}),e.jsx("option",{value:"xlsx",children:"Xlsx"}),e.jsx("option",{value:"xls",children:"Xls"}),e.jsx("option",{value:"fods",children:"Fods"}),e.jsx("option",{value:"ods",children:"Ods"}),e.jsx("option",{value:"prn",children:"Prn"}),e.jsx("option",{value:"txt",children:"Text"}),e.jsx("option",{value:"html",children:"Html"}),e.jsx("option",{value:"eth",children:"Eth"})]})]}),e.jsxs(pe,{onClick:c=>T(c),disabled:C,className:w(be.mt1),size:"sm",children:[i("Export"),C&&e.jsx(ye,{size:20,clr:"#fff",className:"ml-2"})]})]})})]})}function fs({formID:t,cols:a,report:f}){const[N,o]=r.useState(!1),{css:g}=le(),p=()=>{o(!0)};return e.jsxs("div",{children:[e.jsx(hs,{showExportMdl:N,close:o,formID:t,cols:a,report:f}),e.jsx(oe,{msg:i("Export Form Data"),children:e.jsx("button",{onClick:p,className:g($e.tableActionBtn),type:"button",children:e.jsx(ms,{size:"16"})})})]})}function Le(t){return e.jsxs("div",{className:"btcd-t-link flx mr-2 prevent-drawer",children:[e.jsx("div",{className:"tooltip",style:{"--tooltip-txt":`"${t.fname}"`,width:`${t.width?t.width:"80"}px`},children:e.jsxs("a",{href:`${t.link}`,rel:"noopener noreferrer",target:"_blank",className:"prevent-drawer",children:[e.jsx($t,{size:"30"})," ",t.fname]})}),e.jsx("a",{title:"Download",target:"_blank",href:`${t.link}&download`,download:!0,rel:"noopener noreferrer","aria-label":"Download",className:"icn-btn icn-btn-sm flx prevent-drawer",children:e.jsx(Ft,{size:"15"})})]})}function xs(t){const{formID:a}=Te(),f=P(Me),{title:N,rptData:o,entryId:g}=t,p=it(o)?JSON.parse(o):[],_=Object.keys(p[0]||[]).filter(y=>{var v;return!["divider","image","title"].includes((v=f[y])==null?void 0:v.typ)}).map(y=>{var I;const v=f[y]||{};return G({Header:v.adminLbl||v.lbl||v.fieldName||y,accessor:y,fieldType:v.typ,minWidth:50},((I=v.typ)==null?void 0:I.match(/^(file-up|check|select|image-select)$/))&&{Cell:x=>{if(x.cell.value!==null&&x.cell.value!==void 0&&x.cell.value!==""){if(v.typ==="file-up")return e.jsx(e.Fragment,{children:Fe(x.cell.value).map(($,S)=>e.jsx(Le,{fname:$,link:`${bits.baseDLURL}formID=${a}&entryID=${g}&fileID=${$}`},`file-n-${x.cell.row.index+S}`))});if(v.typ==="check"||v.typ==="select"||v.typ==="image-select")try{if(Array.isArray(x.cell.value))return x.cell.value.join(", ");const $=typeof x.cell.value=="string"&&x.cell.value.length>0&&x.cell.value[0]==="["?JSON.parse(x.cell.value):x.cell.value!==void 0&&x.cell.value.split(",");return $.map((S,T)=>T<$.length-1?`${S},`:S)}catch($){return x.cell.value}return x.cell.value}return null}})})||[],w=!1,l=p.length;return e.jsx(je,{lg:!0,show:!0,setModal:t.close,title:i(`${N} Data List`),children:e.jsx(lt,{className:"f-table btcd-entries-f",height:"76vh",columns:_,data:p,loading:w,countEntries:l,resizable:!0})})}function ps({fetchData:t}){const a=P(ct),f={startDate:"",endDate:"",key:"date"},[N,o]=r.useState(f),{css:g}=le(),p=r.useRef(!1),C=()=>{p.current=!0,_(N),Ze()},_=y=>{const{startDate:v,endDate:I}=y,x=v?Y(v,"Y-m-d"):"",$=I?Y(I,"Y-m-d"):"",S={start_date:x,end_date:$},{pageIndex:T,pageSize:M,sortBy:B,filters:u,globalFilter:n,conditions:m}=a.details;t({pageIndex:T,pageSize:M,sortBy:B,filters:u,globalFilter:n,conditions:m,entriesFilterByDate:S})},w=()=>{o(f),_(f),p.current=!1,Ze()},l=y=>y&&isFinite(y);return e.jsx("div",{className:"mr-2",children:e.jsxs(Vt,{children:[e.jsxs("div",{className:"flx",children:[p.current&&l(N.startDate)&&l(N.endDate)&&e.jsxs("div",{className:"btcd-custom-date-range white ml-2",children:[e.jsxs("span",{className:"m-a",children:[" ",`${Y(N.startDate,"Y-m-d")} - ${Y(N.endDate,"Y-m-d")}`]}),e.jsx("button",{"aria-label":"Close",type:"button",className:"icn-btn",onClick:w,children:e.jsx(rt,{size:"12"})})]}),e.jsx(oe,{msg:i("Filter Entries between Dates"),children:e.jsx("button",{"aria-label":"Fitler",className:g($e.tableActionBtn,be.ml2),style:{"--tooltip-txt":`'${i("Filter")}'`},type:"button",children:e.jsx(Xt,{size:"16"})})})]}),e.jsxs("div",{style:{minHeight:"200px !important"},className:g($e.dataRange),children:[e.jsx(Wt.DateRange,{onChange:y=>o(y.date),moveRangeOnFirstSelection:!1,retainEndDateOnFirstSelection:!0,editableDateInputs:!0,ranges:[N],maxDate:new Date,showSelectionPreview:!1,showDateDisplay:!0,startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",direction:"horizontal"}),e.jsxs("div",{className:g({flx:"",jc:"end",pt:8,pb:6}),children:[e.jsx(pe,{className:g(be.mr1),size:"sm",onClick:C,children:i("Search")}),e.jsx(pe,{variant:"primary-outline",size:"sm",onClick:w,children:i("Clear")})]})]})]})})}function bs(t){return e.jsxs("div",{className:"btcd-drawer",style:{right:t.show?0:-620,width:600},children:[e.jsxs("div",{className:"flx flx-between",children:[e.jsx("div",{className:"btcd-drawer-title",children:t.title}),e.jsxs("div",{className:"flx",children:[e.jsx("button",{onClick:t.relatedinfo,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Related Info"'},"aria-label":"icon-btn",type:"button",children:e.jsx(Lt,{size:"15"})}),e.jsx("button",{onClick:t.editData,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Edit"'},"aria-label":"icon-btn",type:"button",children:e.jsx(ge,{size:"15"})}),e.jsx("button",{onClick:t.delConfMdl,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Delete"'},"aria-label":"icon-btn",type:"button",children:e.jsx(Ee,{size:"15"})}),e.jsx("button",{onClick:()=>t.close(!1),className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Close"'},"aria-label":"modal-close",type:"button",children:e.jsx(rt,{size:"14",stroke:"3"})})]})]}),e.jsx("small",{className:"btcd-mdl-subtitle",children:t.subTitle}),e.jsx("div",{className:"btcd-mdl-div"}),t.children]})}function js(t){return e.jsx("div",{className:"btcd-t-action-wrp flx",children:e.jsxs("div",{className:"btcd-t-action",children:["dup"in t&&e.jsx(oe,{msg:"Duplicate",children:e.jsx("button",{onClick:t.dup,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(Et,{size:"15"})})}),"del"in t&&e.jsx(oe,{msg:"Delete",children:e.jsx("button",{onClick:t.del,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(Ee,{size:"15",stroke:"3"})})}),"edit"in t&&e.jsx(oe,{msg:"Edit",children:e.jsx("button",{onClick:t.edit,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(ge,{size:"15"})})}),e.jsx("button",{className:"icn-btn btcd-ph-btn","aria-label":"action btn",type:"button",children:e.jsx(qt,{size:"15"})})]})})}function ys({allResp:t,setAllResp:a,isloading:f}){var Be,Je,Ue,Ke,Xe,We;const N=P(Ne),o=P(Ot),[g,p]=r.useState({show:!1,msg:""}),[C,_]=r.useState(f),{formType:w,formID:l}=Te(),y=r.useRef(0),[v,I]=r.useState(0),[x,$]=r.useState(!1),[S,T]=r.useState(!1),[M,B]=r.useState(null),[u,n]=r.useState({show:!1,data:{}}),[m,c]=r.useState({show:!1}),[k,J]=r.useState({show:!1}),[z,H]=r.useState([]),[A,h]=r.useState([]),O=Tt(Ht),[U,q]=r.useState(0),[ee,re]=r.useState(0),X=P(ne),b=P(ct),te=P(Pt),ze=P(Rt),dt=ze.findIndex(s=>{var D;return(s==null?void 0:s.id)&&s.id.toString()===((D=te==null?void 0:te.id)==null?void 0:D.toString())}),Ae=r.useRef(0),ut=Mt(),{css:_e}=le(),mt=P(Me),Oe=["divider","shortcode","image","title","section"];r.useEffect(()=>{var R,d;const s=Object.entries(o).reduce((j,[E,L])=>{var F;return((F=mt[E])==null?void 0:F.typ)!=="repeater"||L.lg.forEach(W=>{j.push(W.i)}),j},[]),D=N.filter(j=>!s.includes(j.key));if(b){const j={};D.map(L=>{j[L.key]=L});const E=[];(d=(R=b.details)==null?void 0:R.order)==null||d.forEach(L=>{L&&L!=="sl"&&L!=="selection"&&L!=="table_ac"&&j[L]!==void 0&&E.push(j[L])}),Pe(E.length?E:D)}else D.length&&Pe(D)},[N,o]);const ce=r.useCallback(()=>{m.show=!1,c(G({},m))},[m]),ve=r.useCallback((s,D,R)=>{const d=[],j=[];if(typeof s[0]=="object")for(let F=0;F<s.length;F+=1)d[s[F].original.entry_id]=s[F].id,j.push(s[F].original.entry_id);else d[s.original.entry_id]=s.id,j.push(s.original.entry_id);const E=zt(D);V({formID:l,entries:j},"bitforms_duplicate_form_entries").then(F=>{var W,K;if(F.success&&F.data.message!=="undefined"){if(R&&R.fetchData&&R.data)R.fetchData(R.data);else{let Q;(K=Object.entries(((W=F==null?void 0:F.data)==null?void 0:W.details)||{}))==null||K.forEach(([se,me])=>{Q=JSON.parse(JSON.stringify(E[d[se]])),Q.entry_id=me,E[d[se]].entry_id=se,E.unshift(Q),E.pop()}),a(E)}p({show:!0,msg:F.data.message})}})},[]),He=r.useCallback((s,D,R)=>{m.btnTxt=i("Duplicate"),m.btnClass="blue",m.body=i("Are you sure to duplicate this entry?"),m.action=()=>{ve(s,D,R),ce()},m.show=!0,c(G({},m))},[ve,ce,m]),Se=r.useCallback(()=>{n(ke(G({},u),{show:!1}))},[u]),De=r.useCallback((s,D)=>{const R=[],d=[];if(typeof s[0]=="object")for(let E=0;E<s.length;E+=1)R.push(s[E].id),d.push(s[E].original.entry_id);else R.push(s.id),d.push(s.original.entry_id);V({formID:l,entries:d},"bitforms_bulk_delete_form_entries").then(E=>{E.success&&(D&&D.fetchData&&D.data&&D.fetchData(D.data),p({show:!0,msg:E.data.message}))})},[]),Ce=r.useCallback((s,D)=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),m.btnTxt="Delete",m.body="Are you sure to delete this entry",m.btnClass="",m.action=()=>{De(s,D),ce(),Se()},m.show=!0,c(G({},m))},[ce,Se,m,De]),Pe=(s=[])=>{const D=s==null?void 0:s.map(d=>G({Header:d.adminLbl||d.name||d.key,accessor:d.key,fieldType:d.type,minWidth:50},"type"in d&&d.type.match(/^(file-up|advanced-file-up|signature|check|select|sys|repeater|image-select)$/)&&{Cell:j=>{var E;if(j.cell.value!==null&&j.cell.value!==void 0&&j.cell.value!==""){if(d.type==="file-up"||d.type==="advanced-file-up"||d.type==="signature")return e.jsx(e.Fragment,{children:Fe(j.cell.value).map((L,F)=>e.jsx(Le,{fname:L,link:`${X.baseDLURL}formID=${l}&entryID=${j.cell.row.original.entry_id}&fileID=${L}`},`file-n-${j.cell.row.index+F}`))});if(d.type==="repeater")return e.jsx("a",{href:"",onClick:L=>{L.preventDefault(),J({show:!0,data:j.cell.value,entryId:j.cell.row.original.entry_id,title:d.adminLbl||d.name||d.key})},children:i("View Repeater Data")});if(d.type==="check"||d.type==="select"||d.type==="image-select")try{const L=typeof j.cell.value=="string"&&j.cell.value.length>0&&j.cell.value[0]==="["?JSON.parse(j.cell.value):j.cell.value!==void 0&&j.cell.value.split(",");return L.map((F,W)=>W<L.length-1?`${F},`:F)}catch(L){return j.cell.value}if(d.key==="__user_id")return(E=X==null?void 0:X.user[j.cell.value])!=null&&E.url?e.jsx("a",{href:X.user[j.cell.value].url,children:X.user[j.cell.value].name}):null;if(d.key==="__entry_status"){const L=Number(j.cell.value);return Re(L)}return d.key==="__user_ip"&&isFinite(Number(j.cell.value))?Qe(j.cell.value):j.cell.value}return null}}));D.unshift({Header:"#",accessor:"sl",Cell:d=>e.jsx(e.Fragment,{children:Number(d.state.pageIndex*d.state.pageSize)+Number(d.row.id)+1}),width:40}),D.push({id:"t_action",width:70,maxWidth:70,minWidth:70,sticky:"right",Header:e.jsx("span",{className:"ml-2",title:i("Settings"),children:e.jsx(Bt,{size:"20"})}),accessor:"table_ac",Cell:d=>e.jsx(js,{edit:()=>ue(d.row),del:()=>Ce(d.row,{fetchData:d.fetchData,data:{pageIndex:d.state.pageIndex,pageSize:d.state.pageSize,sortBy:d.state.sortBy,filters:d.state.filters,globalFilter:d.state.globalFilter}}),dup:()=>He(d.row,d.data,{fetchData:d.fetchData,data:{pageIndex:d.state.pageIndex,pageSize:d.state.pageSize,sortBy:d.state.sortBy,filters:d.state.filters,globalFilter:d.state.globalFilter}})})});const R=xt(D);H(R),h(D)},Re=s=>{if(s===0)return"Read";if(s===1)return"Unread";if(s===2)return"Unconfirmed";if(s===3)return"Confirmed";if(s===9)return"Draft"},ue=r.useCallback(s=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),B(s.original.entry_id),$(!0)},[]),ht=s=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),B(s.original.entry_id),T(!0)},Ie=r.useCallback(({pageSize:s,pageIndex:D,sortBy:R,filters:d,globalFilter:j,conditions:E,entriesFilterByDate:L})=>{if(ee){re(0),_(!0);return}const F=++y.current;if(t.length<1&&_(!0),F===y.current){const W=s*D;V({id:l,offset:W,pageSize:s,sortBy:R,filters:d,globalFilter:j,conditions:E,entriesFilterByDate:L},"bitforms_get_form_entries").then(K=>{K!=null&&K.success&&(I(Math.ceil(K.data.count/s)),q(K.data.count),a(K.data.entries)),O(Q=>At(Q,{type:"update",data:{formID:l,entries:K.data.count}})),_(!1)})}},[Ce,He,ue,l,ee]),ft=r.useCallback((s,D,R,d)=>{var E,L;const j=s.target.parentElement.children[1].textContent;if(Ae.current=j,!s.target.classList.contains("prevent-drawer")){const F=G({},u);F.show&&u.idx===R?F.show=!1:(F.data=D,F.idx=R,F.show=!0),n(G({},F));const W=D.find(K=>K.column.id==="__entry_status");if(W&&W.value==="1"){const K=(L=(E=W.row)==null?void 0:E.original)==null?void 0:L.entry_id;if(!K)return;V({formId:l,entryId:K},"bitforms_entry_status_update").then(Q=>{if(Q.success){const{fetchData:se}=d;setTimeout(()=>se(b.details),1e3)}})}}},[u]),xt=s=>s.filter(D=>!Oe.includes(D.fieldType)),pt=()=>A.filter(s=>!["sl","table_ac"].includes(s.accessor)&&!Oe.includes(s.fieldType)),bt=s=>{var D,R,d,j,E,L,F,W,K,Q,se,me,Ge,Ve;if(s.fieldType==="file-up"||s.fieldType==="advanced-file-up"||s.fieldType==="signature")return(R=Fe((D=t[u.idx])==null?void 0:D[s.accessor]))==null?void 0:R.map((Z,he)=>e.jsx(Le,{fname:Z,width:"100",link:`${X.baseDLURL}formID=${l}&entryID=${t[u.idx].entry_id}&fileID=${Z}`},`file-n-${he+1.1}`));if(s.fieldType==="repeater")return e.jsx("a",{href:"#",onClick:Z=>{var he;Z.preventDefault(),J({show:!0,data:(he=t[u.idx])==null?void 0:he[s.accessor],entryId:t[u.idx].entry_id,title:s.Header})},children:i("View Repeater Data")});if(s.fieldType==="color")return e.jsxs("div",{className:"flx",children:[t[u.idx][s.accessor],e.jsx("span",{style:{background:t[u.idx][s.accessor],height:20,width:20,borderRadius:5,display:"inline-block",marginLeft:10}})]});if(s.fieldType==="check"||s.fieldType==="select"||s.fieldType==="image-select"){const Z=it((d=t[u.idx])==null?void 0:d[s.accessor])?JSON.parse((j=t[u.idx])==null?void 0:j[s.accessor]):(L=(E=t[u.idx])==null?void 0:E[s.accessor])==null?void 0:L.replace(/\[|\]|"/g,"");return Array.isArray(Z)?Z.toString():Z}if(s.accessor==="__user_id")return(W=X==null?void 0:X.user[(F=t[u.idx])==null?void 0:F[s.accessor]])!=null&&W.url?e.jsx("a",{href:X.user[(K=t[u.idx])==null?void 0:K[s.accessor]].url,children:X.user[(Q=t[u.idx])==null?void 0:Q[s.accessor]].name}):null;if(s.accessor==="__user_ip"&&isFinite((se=t[u.idx])==null?void 0:se[s.accessor]))return Qe((me=t[u.idx])==null?void 0:me[s.accessor]);if(s.accessor==="__entry_status"){const Z=Number((Ge=t[u.idx])==null?void 0:Ge[s.accessor]);return Re(Z)}return(Ve=t==null?void 0:t[u.idx])==null?void 0:Ve[s.accessor]};return e.jsxs("div",{id:"form-res",children:[e.jsx(nt,{snack:g,setSnackbar:p}),e.jsx(tt,{show:m.show,close:ce,btnTxt:m.btnTxt,btnClass:m.btnClass,body:m.body,action:m.action}),x&&e.jsx(Yt,{close:$,formID:l,entryID:M,allResp:t,setAllResp:a,setSnackbar:p}),S&&e.jsx(us,{close:T,entryID:M,setSnackbar:p,rowDtl:t[u.idx]}),e.jsx(bs,{title:i(`Response Details #${Ae.current}`),show:u.show,close:Se,relatedinfo:()=>ht(u),delConfMdl:()=>Ce(u,u.fetchData),editData:()=>ue(u),rowDetails:u,children:e.jsxs("div",{children:[e.jsx("table",{className:"btcd-row-detail-tbl",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"txt-dp",children:[e.jsx("th",{children:i("Title")}),e.jsx("th",{children:i("Value")})]}),u.show&&pt().map((s,D)=>e.jsxs("tr",{children:[e.jsx("th",{children:s.Header}),e.jsx("td",{children:bt(s)})]},`rw-d-${D+2}`))]})}),e.jsx("hr",{}),((Ue=(Je=(Be=u.data[0])==null?void 0:Be.row)==null?void 0:Je.original)==null?void 0:Ue.entry_id)&&e.jsx("div",{className:_e({mxh:"80vh",ow:"scroll"}),children:e.jsx(ot,{close:T,entryID:(We=(Xe=(Ke=u.data[0])==null?void 0:Ke.row)==null?void 0:Xe.original)==null?void 0:We.entry_id,setSnackbar:p,rowDtl:t[u.idx]})})]})}),k.show&&e.jsx(xs,{close:()=>J(s=>ke(G({},s),{show:!1})),rptData:k.data,show:k.show,entryId:k.entryId,title:k.title}),e.jsxs("div",{className:"forms",children:[e.jsx(lt,{className:"f-table btcd-entries-f",height:"76vh",columns:z,data:t,loading:C,countEntries:U,rowSeletable:!0,resizable:!0,columnHidable:!0,hasAction:!0,rowClickable:!0,leftHeader:e.jsx(Gt,{fetchData:Ie,setRefreshResp:re}),leftHeaderClasses:_e(ae.leftHeader),rightHeader:e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:_e(be.mr2),size:"sm",onClick:()=>ut(`/form/report-view/${w}/${l}`),children:i("View Analytics Report")}),e.jsx(fs,{data:t,cols:A,formID:l,report:ze}),e.jsx(ps,{fetchData:Ie})]}),initialState:{pageIndex:0,hiddenColumns:b&&"details"in b&&typeof b.details=="object"&&"hiddenColumns"in b.details?b.details.hiddenColumns:[],pageSize:b&&"details"in b&&typeof b.details=="object"&&"pageSize"in b.details?b.details.pageSize:10,sortBy:b&&"details"in b&&typeof b.details=="object"&&"sortBy"in b.details?b.details.sortBy:[],filters:b&&"details"in b&&typeof b.details=="object"&&"filters"in b.details?b.details.filters:[],globalFilter:b&&"details"in b&&typeof b.details=="object"&&"globalFilter"in b.details?b.details.globalFilter:"",columnOrder:b&&"details"in b&&typeof b.details=="object"&&"order"in b.details?b.details.order:[],conditions:b&&"details"in b&&typeof b.details=="object"&&"conditions"in b.details?b.details.conditions:[]},formID:l,setTableCols:H,fetchData:Ie,setBulkDelete:De,duplicateData:ve,pageCount:v,edit:ue,onRowClick:ft,refreshResp:ee,report:dt||0}),!C&&t.length===0&&e.jsxs("div",{className:"btcd-no-data txt-center",children:[e.jsx("img",{src:de,alt:"no data found"}),e.jsx("div",{className:"mt-2 data-txt",children:i("No Response Found.")})]})]})]})}var Rs=r.memo(ys);export{Rs as default};
