var bit_conditionals=function(){"use strict";const e=(e,t,r)=>{switch(e){case"and":return t&&r;case"or":return t||r;default:return!1}},t=(e,t,h,m)=>{switch(e.logic){case"equal":return r(e,t,h,m);case"not_equal":return n(e,t,h,m);case"null":return!h&&0===h.length;case"not_null":return h&&h.length>0;case"contain":return i(e,t,h,m);case"contain_all":return l(e,t,h,m);case"not_contain":return s(e,t,h,m);case"greater":return a(e,t,h,m);case"less":return o(e,t,h,m);case"greater_or_equal":return c(e,t,h,m);case"less_or_equal":return d(e,t,h,m);case"start_with":return f(e,t,h,m);case"end_with":return u(e,t,h,m);case"between":return p(e,t,h,m);case"on_click":return!0;default:return!1}},r=(e,t,r,n)=>{if(!t[e.field].value)return!1;if(void 0!==t[e.field].multiple&&t[e.field].multiple||"check"===r||Array.isArray(r)){const e=Array.isArray(r)?r:JSON.parse(r),t=n.split(",");let i=0;return e.forEach((r=>{e.length>0&&-1!==t.indexOf(r)&&(i+=1)})),i===t.length&&t.length===e.length}return r===n},n=(e,t,r,n)=>{if(!r)return!1;if(void 0!==t[e.field].multiple&&t[e.field].multiple||"check"===r||Array.isArray(r)){const e=Array.isArray(r)?r:JSON.parse(r),t=n.split(",");if(e.length!==t.length)return!0;let i=0;return t.forEach((t=>{e.length>0&&-1===e.indexOf(t)&&(i+=1)})),t.length===i}return r!==n},i=(e,t,r,n)=>{if(!r)return!1;const i=n.split(",");let l=0;if(void 0!==t[e.field].multiple&&t[e.field].multiple||"check"===r||Array.isArray(r)){const e=Array.isArray(r)?r:JSON.parse(r);return i.forEach((t=>{e.length>0&&-1!==e.indexOf(t)&&(l+=1)})),l>0}return i.forEach((e=>{r.length>0&&-1!==r.indexOf(e)&&(l+=1)})),l>0},l=(e,t,r,n)=>{if(!r)return!1;const i=n.split(",");let l=0;if(void 0!==t[e.field].multiple&&t[e.field].multiple||"check"===r||Array.isArray(r)){const e=Array.isArray(r)?r:JSON.parse(r);return i.forEach((t=>{e.length>0&&-1!==e.indexOf(t)&&(l+=1)})),l>=i.length}return!1},s=(e,t,r,n)=>{if(!r)return!1;const i=n.split(",");let l=0;if(void 0!==t[e.field].multiple&&t[e.field].multiple||"check"===r||Array.isArray(r)){const e=Array.isArray(r)?r:JSON.parse(r);return i.forEach((t=>{e.length>0&&-1===e.indexOf(t)&&(l+=1)})),l===i.length}return i.forEach((e=>{r.length>0&&-1===r.indexOf(e)&&(l+=1)})),l===i.length},a=(e,t,r,n)=>!!r&&("number"===t[e.field].type?""!==r&&Number(r)>Number(n):""!==r&&r>n),o=(e,t,r,n)=>!!r&&("number"===t[e.field].type?""!==r&&Number(r)<Number(n):""!==r&&r<n),c=(e,t,r,n)=>!!r&&("number"===t[e.field].type?""!==r&&Number(r)>=Number(n):""!==r&&r>=n),d=(e,t,r,n)=>!!r&&("number"===t[e.field].type?""!==r&&Number(r)<=Number(n):""!==r&&r<=n),f=(e,t,r,n)=>!!r&&""!==r&&0===r.indexOf(n),u=(e,t,r,n)=>!!r&&n===r.substr(r.length-n.length,r.length),p=(e,t,r,n)=>{if(!r)return!1;let i=n;"string"==typeof n&&(i=JSON.parse(n));let l=r,s=i.min,a=i.max;return"number"===t[e.field].type&&(l=Number(r),s=Number(i.min),a=Number(i.max)),l>=s&&l<=a},h=e=>e.match(/\([A-Za-z\s0-9+-\\*]*\)/g),m=(e,t,r,n,i)=>{switch(e){case"_bf_length":return t.length;case"_bf_count":return i.match(/check|radio|select/)?t.trim().split(",").length:t.split(/\b\W+\b/g).length;case"_bf_calc":return v(t);case"_bf_math":{const e=t.split(","),i=e[0].substring(2,e[0].length-1);if($(i,n)){const t=checkRepeatedField(i,n),l=getRepeatedIndexes(t,n);let s=0;return void 0===e[1]||"sum"===e[1]?l.forEach((e=>{s+=Number(r[`${i}[${e}]`].value)})):"avg"===e[1]?(l.forEach((e=>{s+=Number(r[`${i}[${e}]`].value)})),s/=l.length):"min"===e[1]?l.forEach((e=>{(0===s||Number(r[`${i}[${e}]`].value)<s)&&(s=Number(r[`${i}[${e}]`].value))})):"max"===e[1]?l.forEach((e=>{Number(r[`${i}[${e}]`].value)>s&&(s=Number(r[`${i}[${e}]`].value))})):"count"===e[1]?s=l.length:"mul"===e[1]&&(s=1,l.forEach((e=>{s*=Number(r[`${i}[${e}]`].value)}))),s}return r[i].value||""}case"_bf_concat":{const e=t.split(","),i=e[0].substring(2,e[0].length-1),l=e[1]||", ";if($(i,n)){const e=checkRepeatedField(i,n),t=getRepeatedIndexes(e,n);let s="";return t.forEach((e=>{e>1&&(s+=l),s+=r[`${i}[${e}]`].value})),s}return r[i].value||""}default:return t}},g=(r,n,i,l)=>{if(Array.isArray(r)){let t=!1;for(let s=0;s<r.length;s+=1){const a=r[s];if("string"!=typeof a){const o=g(a,n,i,l);if(0===s&&(t=o),s-1>=0&&"string"==typeof r[s-1]){const n=r[s-1].toLowerCase();t=e(n,t,o)}}}return t}const s=y(r.val,n,i,l),a=Object.entries(i.smartTags).reduce(((e,[t,n])=>({...e,[`\${${t}${"string"==typeof n?"":"()"}}`]:{value:"string"==typeof n?n:n?.[r?.smartKey]||"",type:"text",multiple:!1}})),{}),o={...n,...a},c=$(r.field,i)?`${r.field}[${l}]`:r.field,d={...r,field:c};if(void 0!==o[c]){const e=o[c].value;return t(d,o,e,s)}if(h(r.field)){const e=r.field.substring(2,r.field.length-1).replace(/\([A-Za-z\s0-9+-\\*]*\)/g,""),n=m(e,o[r.smartKey].value,o,i,o[r.smartKey].type);return isNaN(n)?o[r.field]={type:"text"}:o[r.field]={type:"number"},t(r,o,n,s)}return!1},b=(e,t,r,n)=>{let i=e;return(e.match(/\${_(?:bf_math|bf_concat)\([^)]+\)}/g)||[]).map((e=>{const n=e.substring(e.indexOf("(")+1,e.length-2),l=e.substring(2,e.indexOf("(")),s=m(l,n,t,r);i=i.replace(e,s)})),(i.match(/\${\w[^${}]*}/g)||[]).map((e=>{let l=e;t[l]||(l=e.substring(2,e.length-1)),l=$(l,r)?`${l}[${n}]`:l;let s="";if(t[l])s=t[l].value,Array.isArray(t[l].value)&&!isNaN(t[l].value[0])&&(s=0,t[l].value.map((e=>{s+=Number(e)})));else if(h(l)){const e=l.replace(/\([A-Za-z\s0-9+-\\*]*\)/g,""),n=l.substring(l.indexOf("(")+1,l.length-1);s=m(e,n,t,r,"")}i=i.replace(e,s)})),i},y=(e,t,r,n)=>{if(!e)return e;let i;if(i="object"==typeof e?JSON.stringify(e):JSON.parse(JSON.stringify(e)),"string"!=typeof i)return e;for(;i.match(/\${\w[^${}]*}/g);)i=b(i,t,r,n);return v(i)},v=e=>{if(!e)return e;let t=e;const r=e.match(/[\\+\-\\*\\/\\%]/g);if(r&&r.length>0){const r=e.match(/\w+/g);if(!r)return e;const n=r.filter((e=>Number.isNaN(e)));if(n&&n.length>0)return t;t=t.replace(/\{|\[/g,"("),t=t.replace(/\}|\]/g,")");try{t=Function(`"use strict"; return (${t})`)()}catch(t){return e}}return t},$=(e,t)=>"undefined"!=typeof checkRepeatedField&&checkRepeatedField(e,t);let _="",x="";const N=(e,t)=>document.querySelector(`#form-${e} ${_} ${t}`),k=(e,t)=>document.querySelectorAll(`#form-${e} ${_} ${t}`),A=(e,t)=>{const r=$(e,t)?`${e}[${x}]`:e;return t.inits&&!t.inits[r]?e:r},I=(e,t,r)=>{const n=t.fields[e],{fieldName:i,typ:l}=n,s=A(e,t),a=n.inpType||"";if(t.inits&&t.inits[s])t.inits[s].disabled=r;else{if("check"===l||"checkbox"===a)return void k(t.contentId,`input[name^="${i}"][name$="[]"]`).forEach((e=>{e.disabled=r}));if("radio"===l||"radio"===a)return void k(t.contentId,`input[name^="${i}"]`).forEach((e=>{e.disabled=r}));if("decision-box"===l){const e=N(t.contentId,`input[name="${i}"]`);return void(e&&(e.disabled=r))}if("button"===l)return void(N(t.contentId,`.${e}-btn`).disabled=r);N(t.contentId,`.${e}-fld`).disabled=r}},w=(e,t,r)=>{const n=A(e,t);t.inits&&t.inits[n]?t.inits[n].readonly=r:N(t.contentId,`.${e}-fld`).readOnly=r},O=e=>{if(null===e)return 0;const t=window.getComputedStyle(e);let r=0;return r="border-box"===t.boxSizing?e.scrollHeight:parseInt(t.paddingTop)+parseInt(t.paddingBottom)+e.scrollHeight+parseInt(t.marginTop)+parseInt(t.marginBottom)+parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth),r},E=(e,t,r)=>{if(t.fields[e.field]){t.fields[e.field].valid.hide=r;const n=e.field,i=t.fields[n].typ;if(["section","repeater"].includes(i)){const r="repeater"===i&&"undefined"!=typeof getRepeatedIndexes?getRepeatedIndexes(n,t):[""],l=t.nestedLayout[n]?.lg?.map((e=>e.i));l?.forEach((n=>{const i={...e,field:n};r.forEach((e=>{S(i,n,t,{},e)}))})),x="",_=""}const l=N(t.contentId,`.btcd-fld-itm.${n}`);let s=O(l);setStyleProperty(l,"height",`${s}px`),r?(setStyleProperty(l,"height","0px"),l.classList.add("fld-hide")):(l.classList.remove("fld-hide"),s=O(l),setStyleProperty(l,"height",`${s}px`)),setTimeout((()=>{l.style.removeProperty("height")}),300)}},S=(e,t,r,n,i)=>{if(x=i,_=i&&$(e.field,r)?`.rpt-index-${i}`:"",void 0!==e.action&&void 0!==e.field)switch(e.field in r.fields&&!r.fields[e.field].valid&&(r.fields[e.field].valid={}),e.action){case"value":return((e,t,r)=>{const n=e.val?y(e.val,r,t,x):"";void 0!==e.val&&t.fields[e.field]?((e,t,r)=>{const{contentId:n}=e,i=e.fields[t],{fieldName:l,typ:s}=i,a=i.inpType||"";if("radio"===s||"radio"===a)return void(N(n,`input[name^="${l}"][value="${r}"]`).checked=!0);if("check"===s||"checkbox"===a){const t=new RegExp(`,|${e.configs.bf_separator}`,"g"),i=r.split(t);return void k(n,`input[name^="${l}"][name$="[]"]`).forEach((e=>{e.checked=i.includes(e.value)}))}if("decision-box"===s){const e=N(n,`input[name="${l}"]`);return void(e&&(e.checked=r===i.msg.checked))}if("rating"===s){const n=A(t,e);return void(e.inits&&e.inits[n]&&(e.inits[n].value=r))}const o=N(n,`[name^='${l}']`);o.value!==r&&(o.value=r,o.setAttribute("value",r))})(t,e.field,n):void 0!==e.val&&"_bf_step_no"===e.field&&t?.inits?.multi_step_form&&(t.inits.multi_step_form.step=n)})(e,r,n);case"hide":return E(e,r,!0);case"disable":r.fields[e.field]&&I(e.field,r,!0);break;case"readonly":r.fields[e.field]&&w(e.field,r,!0);break;case"writeable":r.fields[e.field]&&w(e.field,r,!1);break;case"enable":r.fields[e.field]&&I(e.field,r,!1);break;case"show":if(r.fields[e.field])return E(e,r,!1);break;case"activelist":r.fields[e.field]&&((e,t,r)=>{const n=A(e.field,t);if(t.inits&&t.inits[n]){const i=e.val?y(e.val,r,t,x):"";t.inits[n].activelist=i}})(e,r,n);break;case"save_draft":"_bf_form"===e.field&&((e,t)=>{"undefined"!=typeof saveFormProgress&&saveFormProgress(t.contentId)})(0,r);break;case"lbl":case"ct":case"sub-titl":case"hlp-txt":case"title":r.fields[e.field]&&((e,t,r)=>{if(void 0!==e.val&&t.fields[e.field]){const n=e.val?y(e.val,r,t,x):"",i=e.field,l=N(t.contentId,`.${i}-${e.action}`);if(null===l)return;l.childNodes.forEach((e=>{3!==e.nodeType||""===e.textContent.trim()&&e.length||(e.textContent=n)})),"ct"===e.action&&(l.textContent=n)}})(e,r,n);break;case"placeholder":return((e,t,r)=>{const n=e.val?y(e.val,r,t,x):"",i=e.field,l=t.fields[i],{typ:s}=l;if("select"===s){const e=N(t.contentId,`.${i}-selected-opt-lbl`);0===e.childElementCount&&(e.textContent=n)}else if("html-select"===s){const e=N(t.contentId,`.${i}-slct-optn:first-child`);e&&(e.textContent=n)}else if("currency"===s){const e=N(t.contentId,`.${i}-currency-amount-input`);e&&(e.placeholder=n)}else if("phone-number"===s){const e=N(t.contentId,`.${i}-phone-number-input`);e&&(e.placeholder=n)}else if(void 0!==e.val&&t.fields[e.field]){const e=N(t.contentId,`.${i}-fld`);e&&(e.placeholder=n)}})(e,r,n)}},R=(e,t)=>Object.keys(t).find((r=>t[r].fieldName===e)),C=e=>e.replace(/\[\d*\]/g,"");function F(e,t){return Array.isArray(e)?e.some((e=>F(e,t))):"object"==typeof e&&e.field===t}return function(e){if(!e?.target?.form)return;const t=e.target,{form:r}=e.target,n=r.id.replace("form-",""),i=window.bf_globals?.[n];if(!i)return;const l=t.name.match(/\[(\d+)\]/)?.[1],s=C(t.name),a=R(s,i.fields);if(!a)return;const o=((e,t)=>{const r=new FormData(e),{fields:n}=t,i={};return Array.from(r.entries()).forEach((([e,t])=>{const r=R(C(e),n),l=e.match(/\[(\d+)\]/)?.[1],s=l?`${r}[${l}]`:r;r in n&&(i[s]?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(t)):i[s]=t)})),Object.keys(n).filter((e=>"button"===n[e].typ)).forEach((e=>{i[e]=""})),Object.entries(i).reduce(((e,[t,r])=>({...e,[t]:{value:r,type:n[t.replace(/\[\d*\]/g,"")].typ,multiple:Array.isArray(r)}})),{})})(r,i),c=[],{onfieldCondition:d}=i;if(!d)return;const f=d.filter((e=>"on_input"===e.event_type)).filter((e=>e.conditions.some((e=>F(e?.logics,a)))));if(!f.length)return;f.forEach(((e,t)=>{const{conditions:r}=e,{length:n}=r;let s=!1,d=!!l&&[l];l||"undefined"==typeof getIndexesBaseOnConditions||(d=getIndexesBaseOnConditions(r,i));let f=!!d&&d.pop();do{let e=0;for(e=0;e<n;e+=1){const t=r[e];if(["if","else-if"].includes(t.cond_type)){const{logics:r}=t,n=r.filter((e=>"on_click"===e.logic));if(n.length&&a!==n[0].field)return!1;if(s=g(r,o,i,f),"undefined"!=typeof bf_modify_workflow_logic_status&&(s=bf_modify_workflow_logic_status(s,r,o,f,e,i)),s)break}}c.push({workflowIndx:t,condIndx:e,logicStatus:s,rowIndex:f}),f=!!d&&d.pop()}while(f)}));const u={};return c.reverse(),c.forEach((({workflowIndx:e,condIndx:t,logicStatus:r,rowIndex:n})=>{const{conditions:l}=f[e],s=l.find((e=>"else"===e.cond_type))||{},c=r?l[t].actions:s.actions;c?.fields?.forEach((e=>{let t=[n];n||(t=function(e,t){if("undefined"!=typeof checkRepeatedField){const r=checkRepeatedField(e,t);if(r)return getRepeatedIndexes(r,t)}return!1}(e.field,i)),t||(t=[""]),t.forEach((t=>{const r=`${e.field}[${t}]`;if(u[r]||(u[r]=[]),!u[r].includes(e.action)){u[r].push(e.action);const n=Object.entries(i.smartTags).reduce(((e,[t,r])=>({...e,[`\${${t}}`]:{value:r,type:"text",multiple:!1}})),{});S(e,a,i,{...o,...n},t)}}))}))})),Object.keys(u).length}}();
