var Pe=Object.defineProperty,He=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var pe=(l,d,r)=>d in l?Pe(l,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[d]=r,k=(l,d)=>{for(var r in d||(d={}))Fe.call(d,r)&&pe(l,r,d[r]);if(de)for(var r of de(d))Me.call(d,r)&&pe(l,r,d[r]);return l},y=(l,d)=>He(l,Oe(d));import{r as _,W as Ve,k as me,X as Ee,a as q,p as v,dK as f,j as e,bb as Le,w as i,_ as he,bc as Ge,b7 as Ye,a$ as Je,b8 as be,bf as We,bg as Qe,aL as Xe}from"./main-677.js";import{D as qe}from"./bf-8-69.js";import{b as n,C as D,$ as xe,S as Ze,I as et,s as Q,a as ue}from"./bf-417-108.js";import{S as X,G as B,a as ge}from"./bf-493-110.js";import{T as $}from"./bf-610-73.js";import{S as tt}from"./bf-882-162.js";function st({id:l,value:d,onChangeHandler:r,allowSolid:z=!0,allowGradient:K=!0,allowImage:T=!0,allowVariable:P,colorProp:A}){var oe,ne;const[c,j]=_.useState({parent:"Solid",child:"Solid",color:"Custom"}),[C,g]=_.useState(d),[p,I]=_.useState(),[w,V]=_.useState(d["background-repeat"]),[R,E]=_.useState({type:"auto",w:"0px",h:"0px"}),[b,F]=_.useState({type:"initial",x:"0px",y:"0px",value:"center"}),Z=Ve(Ye),[ee,nt]=me(Je),[L,fe]=me(be),Ce=Ee(be),{css:t}=q(),N=C["background-image"],{"--global-bg-color":we,"--global-fld-bdr-clr":Ne,"--global-fld-bg-color":ke,"--global-font-color":ye,"--global-accent-color":$e}=ee,G=(s,o)=>{o==="parent"?j({parent:s,child:"Upload",color:"Custom"}):o==="child"?j(a=>y(k({},a),{child:s})):o==="color"&&j(a=>y(k({},a),{color:s}))},S=s=>{if(typeof s=="object")I(s),Y(s.h,s.s,s.v,s.a);else{const o=`var(${s})`,a=ee[s];if(a){const[m,x,ae,ie]=a.match(/[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)/gi),[J,W,M,U]=We(m,x,ae,ie);I({h:J,s:W,v:M,a:U}),Y(J,W,M,U,o)}else Y("","","","",o)}},h=s=>{F(o=>y(k({},o),{value:s})),g(o=>v(o,a=>{a.backgroundPosition=s,r(f(a))}))},te=s=>{const o={h:0,s:0,v:0,a:0};s.target.checked?S(o):S("--global-accent-color")},se=()=>(p==null?void 0:p.h)===0&&(p==null?void 0:p.s)===0&&(p==null?void 0:p.v)===0&&(p==null?void 0:p.a)===0,Y=(s,o,a,m,x="")=>{var re,ce;const[ae,ie,J,W,M]=Qe(s,o,a,m);let U=M;const le=(ce=(re=d.color)==null?void 0:re.match(/(!important)/gi))==null?void 0:ce[0];le&&(U=`${U} !important`);const Te=x?`${x}${le?" !important":""}`:U;r(y(k({},d),{color:Te}))},Ae=s=>{g(o=>v(o,a=>{a["background-image"]=s.style,r(f(a))}))},Se=(s,o,a)=>{a===0?(F(m=>y(k({},m),{x:`${s}${o}`})),g(m=>v(m,x=>{x["background-position"]=`${s}${o} ${b.y}`,r(f(x))}))):(F(m=>y(k({},m),{y:`${s}${o}`})),g(m=>v(m,x=>{x["background-position"]=`${b.x} ${s}${o}`,r(f(x))})))},Ie=(s,o,a)=>{a===0?(E(m=>y(k({},m),{w:`${s}${o}`})),g(m=>v(m,x=>{x["background-size"]=`${s}${o} ${R.h}`,r(f(x))}))):(E(m=>y(k({},m),{h:`${s}${o}`})),g(m=>v(m,x=>{x["background-size"]=`${R.w} ${s}${o}`,r(f(x))})))},Be=s=>{g(o=>v(o,a=>{a["background-image"]=`url(${s.target.value})`,r(f(a))}))},_e=({target:{value:s}})=>{F(o=>y(k({},o),{type:s})),s!=="size"&&s!=="positions"&&g(o=>v(o,a=>{a["background-position"]=s,r(f(a))}))},ze=s=>{E(o=>y(k({},o),{type:s.target.value})),g(o=>v(o,a=>{a["background-size"]=s.target.value,r(f(a))}))},Re=s=>{V(s.target.value),g(o=>v(o,a=>{a["background-repeat"]=s.target.value,r(f(a))}))},Ue=s=>{s.stopPropagation(),g(o=>v(o,a=>{a["background-image"]="",r(f(a))})),fe("")};_.useEffect(()=>(L&&g(s=>v(s,o=>{o["background-image"]=`url(${L})`,r(f(o))})),()=>{Ce()}),[L]);const H=[];z&&H.push({label:"Solid"}),K&&H.push({label:"Gradient"}),T&&H.push({label:"Image"});const De=[{label:"Custom",icn:"Custom color",show:["icn"],tip:"Custom color"},{label:"Var",icn:"Variables",show:["icn"],tip:"Variable color"}],Ke=()=>{if(typeof wp!="undefined"&&wp.media){const s=wp.media({title:"Media",button:{text:"Select picture"},library:{type:"image"},multiple:!1});s.on("select",()=>{const o=s.state().get("selection").first().toJSON();g(a=>v(a,m=>{m["background-image"]=`url(${o.url})`,r(f(m))}))}),s.open()}};return e.jsxs("div",{className:t(n.container),children:[H.length>1&&e.jsx(X,{options:H,onChange:s=>G(s,"parent"),defaultActive:c.parent,wideTab:!0}),e.jsx(Le,{autoHide:!0,autoHeight:!0,autoHeightMin:200,autoHeightMax:385,children:e.jsxs("div",{className:t(i.mt1),children:[e.jsx(B,{open:c.parent==="Solid",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t(u.mb),children:e.jsx(X,{noShadow:!0,defaultActive:"Custom",options:De,size:60,onChange:s=>G(s,"color"),show:["icn"],width:"100%",wideTab:!0})}),e.jsx(B,{open:c.color==="Var",children:e.jsxs("div",{className:t(u.varClr),children:[e.jsxs("button",{className:`${t(u.clrItem)} ${t(C.color==="--global-bg-color"?u.active:{})}`,type:"button",onClick:()=>S("--global-bg-color"),"data-testid":`${l}-g-bg-c`,children:[e.jsx(D,{bg:we,className:t(i.mr2)}),e.jsx("span",{children:"Background Color"})]}),e.jsxs("button",{className:t(u.clrItem,p==="--global-accent-color"?u.active:{}),type:"button",onClick:()=>S("--global-accent-color"),"data-testid":`${l}-g-a-c`,children:[e.jsx(D,{bg:$e,className:t(i.mr2)}),e.jsx("span",{children:"Background Accent Color"})]}),e.jsxs("button",{className:t(u.clrItem,p==="--global-font-color"?u.active:{}),type:"button",onClick:()=>S("--global-font-color"),"data-testid":`${l}-g-f-c`,children:[e.jsx(D,{bg:ye,className:t(i.mr2)}),e.jsx("span",{children:"Font Color"})]}),e.jsxs("button",{className:t(u.clrItem,p==="--global-fld-bdr-clr"?u.active:{}),type:"button",onClick:()=>S("--global-fld-bdr-clr"),"data-testid":`${l}-g-f-b`,children:[e.jsx(D,{bg:Ne,className:t(i.mr2)}),e.jsx("span",{children:"Field Border Color"})]}),e.jsxs("button",{className:t(u.clrItem,p==="--global-fld-bg-color"?u.active:{}),type:"button",onClick:()=>S("--global-fld-bg-color"),"data-testid":`${l}-g-f-bg-c`,children:[e.jsx(D,{bg:ke,className:t(i.mr2)}),e.jsx("span",{children:"Field Background Color"})]})]})}),e.jsx(B,{open:c.color==="Custom",children:e.jsxs("div",{className:t(u.container,je.container,je.preview_wrp),children:[e.jsx("div",{className:t(u.subContainer),children:e.jsx(ge,{title:he("Transparant"),action:s=>te(s),isChecked:se(),id:"color-transparant"})}),e.jsx(xe,{showParams:!0,showPreview:!0,onChange:S,value:p})]})})]}):e.jsxs("div",{className:t(u.container),children:[e.jsx("div",{className:t(u.subContainer),children:e.jsx(ge,{title:he("Transparant"),action:s=>te(s),isChecked:se(),id:"color-transparant"})}),e.jsx(xe,{showParams:!0,showPreview:!0,onChange:S,value:p})]})}),e.jsx(B,{open:c.parent==="Gradient",children:e.jsx(Ze,{gradient:Ge(N),changeHandler:Ae})}),e.jsx(B,{open:c.parent==="Image",children:e.jsxs(e.Fragment,{children:[e.jsx(X,{options:[{label:"Upload"},{label:"Link"}],onChange:s=>G(s,"child"),defaultActive:c.child,wideTab:!0}),e.jsxs("div",{className:t(i.mt2,{p:"0px 2px"}),children:[c.child==="Upload"&&e.jsx(et,{title:"Image",imageSrc:N!=null&&N.match(/(^url\(.+\)$)/)?N==null?void 0:N.replace(/(url\(|\))/gi,""):"",value:N==null?void 0:N.slice(N.lastIndexOf("/")+1,-1),clickAction:Ke,clearAction:Ue}),c.child==="Link"&&e.jsx("div",{className:t(i.mt2),children:e.jsxs("div",{className:t(i.flxClm),children:[e.jsxs("div",{className:t({flx:"between"}),children:[e.jsx("span",{className:t(n.title),children:"URL"}),e.jsx("span",{className:t(n.title,n.browse),role:"button",tabIndex:0,onClick:()=>Z(!0),onKeyUp:()=>Z(!0),children:"Browse"})]}),e.jsx("input",{type:"url",className:t(n.urlinput,{pr:"30px !important"}),value:(oe=C["background-image"])!=null&&oe.match(/(^url\(.+\)$)/)?(ne=C["background-image"])==null?void 0:ne.replace(/(url\(|\))/gi,""):"",onChange:Be,placeholder:"ex: https://www.example.com"})]})}),e.jsxs("div",{className:t(i.mt2),children:[e.jsxs("div",{className:t(i.flxcb),children:[e.jsx("span",{className:t(n.title),children:"Size"}),e.jsx("div",{className:t(i.flxc),children:e.jsxs("select",{value:R.type,name:"",id:"",onChange:ze,className:t(Q.select),children:[e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"size",children:"size"}),e.jsx("option",{value:"cover",children:"cover"}),e.jsx("option",{value:"contain",children:"contain"}),e.jsx("option",{value:"initial",children:"initial"})]})})]}),e.jsx(B,{open:R.type==="size",children:e.jsx(ue,{className:t(i.ml6,i.mb2),options:[{label:"W",value:R.w},{label:"H",value:R.h}],unitOptions:["px","%"],valuChangeHandler:Ie})})]}),e.jsxs("div",{className:t(i.mt2),children:[e.jsxs("div",{className:t(i.flxcb),children:[e.jsx("span",{className:t(n.title),children:"Position"}),e.jsx("div",{className:t(i.flxc),children:e.jsxs("select",{value:b.type,name:"",id:"",onChange:_e,className:t(Q.select),children:[e.jsx("option",{value:"positions",children:"Positions"}),e.jsx("option",{value:"size",children:"Size"}),e.jsx("option",{value:"inherit",children:"Inherit"}),e.jsx("option",{value:"initial",children:"Initial"})]})})]}),e.jsx(B,{open:b.type==="size",children:e.jsx(ue,{className:t(i.ml6,i.mb2),options:[{label:"X",value:b.x},{label:"Y",value:b.y}],unitOptions:["px","%"],valuChangeHandler:Se})}),e.jsx(B,{open:b.type==="positions",children:e.jsxs("div",{className:t(i.flxcb,i.ml6,i.mt2,n.positioncontainer),children:[e.jsx("div",{className:t(n.positionitem),children:e.jsx($,{msg:"Top Left",children:e.jsx("span",{className:t(n.positiondot,b.value==="top left"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("top left"),onClick:()=>h("top left"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txCenter),children:e.jsx($,{msg:"Top Center",children:e.jsx("span",{className:t(n.positiondot,b.value==="top center"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("top center"),onClick:()=>h("top center"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txRight),children:e.jsx($,{msg:"Top Right",children:e.jsx("span",{className:t(n.positiondot,b.value==="top right"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("top right"),onClick:()=>h("top right"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem),children:e.jsx($,{msg:"Center Left",children:e.jsx("span",{className:t(n.positiondot,b.value==="center left"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("center left"),onClick:()=>h("center left"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txCenter),children:e.jsx($,{msg:"Center",children:e.jsx("span",{className:t(n.positiondot,b.value==="center"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("center"),onClick:()=>h("center"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txRight),children:e.jsx($,{msg:"Center Right",children:e.jsx("span",{className:t(n.positiondot,b.value==="center right"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("center right"),onClick:()=>h("center right"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem),children:e.jsx($,{msg:"Bottom Left",children:e.jsx("span",{className:t(n.positiondot,b.value==="bottom left"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("bottom left"),onClick:()=>h("bottom left"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txCenter),children:e.jsx($,{msg:"Bottom Center",children:e.jsx("span",{className:t(n.positiondot,b.value==="bottom center"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("bottom center"),onClick:()=>h("bottom center"),tabIndex:0,children:" "})})}),e.jsx("div",{className:t(n.positionitem,i.txRight),children:e.jsx($,{msg:"Bottom Right",children:e.jsx("span",{className:t(n.positiondot,b.value==="bottom right"?n.positionDotActive:{}),role:"button",onKeyDown:()=>h("bottom right"),onClick:()=>h("bottom right"),tabIndex:0,children:" "})})})]})})]}),e.jsx("div",{className:t(i.mt2),children:e.jsxs("div",{className:t(i.flxcb),children:[e.jsx("span",{className:t(n.title),children:"Repeat"}),e.jsx("div",{className:t(i.flxc),children:e.jsxs("select",{value:w,name:"",id:"",onChange:Re,className:t(Q.select),children:[e.jsx("option",{value:"repeat",children:"Repeat"}),e.jsx("option",{value:"repeat-x",children:"Repeat-X"}),e.jsx("option",{value:"repeat-y",children:"Repeat-Y"}),e.jsx("option",{value:"no-repeat",children:"No Repeat"}),e.jsx("option",{value:"space",children:"Space"}),e.jsx("option",{value:"round",children:"Round"}),e.jsx("option",{value:"initial",children:"Initial"})]})})]})})]})]})})]})})]})}const je={preview_wrp:{'& div[role="group"]':{p:4,b:0},"& input":{brs:8,b:"1px solid lightgray",p:"3px 8px",mnh:"10px !important",fs:12,mb:3,bs:"none",":focus":{focusShadow:1,b:"1px solid var(--b-50)"}},"& .styles-module_container__2LiHz":{w:"100%"},"& .common-module_transBackground__2AOKu":{brs:8,ow:"hidden"}},container:{"& > .ui-color-picker":{w:"100%"}}},u={preview_wrp:{w:248,'& div[role="group"]':{p:4,b:0},"& input":{brs:8,b:"1px solid lightgray",p:"3px 8px",mnh:"10px !important",fs:12,mb:3,bs:"none",":focus":{focusShadow:1,b:"1px solid var(--b-50)"}},"& .common-module_transBackground__2AOKu":{brs:8,ow:"hidden"}},container:{dy:"flex",fd:"column","& .styles-module_container__2LiHz":{w:"100%"}},subContainer:{m:5,"& span":{fs:12},"& input":{m:0}},color:{w:30,h:30,brs:8,mr:10},bggrid:{bi:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAJUlEQVQYV2N89erVfwY0ICYmxoguxjgUFKI7GsTH5m4M3w1ChQC1/Ca8i2n1WgAAAABJRU5ErkJggg==)"},varClr:{my:5,w:"100%"},active:{bcr:"var(--b-50) !important",bd:"#f3f8ff"},clrItem:{dy:"block",flx:"align-center",bd:"transparent",b:"2px solid var(--white-0-93)",p:3,mb:8,brs:10,fs:12,cur:"pointer",w:"100%",tn:"background .3s",":hover":{bd:"var(--white-0-97)"}},m:{mr:15},mb:{mb:5}};function ot({value:l,className:d,changeAction:r}){const[z,K]=_.useState(()=>{var c;const A=typeof l=="string"?l:Object.values(l)[0];return!!((c=A==null?void 0:A.match(/(!important)/gi))!=null&&c[0])}),{css:T}=q(),P=()=>{if(K(c=>!c),typeof l=="string"){const c=z?l.replace(/(!important)/gi,""):`${l} !important`;r(c);return}const A={};Object.keys(l).forEach(c=>{const j=z?l[c].replace(/(!important)/gi,""):`${l[c]} !important`;A[c]=j}),r(A)};return e.jsx($,{msg:"Set style as !important",className:"",children:e.jsx("button",{className:`${T(ve.btn,z?ve.active:{})} ${d}`,type:"button",onClick:P,children:e.jsx(tt,{size:"12"})})})}const ve={btn:{se:20,flx:"center",p:2,oe:"none",brs:"50%",b:"none",curp:1,bd:"none",cr:"var(--white-0-0-29)",":hover":{bd:"var(--white-0-95)",cr:"var(--white-0-29)"}},active:{cr:"var(--b-50) !important"}};function mt({id:l,value:d,onChangeHandler:r,allowImportant:z,allowSolid:K=!0,allowImage:T=!0,allowGradient:P=!0,allowVariable:A=!0,colorProp:c="color"}){const{css:j}=q(),C=typeof d=="string"?{color:d}:d;c&&(C.color=C[c]);const g=()=>{if(typeof d=="string"){p({color:""});return}const w={};Object.keys(C).forEach(V=>{w[V]=""}),p(w)},p=w=>{c!=="color"&&w.color&&(w[c]=w.color,delete w.color),r(w)},I=C["background-image"]||C.color;return e.jsx("div",{"data-testid":`${l}-hover`,className:j(i.flxcb,O.containerHover),children:e.jsxs("div",{className:j(i.flxc),children:[z&&I&&e.jsx(ot,{className:j({mr:3}),value:C,changeAction:w=>p(w)}),e.jsxs("div",{className:j(O.preview_wrp),title:I||"Pick Color",children:[e.jsxs(qe,{onShow:()=>{},onHide:()=>{},hideOnClick:"toggle",children:[e.jsxs("button",{type:"button",className:j(O.pickrBtn),"data-testid":`${l}-modal-btn`,children:[e.jsx(D,{bg:I,h:24,w:24,className:j(i.mr2)}),e.jsx("span",{className:j(O.clrVal),children:I||"Pick Color"})]}),e.jsx(st,{id:l,value:C,onChangeHandler:p,allowSolid:K,allowGradient:P,allowImage:T,allowVariable:A,colorProp:c})]}),I&&e.jsx("button",{title:"Clear Value",onClick:g,className:j(O.clearBtn),type:"button","aria-label":"Clear Color","data-testid":`${l}-clear-btn`,children:e.jsx(Xe,{className:"",size:"12"})})]})]})})}const O={delBtn:{se:20,flx:"center",b:"none",p:0,mr:1,tn:".2s all",curp:1,brs:"50%",tm:"scale(0)",bd:"none",cr:"var(--red-100-61)",pn:"absolute",lt:-15,":hover":{bd:"#ffd0d0",cr:"#460000"}},containerHover:{"&:hover .delete-btn":{tm:"scale(1)"}},preview_wrp:{bd:"var(--white-0-95)",w:130,mnw:130,brs:10,p:3,flx:"center-between",":hover":{bs:"0 0 0 1px var(--white-0-83)"}},clearBtn:{brs:"50%",p:4,w:17,h:17,b:"none",flx:"center",bd:"transparent",cr:"var(--white-0-50)",curp:1,":hover":{cr:"var(--black-0)",bd:"#d3d1d1"}},pickrBtn:{b:"none",curp:1,flx:"center",bd:"transparent",p:0},clrVal:{w:73,ws:"nowrap",textOverflow:"ellipsis",ta:"left",ow:"hidden"},active:{focusShadow:1}};export{mt as C};
