var $=Object.defineProperty;var g=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var _=(a,t,s)=>t in a?$(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,v=(a,t)=>{for(var s in t||(t={}))k.call(t,s)&&_(a,s,t[s]);if(g)for(var s of g(t))V.call(t,s)&&_(a,s,t[s]);return a};import{l as u,c as R,_ as c,u as q,j as e,y as I,$ as K,o as S}from"./main-677.js";import{d as y}from"./bf-67-72.js";import{S as z}from"./bf-648-122.js";import{M as P}from"./bf-878-130.js";const U=(a,t,s,r,d)=>{let i=u(t);const{name:n,value:p}=a.target;switch(i[n]=p,n){case"module":i=w(i,s,r,d);break}s(i)},w=(a,t,s,r)=>{var i,n;let d=u(a);return d.field_map=[],(n=(i=d==null?void 0:d.default)==null?void 0:i.fields)!=null&&n[a.module]?d=M(d):F(d,t,s,r),d},F=(a,t,s,r)=>{const{module:d}=a;d&&(s(!0),R({module:d},"bitforms_wc_refresh_fields").then(i=>{if(i&&i.success){let n=u(a);i.data&&(n.default||(n.default={}),n.default.fields||(n.default.fields={}),n.default.fields[d]=i.data,n=M(n),t(n),r({show:!0,msg:c("Fields refreshed")}))}else r({show:!0,msg:c("Fields refresh failed. please try again")});s(!1)}).catch(()=>s(!1)))},M=a=>{const t=u(a);return t.default.fields[t.module].required.forEach(s=>{t.field_map.find(r=>r.wcField===s)||t.field_map.unshift({formField:"",wcField:s,required:!0})}),t.field_map.length||(t.field_map=[{formField:"",wcField:""}]),t};function N({i:a,formFields:t,field:s,wcConf:r,setWcConf:d,uploadFields:i}){const n=s.required===!0,p=q(K),{isPro:h}=p,f=l=>{const m=v({},r);i?m.upload_field_map.splice(l,0,{}):m.field_map.splice(l,0,{}),d(m)},j=l=>{const m=u(r);i?m.upload_field_map.length>1&&m.upload_field_map.splice(l,1):m.field_map.length>1&&m.field_map.splice(l,1),d(m)},x=(l,m)=>{const o=u(r);i?o.upload_field_map[m][l.target.name]=l.target.value:o.field_map[m][l.target.name]=l.target.value,l.target.value==="custom"&&(o.field_map[m].customValue=""),d(o)},b=(l,m)=>{const o=u(r);i?o.upload_field_map[m].customValue=l.target.value:o.field_map[m].customValue=l.target.value,d(o)};return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:l=>x(l,a),children:[e.jsx("option",{value:"",children:c("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:i?t.map(l=>l.type==="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`)):t.map(l=>l.type!=="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`))}),!i&&e.jsx("option",{value:"custom",children:c("Custom...")}),!i&&e.jsxs("optgroup",{label:`General Smart Codes ${h?"":"(PRO)"}`,children:[" ",h&&z.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-zhcrm-${l.name}`))]})]}),s.formField==="custom"&&e.jsx(P,{onChange:l=>b(l,a),label:c("Custom Value"),className:"mr-2",type:"text",value:s.customValue,placeholder:c("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"wcField",value:s.wcField||"",onChange:l=>x(l,a),disabled:n,children:[e.jsx("option",{value:"",children:c("Select Field")}),Object.values(r.default.fields[r.module][i?"uploadFields":"fields"]).map(l=>{if(n){if(l.required&&l.fieldKey===s.wcField)return e.jsx("option",{value:l.fieldKey,children:l.fieldName},`${l.fieldKey}-1`)}else if(!l.required)return e.jsx("option",{value:l.fieldKey,children:l.fieldName},`${l.fieldKey}-1`)})]})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>j(a),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(I,{})})]})]})}function B({formFields:a,handleInput:t,wcConf:s,setWcConf:r,isLoading:d,setisLoading:i,setSnackbar:n}){var p,h,f,j,x,b;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:c("Module:")}),e.jsxs("select",{onChange:t,name:"module",value:s.module,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:c("Select Module")}),e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"product",children:"Product"})]}),e.jsx("br",{}),e.jsx("br",{}),d&&e.jsx(S,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((f=(h=(p=s.default)==null?void 0:p.fields)==null?void 0:h[s.module])==null?void 0:f.fields)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:c("Map Fields")}),e.jsx("button",{onClick:()=>F(s,r,i,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Fields")}'`},type:"button",disabled:d,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("WooCommerce Fields")})})]}),s.field_map.map((l,m)=>e.jsx(N,{i:m,field:l,wcConf:s,formFields:a,setWcConf:r},`wc-m-${m+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>y(s.field_map.length,s,r),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),((b=(x=(j=s.default)==null?void 0:j.fields)==null?void 0:x[s.module])==null?void 0:b.uploadFields)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:c("Map File Upload Fields")}),e.jsx("button",{onClick:()=>F(s,r,i,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Fields")}'`},type:"button",disabled:d,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("WooCommerce Fields")})})]}),s.upload_field_map.map((l,m)=>e.jsx(N,{i:m,field:l,wcConf:s,formFields:a,setWcConf:r,uploadFields:!0},`wc-m-${m+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>y(s.field_map.length,s,r,!0),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{B as W,U as h};
