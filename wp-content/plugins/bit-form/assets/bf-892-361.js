var v=Object.defineProperty;var _=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var f=(l,t,i)=>t in l?v(l,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[t]=i,p=(l,t)=>{for(var i in t||(t={}))k.call(t,i)&&f(l,i,t[i]);if(_)for(var i of _(t))F.call(t,i)&&f(l,i,t[i]);return l};import{u as R,j as s,_ as m,y as I,$ as V,o as $}from"./main-677.js";import{r as W,a as M,b as G}from"./bf-560-362.js";import{S}from"./bf-648-122.js";import{M as H}from"./bf-878-130.js";const K=(l,t,i,e,r,a,c)=>{const o=[...l];if(c)o[a]=p(p({},l[a]),e),o.push({editItegration:!0}),t([...o]),r.push(i);else{const n=[...o];n.push(e),n.push({newItegration:!0}),t(n),r.push(i)}},Q=l=>{const t={},e=window.location.href.replace(`${window.opener.location.href}?redirect`,"").split("&");e&&e.forEach(r=>{const a=r.split("=");a[1]&&(t[a[0]]=a[1])}),localStorage.setItem(`__bitforms_${l}`,JSON.stringify(t)),window.close()},y=(l,t,i,e,r)=>{const a=p({},t);r?e?a.relatedlists[r-1].upload_field_map.splice(l,0,{}):a.relatedlists[r-1].field_map.splice(l,0,{}):e?a.upload_field_map.splice(l,0,{}):a.field_map.splice(l,0,{}),i(p({},a))},O=(l,t,i,e,r)=>{const a=p({},t);r?e?a.relatedlists[r-1].upload_field_map.length>1&&a.relatedlists[r-1].upload_field_map.splice(l,1):a.relatedlists[r-1].field_map.length>1&&a.relatedlists[r-1].field_map.splice(l,1):e?a.upload_field_map.length>1&&a.upload_field_map.splice(l,1):a.field_map.length>1&&a.field_map.splice(l,1),i(p({},a))},N=(l,t,i,e,r,a)=>{const c=p({},i);a?r?c.relatedlists[a-1].upload_field_map[t][l.target.name]=l.target.value:c.relatedlists[a-1].field_map[t][l.target.name]=l.target.value:r?c.upload_field_map[t][l.target.name]=l.target.value:c.field_map[t][l.target.name]=l.target.value,l.target.value==="custom"&&(a?c.relatedlists[a-1].field_map[t].customValue="":c.field_map[t].customValue=""),e(p({},c))},T=(l,t,i,e,r)=>{const a=p({},i);r?a.relatedlists[r-1].field_map[t].customValue=l.target.value:a.field_map[t].customValue=l.target.value,e(p({},a))};function P({i:l,formFields:t,field:i,sheetConf:e,setSheetConf:r}){var o,n,h,x,j;const a=R(V),{isPro:c}=a;return s.jsxs("div",{className:"flx mt-2 mr-1",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:d=>N(d,l,e,r),children:[s.jsx("option",{value:"",children:m("Select Field")}),s.jsx("optgroup",{label:"Form Fields",children:t.map(d=>d.type!=="file-up"&&s.jsx("option",{value:d.key,children:d.name},`ff-zhcrm-${d.key}`))}),s.jsx("option",{value:"custom",children:m("Custom...")}),s.jsx("optgroup",{label:`General Smart Codes ${c?"":"(PRO)"}`,children:c&&((o=S)==null?void 0:o.map(d=>s.jsx("option",{value:d.name,children:d.label},`ff-rm-${d.name}`)))})]}),i.formField==="custom"&&s.jsx(H,{onChange:d=>T(d,l,e,r),label:m("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:m("Custom Value")}),s.jsxs("select",{className:"btcd-paper-inp",name:"googleSheetField",value:i.googleSheetField||"",onChange:d=>N(d,l,e,r),children:[s.jsx("option",{value:"",children:m("Select Field")}),((j=(x=(h=(n=e.default)==null?void 0:n.headers)==null?void 0:h[e.spreadsheetId])==null?void 0:x[e.worksheetName])==null?void 0:j[e.headerRow])&&Object.values(e.default.headers[e.spreadsheetId][e.worksheetName][e.headerRow]).map((d,b)=>s.jsx("option",{value:d,children:d},`gsheet-${b*2}`))]})]}),s.jsx("button",{onClick:()=>y(l,e,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>O(l,e,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx(I,{})})]})}function X({formID:l,formFields:t,handleInput:i,sheetConf:e,setSheetConf:r,isLoading:a,setisLoading:c,setSnackbar:o}){var n,h,x,j,d,b,g;return s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("b",{className:"wdt-150 d-in-b",children:m("Spreadsheets:")}),s.jsxs("select",{onChange:i,name:"spreadsheetId",value:e.spreadsheetId,className:"btcd-paper-inp w-6",children:[s.jsx("option",{value:"",children:m("Select Spreadsheet")}),((n=e==null?void 0:e.default)==null?void 0:n.spreadsheets)&&Object.keys(e.default.spreadsheets).map(u=>s.jsx("option",{value:e.default.spreadsheets[u].spreadsheetId,children:e.default.spreadsheets[u].spreadsheetName},u))]}),s.jsx("button",{onClick:()=>W(l,e,r,c,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Spreadsheet"'},type:"button",disabled:a,children:"↻"}),s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{className:"wdt-150 d-in-b",children:"Worksheet:"}),s.jsxs("select",{onChange:i,name:"worksheetName",value:e.worksheetName,className:"btcd-paper-inp w-6",children:[s.jsx("option",{value:"",children:m("Select Worksheet")}),((x=(h=e==null?void 0:e.default)==null?void 0:h.worksheets)==null?void 0:x[e.spreadsheetId])&&e.default.worksheets[e.spreadsheetId].map(u=>s.jsx("option",{value:u.properties.title,children:u.properties.title},u.properties.sheetId))]}),s.jsx("button",{onClick:()=>M(l,e,r,c,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Sheet Worksheets"'},type:"button",disabled:a,children:"↻"}),s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{className:"wdt-150 d-in-b",children:m("Header Row:")}),s.jsx("input",{type:"text",min:"1",className:"btcd-paper-inp w-6",placeholder:"Header Row",onChange:i,value:e.headerRow,name:"headerRow"}),s.jsx("button",{onClick:()=>G(l,e,r,c,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Worksheet Headers"'},type:"button",disabled:a,children:"↻"}),s.jsx("br",{}),s.jsx("small",{className:"mt-3 d-blk",style:{marginLeft:155,lineHeight:1.8},children:m("By default, first row of the worksheet is considered as header row. This can be used if tabular data starts from any row other than the first row.")}),s.jsx("br",{}),a&&s.jsx($,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((g=(b=(d=(j=e.default)==null?void 0:j.headers)==null?void 0:d[e.spreadsheetId])==null?void 0:b[e.worksheetName])==null?void 0:g[e.headerRow])&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-4",children:s.jsx("b",{className:"wdt-100",children:m("Map Fields")})}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:m("Form Fields")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:m("Google Fields")})})]}),e.field_map.map((u,w)=>s.jsx(P,{i:w,field:u,sheetConf:e,formFields:t,setSheetConf:r},`sheet-m-${w+9}`)),s.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:s.jsx("button",{onClick:()=>y(e.field_map.length,e,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),s.jsx("br",{}),s.jsx("br",{})]})]})}export{X as G,Q as a,K as s};
