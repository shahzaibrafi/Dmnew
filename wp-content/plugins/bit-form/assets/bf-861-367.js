var F=Object.defineProperty;var b=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var v=(s,l,t)=>l in s?F(s,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[l]=t,r=(s,l)=>{for(var t in l||(l={}))N.call(l,t)&&v(s,t,l[t]);if(b)for(var t of b(l))_.call(l,t)&&v(s,t,l[t]);return s};import{j as e,T as w,_ as d,u as y,y as k,$ as A}from"./main-677.js";import{g as M,a as S}from"./bf-882-366.js";import{S as V}from"./bf-648-122.js";import{M as $}from"./bf-878-130.js";const p=(s,l,t)=>{const c=r({},l);c.field_map.splice(s,0,{}),t(r({},c))},R=(s,l,t)=>{const c=r({},l);c.field_map.length>1&&c.field_map.splice(s,1),t(r({},c))},g=(s,l,t,c)=>{const a=r({},t);a.field_map[l][s.target.name]=s.target.value,s.target.value==="custom"&&(a.field_map[l].customValue=""),c(r({},a))},T=(s,l,t,c)=>{const a=r({},t);a.field_map[l].customValue=s.target.value,c(r({},a))};function q({rapidmailConf:s,setRapidmailConf:l}){var c;const t=(a,i)=>{const u=r({},s);i==="send_activationmail"&&(a.target.checked?u.actions.send_activationmail=!0:delete u.actions.send_activationmail),l(r({},u))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(w,{checked:((c=s.actions)==null?void 0:c.send_activationmail)||!1,onChange:a=>t(a,"send_activationmail"),className:"wdt-200 mt-4 mr-2",value:"send_activationmail",title:d("Send Activation Email"),subTitle:d("Add Send Activation Email")})})}function E({i:s,formFields:l,field:t,rapidmailConf:c,setRapidmailConf:a}){var x,j;if(((x=c==null?void 0:c.field_map)==null?void 0:x.length)===1&&t.rapidmailFormField===""){const n=r({},c),o=M(n);n.field_map=o,a(n)}const i=(c==null?void 0:c.recipientsFields.filter(n=>n.required===!0))||[],u=(c==null?void 0:c.recipientsFields.filter(n=>n.required===!1))||[],m=y(A),{isPro:h}=m;return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:n=>g(n,s,c,a),children:[e.jsx("option",{value:"",children:d("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:l==null?void 0:l.map(n=>e.jsx("option",{value:n.key,children:n.name},`ff-rm-${n.key}`))}),e.jsx("option",{value:"custom",children:d("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${h?"":"(PRO)"}`,children:h&&((j=V)==null?void 0:j.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),t.formField==="custom"&&e.jsx($,{onChange:n=>T(n,s,c,a),label:d("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:d("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<i.length,name:"rapidmailFormField",value:s<i?i[s].label||"":t.rapidmailFormField||"",onChange:n=>g(n,s,c,a),children:[e.jsx("option",{value:"",children:d("Select Field")}),s<i.length?e.jsx("option",{value:i[s].key,children:i[s].label},i[s].key):u.map(({key:n,label:o})=>e.jsx("option",{value:n,children:o},n))]})]}),s>=i.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(s,c,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>R(s,c,a),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(k,{})})]})]})}function L({formFields:s,handleInput:l,rapidmailConf:t,setRapidmailConf:c,isLoading:a,setIsLoading:i,setSnackbar:u}){var m;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("Recipient:")}),e.jsxs("select",{onChange:l,name:"recipient_id",value:t==null?void 0:t.recipient_id,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:d("Select Recipients")}),((m=t==null?void 0:t.default)==null?void 0:m.recipientlists)&&t.default.recipientlists.map(({id:h,name:x})=>e.jsx("option",{value:h,children:x},h))]}),e.jsx("button",{onClick:()=>S(t,c,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Fetch All Recipients")}'`},type:"button",disabled:a,children:"â†»"}),e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:d("Field Map")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Rapidmail Fields")})})]}),(t==null?void 0:t.recipient_id)&&(t==null?void 0:t.field_map.map((h,x)=>e.jsx(E,{i:x,field:h,rapidmailConf:t,formFields:s,setRapidmailConf:c,setSnackbar:u},`rp-m-${x+9}`))),e.jsx("div",{className:"txt-center mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>p(t.field_map.length,t,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),(t==null?void 0:t.recipient_id)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(q,{rapidmailConf:t,setRapidmailConf:c,formFields:s})]})]})}export{L as R};
