var Q=Object.defineProperty;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var B=(c,o,d)=>o in c?Q(c,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[o]=d,b=(c,o)=>{for(var d in o||(o={}))V.call(o,d)&&B(c,d,o[d]);if(D)for(var d of D(o))X.call(o,d)&&B(c,d,o[d]);return c};import{v as Y,t as Z,r,a as T,c as f,j as e,S as ee,_ as l}from"./main-677.js";import{p as te,S as se}from"./bf-773-372.js";import{C as v}from"./bf-149-112.js";import{b as ae}from"./bf-67-72.js";import{r as ie,F as g,a as N,b as E,c as le,d as ne}from"./bf-75-374.js";import"./bf-610-73.js";import"./bf-648-122.js";import"./bf-878-130.js";function ue({formFields:c,setIntegration:o,integrations:d,allIntegURL:z}){var C,S,M;const O=Y(),{id:_}=Z(),[F,y]=r.useState([]),[U,h]=r.useState([]),[L,u]=r.useState([]),[W,G]=r.useState([]),[s,x]=r.useState(b({},d[_])),[H,j]=r.useState({show:!1});T(),r.useEffect(()=>{f({},"bitforms_get_post_type").then(t=>{var a,n;t!=null&&t.success&&(y(Object.values((a=t==null?void 0:t.data)==null?void 0:a.post_types)),G((n=t==null?void 0:t.data)==null?void 0:n.users))}),f({post_type:s==null?void 0:s.post_type},"bitforms_get_metabox_fields").then(t=>{var a,n;t!=null&&t.success&&t!==void 0&&(h((a=t==null?void 0:t.data)==null?void 0:a.metaboxFields),u((n=t==null?void 0:t.data)==null?void 0:n.metaboxFile))})},[]);const p=(t,a,n)=>{const i=b({},s);n?i[t]=Number(a):i[t]=a,x(i)},J=(t,a)=>{const n=b({},s);n[t]=a,f({post_type:a},"bitforms_get_metabox_fields").then(i=>{var P,k,w,$,I,R,q,A;i!=null&&i.success&&i!==void 0&&(h((P=i==null?void 0:i.data)==null?void 0:P.metaboxFields),(k=i==null?void 0:i.data)!=null&&k.metaboxFields&&(n.metabox_map=($=(w=i==null?void 0:i.data)==null?void 0:w.metaboxFields)==null?void 0:$.filter(m=>m.required).map(m=>({formField:"",metaboxField:m.key,required:m.required})),((I=n==null?void 0:n.metabox_map)==null?void 0:I.length)<1&&(n.acf_map=[{}])),(R=i==null?void 0:i.data)!=null&&R.metaboxFile&&(n.metabox_file_map=(q=i==null?void 0:i.data)==null?void 0:q.metaboxFile.filter(m=>m.required).map(m=>({formField:"",metaboxFileUpload:m.key,required:m.required})),((A=n==null?void 0:n.metabox_file_map)==null?void 0:A.length)<1&&(n.metabox_file_map=[{}])),x(n))})},K=()=>{if(!le(s)){j({show:!0,msg:l("Please map mandatory fields")});return}if(!ne(s)){j({show:!0,msg:l("Please map mandatory fields")});return}ae(d,o,z,s,O,_,"edit")};return e.jsxs("div",{style:{width:900},children:[e.jsx(ee,{snack:H,setSnackbar:j}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Integration Name ")})}),e.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:t=>p(t.target.name,t.target.value),name:"name",value:s.name,type:"text",placeholder:l("Integration Name...")}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:l("Post Type")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select one of the defined WordPress post types Or custom post types for the post.",e.jsx("br",{})]})})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"post_type",onChange:t=>J(t.target.name,t.target.value),value:s.post_type,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Post Type"}),F.map((t,a)=>e.jsx("option",{value:t==null?void 0:t.name,children:t==null?void 0:t.label},`pos-t-${a*9}`))]}),e.jsx("button",{onClick:()=>ie(F,y),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh Post Types")}'`},type:"button",children:"↻"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("b",{children:l("Post Status")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the status for the post. If published status is selected and the post date is in the future, it will automatically be changed to scheduled",e.jsx("br",{})]})})]}),e.jsxs("select",{name:"post_status",onChange:t=>p(t.target.name,t.target.value),value:s.post_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"auto-draft",children:"Auto-Draft"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:l("Author")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the user to be assigned to the post.",e.jsx("br",{})]})})]}),e.jsx("div",{children:e.jsxs("select",{name:"post_author",onChange:t=>p(t.target.name,t.target.value),value:s.post_author,className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:l("Select Author")}),W.map((t,a)=>e.jsx("option",{value:t.ID,children:t.display_name},`pa-${a*2}`))]})}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Comment Status")})}),e.jsxs("select",{name:"comment_status",onChange:t=>p(t.target.name,t.target.value),value:s.comment_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:l("Field Mapping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Post Fields")})})]})]}),(C=s==null?void 0:s.post_map)==null?void 0:C.map((t,a)=>e.jsx(g,{i:a,type:"post",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:te},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var t;return N("post_map",(t=s==null?void 0:s.post_map)==null?void 0:t.length,s,x)},className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("div",{children:e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": All your taxonomies will be mapped automatically from your form fields."]})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:l("MetaBox Fields Mapping")}),e.jsx("button",{onClick:()=>E(s,h,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Metabox Fields")})})]})]}),(S=s==null?void 0:s.metabox_map)==null?void 0:S.map((t,a)=>e.jsx(g,{i:a,type:"metabox",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:U},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>N("metabox_map",s.metabox_map.length,s,x),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:l("Metabox File Upload Fields Map")}),e.jsx("button",{onClick:()=>E(s,h,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Metaxbox Fields")})})]})]}),(M=s==null?void 0:s.metabox_file_map)==null?void 0:M.map((t,a)=>e.jsx(g,{i:a,type:"metaboxFile",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:L,fieldType:"file"},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>N("metabox_file_map",s.metabox_file_map.length,s,x),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx(se,{onClick:()=>K()})]})}export{ue as default};
