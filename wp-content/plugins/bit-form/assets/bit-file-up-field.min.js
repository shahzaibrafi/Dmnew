var bit_file_up_field=function(){"use strict";return class{#e=null;#t=null;#s=null;#i=null;#l=null;#a=null;#c=null;#r=null;#n=null;#h={};#o=[];#f=null;#d={};#p={};#u={};#m="";#v="";#b=[];#g={id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{},oninput:()=>{}};constructor(e,t){Object.assign(this.#g,t),this.#f=t.document?t.document:document,this.#d=t.window?t.window:window,this.#p=t.attributes||{},this.#u=t.classNames||{},this.#e="string"==typeof e?this.#f.querySelector(e):e,this.#m=this.#g.fieldKey,this.fieldKey=this.#m,this.#v=t.assetsURL||"",this.init()}init(){this.#t=this.#w(`.${this.#m}-label`),this.#s=this.#w(`.${this.#m}-inp-btn`),this.#i=this.#w(`.${this.#m}-file-select-status`),this.#l=this.#w(`.${this.#m}-file-input-wrpr`),this.#a=this.#w(`.${this.#m}-max-size-lbl`),this.#c=this.#w(`.${this.#m}-file-upload-input`),this.#n=this.#w(`.${this.#m}-file-input-wrpr .err-wrp`);const{multiple:e,allowedFileType:t,accept:s,showSelectStatus:i,fileSelectStatus:l,oldFiles:a}=this.#g;this.#c.multiple=e,this.#c.accept=t?`${t}, ${s}`:s,i&&this.#i?this.#i.innerHTML=l:this.#i?.remove(),this.#h={},this.#C(),a&&this.#L(a),this.#S(this.#c,"change",(e=>this.#F(e))),this.#S(this.#s,"click",(()=>this.#c.click()))}#L(e){const t=JSON.parse(e);this.#b=JSON.parse(e),this.#r||this.#x(),t.forEach((e=>{this.#E(e)}));const s=this.#y("input");s.type="hidden",s.name=`${this.#m}_old`,s.value=this.#b.toString(),this.#l.appendChild(s)}#E(e){const t=this.#y("div"),s=e.replace(/( |\.|\(|\))/g,"");if(t.id=`file-wrp-${s}`,this.#A(t,"file-wrpr"),"file-wrpr"in this.#u){const e=this.#u["file-wrpr"];e&&this.#$(t,e)}if("file-wrpr"in this.#p){const e=this.#p["file-wrpr"];this.#z(t,e)}const i=this.#y("div");this.#A(i,"file-details");const l=this.#y("a");if(this.#A(l,"file-title"),"file-title"in this.#u){const e=this.#u["file-title"];e&&this.#$(l,e)}if("file-title"in this.#g.attributes){const e=this.#g.attributes["file-title"];this.#z(l,e)}this.#U(l,"target","_blank"),this.#U(l,"href",`${this.#g.baseDLURL}&fileID=${e}`),this.#T(l,e),i.append(l),t.append(i);const a=this.#y("button");if(this.#A(a,"cross-btn"),"cross-btn"in this.#u){const e=this.#u["cross-btn"];e&&this.#$(a,e)}if(this.#U(a,"data-file-id",s),this.#U(a,"data-file-name",e),this.#U(a,"type","button"),"cross-btn"in this.#g.attributes){const e=this.#g.attributes["cross-btn"];this.#z(a,e)}this.#T(a,"×"),this.#S(a,"click",(e=>this.#I(e))),t.append(a),this.#r.appendChild(t)}#F(e){const{files:t}=this.#c,{sizeUnit:s,allowMaxSize:i,maxSize:l,maxSizeErrMsg:a,isItTotalMax:c,multiple:r,showFileList:n,fileExistMsg:h,showFilePreview:o,showFileSize:f,showSelectStatus:d,fileSelectStatus:p,minFile:u,minFileErrMsg:m,maxFile:v,maxFileErrMsg:b}=this.#g,g=this.#N(s,l);let w=0;const C=[];this.#K(this.#n,"active"),c&&Object.values(this.#h).forEach((e=>{w+=e.size})),!r&&t.length>0&&(this.#h={},this.#r&&this.#T(this.#r,""));for(let e=0;e<t.length;e+=1){const s=t[e],r=s.name.replace(/( |\.|\(|\))/g,"");if(this.#h[r])C.push(h);else if(!i||!l||s.size+w<=g)if(!(v>0)||Object.keys(this.#h).length<v){if(this.#h[r]=s,n){this.#r||this.#x();const e=this.#y("div");if(e.id=`file-wrp-${r}`,this.#A(e,"file-wrpr"),"file-wrpr"in this.#u){const t=this.#u["file-wrpr"];t&&this.#$(e,t)}if("file-wrpr"in this.#p){const t=this.#p["file-wrpr"];this.#z(e,t)}if(o){const t=this.#y("img");if(t.src=this.#M(s),t.alt="Image Uploaded",this.#A(t,"file-preview"),"file-preview"in this.#u){const e=this.#u["file-preview"];e&&this.#$(t,e)}if("file-preview"in this.#p){const e=this.#p["file-preview"];this.#z(t,e)}e.append(t)}const t=this.#y("div");this.#A(t,"file-details");const i=this.#y("span");if(this.#A(i,"file-title"),"file-title"in this.#u){const e=this.#u["file-title"];e&&this.#$(i,e)}if("file-title"in this.#g.attributes){const e=this.#g.attributes["file-title"];this.#z(i,e)}if(this.#T(i,s.name),t.append(i),f){const e=this.#y("span");if(this.#A(e,"file-size"),"file-size"in this.#u){const t=this.#u["file-size"];t&&this.#$(e,t)}if("file-size"in this.#g.attributes){const t=this.#g.attributes["file-size"];this.#z(e,t)}this.#T(e,this.#W(s.size)),t.append(e)}e.append(t);const l=this.#y("button");if(this.#A(l,"cross-btn"),"cross-btn"in this.#u){const e=this.#u["cross-btn"];e&&this.#$(l,e)}if(this.#U(l,"data-file-id",r),"cross-btn"in this.#g.attributes){const e=this.#g.attributes["cross-btn"];this.#z(l,e)}this.#T(l,"×"),e.append(l),this.#r.append(e)}c&&(w+=s.size)}else this.#n.innerHTML=b,this.#A(this.#n,"active"),setTimeout((()=>{this.#K(this.#n,"active")}),3e3);else C.push(a)}this.#j(`.${this.#m}-file-input-wrpr .cross-btn`).forEach((e=>{this.#S(e,"click",(e=>this.#k(e)))}));const L=Object.keys(this.#h).length;this.#O(),L&&d?this.#i.innerText=`${L} file${L>1?"s":""} selected`:d&&(this.#i.innerHTML=p),u>0&&L<u&&(this.#n.innerHTML=m,this.#A(this.#n,"active")),!this.#r&&C.length>0&&this.#x(),C.map(((e,t)=>{this.#r.insertAdjacentHTML("afterbegin",`\n      <div id='err-${t}' class="err-wrp">\n          ${e}\n      </div>`);const s=this.#w(`#err-${t}`);this.#A(s,"active"),setTimeout((()=>{this.#K(s,"active")}),3e3),setTimeout((()=>{s?.remove(),Object.keys(this.#h).length||this.#C()}),5e3)}))}#x(){if(this.#r=this.#y("div"),this.#A(this.#r,"files-list"),"files-list"in this.#u){const e=this.#u["files-list"];e&&this.#$(this.#r,e)}if("files-list"in this.#p){const e=this.#p["files-list"];this.#z(this.#r,e)}this.#l.append(this.#r)}#C(){this.#r?.remove(),this.#r=null}#O(){const e=new DataTransfer;Object.values(this.#h)?.forEach((t=>{e.items.add(t)})),this.#c.files=e.files}#I(e){const t=e.target.getAttribute("data-file-id"),s=e.target.getAttribute("data-file-name");this.#R(`#file-wrp-${t}`),this.#b=this.#b.filter((e=>e!==s)),this.#w(`input[name="${this.#m}_old"]`).value=this.#b.toString()}#k=e=>{const t=e.target.getAttribute("data-file-id");this.#R(`#file-wrp-${t}`),delete this.#h[t];const s=Object.keys(this.#h).length;s?this.#i.innerText=`${s} file${s>1?"s":""} selected`:(this.#i.innerHTML=this.#g.fileSelectStatus,this.#C()),this.#O()};#w(e){return this.#e.querySelector(e)}#j(e){return this.#e.querySelectorAll(e)}#R(e){this.#w(e)?.remove()}#y(e){return this.#f.createElement(e)}#M(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${this.#v}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${this.#v}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${this.#v}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${this.#v}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${this.#v}/file-audio.svg`;default:return`${this.#v}/paperclip.svg`}}#S(e,t,s){e.addEventListener(t,s),this.#o.push({element:e,eventType:t,eventAction:s})}#A(e,t){e.classList.add(t)}#K(e,t){e.classList.remove(t)}#T(e,t){e.textContent=t}#U(e,t,s){e?.setAttribute?.(t,s)}#$(e,t){t.trim().split(/\b\s+\b/g).forEach((t=>this.#A(e,t)))}#z(e,t){const s=t.length;if(s)for(let i=0;i<s;i+=1)this.#U(e,t[i].key,t[i].value)}#W(e){return e<1024?`${e}Bytes`:e>=1024&&e<1048576?`${(e/1024).toFixed(1)}KB`:e>=1048576&&e<1073741824?`${(e/1048576).toFixed(1)}MB`:e>=1073741824?`${(e/1073741824).toFixed(1)}GB`:void 0}#N(e,t){switch(e){case"Bytes":return t;case"KB":return 1024*t;case"MB":return 1048576*t;case"GB":return 1073741824*t;default:return 0}}#B(){this.#o.forEach((({element:e,eventType:t,eventAction:s})=>{e.removeEventListener(t,s)}))}destroy(){this.#r&&(this.#r.innerHTML=""),this.#B()}reset(){this.destroy(),this.init()}}}();
