var V=Object.defineProperty;var S=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var T=(i,m,t)=>m in i?V(i,m,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[m]=t,b=(i,m)=>{for(var t in m||(m={}))B.call(m,t)&&T(i,t,m[t]);if(S)for(var t of S(m))G.call(m,t)&&T(i,t,m[t]);return i};import{r as A,j as e,T as H,_ as a,M as Y,u as J,y as K,$ as Q,o as W}from"./main-677.js";import{h as q,c as X,d as g,e as D}from"./bf-67-72.js";import{C as L}from"./bf-102-76.js";import{T as f}from"./bf-680-336.js";import{r as C,a as ee,b as se}from"./bf-896-341.js";import{S as le}from"./bf-648-122.js";import{M as ie}from"./bf-878-130.js";function ae({creatorConf:i,setCreatorConf:m}){var u,r,F,o,v;const[t,s]=A.useState(!1),d=(n,h)=>{var N;const c=b({},i);h==="update"&&(n.target.checked&&!((N=c==null?void 0:c.actions)!=null&&N.update)?(c.actions.update={insert:!0,criteria:""},s(!0)):delete c.actions.update),m(b({},c))},x=(n,h)=>{const c=b({},i);h==="criteria"&&(c.actions.update.criteria=n),h==="insert"&&(c.actions.update.insert=n),m(b({},c))},j=()=>{var n;if(!((n=i.actions)!=null&&n.update)){const h=b({},i);h.actions.update={insert:!0,criteria:""},m(b({},h))}s(!0)};return A.useEffect(()=>{var n,h;if(!t&&!((h=(n=i.actions)==null?void 0:n.update)!=null&&h.criteria)){const c=b({},i);delete c.actions.update,m(b({},c))}},[t]),e.jsxs("div",{className:"pos-rel",children:[e.jsx("div",{className:"d-flx flx-wrp",children:e.jsx(f,{action:j,children:e.jsx(H,{onChange:n=>d(n,"update"),checked:"update"in(i==null?void 0:i.actions),className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:a("Update Record"),subTitle:a("Control how the record gets updated.")})})}),e.jsx(Y,{md:!0,show:t,setModal:s,title:a("Update Row"),children:e.jsx("div",{className:"o-a",children:((u=i==null?void 0:i.actions)==null?void 0:u.update)&&e.jsxs(e.Fragment,{children:[e.jsx("small",{children:a("Enter the criteria to update records. Please use the below format.")}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{children:[a("Example:")," ",'(Email==\\"test@mail.com\\")']}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("small",{children:[a("Here Email is Zoho Creator Field link name. info:")," ",e.jsx("a",{href:"https://www.zoho.com/creator/help/api/v2/update-records.html",target:"_blank",rel:"noreferrer",children:a("Zoho Creator Criteria Guide")})]}),e.jsx("textarea",{name:"",rows:"5",className:"btcd-paper-inp mt-1",onChange:n=>x(n.target.value,"criteria"),value:(F=(r=i.actions)==null?void 0:r.update)==null?void 0:F.criteria})]}),e.jsx("div",{className:"font-w-m mt-3",children:a("Update Preferance")}),e.jsx("small",{children:a("insert new record if the above criteria doesn&apos;t met?")}),e.jsxs("div",{children:[e.jsx(L,{onChange:()=>x(!0,"insert"),radio:!0,checked:(o=i.actions.update)==null?void 0:o.insert,name:"up-row",title:a("Yes")}),e.jsx(L,{onChange:()=>x(!1,"insert"),radio:!0,checked:!((v=i.actions.update)!=null&&v.insert),name:"up-row",title:a("No")})]})]})})})]})}function P({i,formFields:m,uploadFields:t,field:s,creatorConf:d,setCreatorConf:x}){var v,n,h,c,N,p,y,w,k,I,M,U,R,_,z,$,O,Z,E;const{applicationId:j,formId:u}=d;let r;t?r=s.zohoFormField===""||((N=(c=(h=(n=(v=d.default)==null?void 0:v.fields)==null?void 0:n[j])==null?void 0:h[u])==null?void 0:c.requiredFileUploadFields)==null?void 0:N.indexOf(s.zohoFormField))===-1:r=s.zohoFormField===""||((I=(k=(w=(y=(p=d.default)==null?void 0:p.fields)==null?void 0:y[j])==null?void 0:w[u])==null?void 0:k.required)==null?void 0:I.indexOf(s.zohoFormField))===-1;const F=J(Q),{isPro:o}=F;return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:l=>q(l,i,d,x,t),children:[e.jsx("option",{value:"",children:a("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:t?m.map(l=>l.type==="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`)):m.map(l=>l.type!=="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`))}),e.jsx("option",{value:"custom",children:a("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${o?"":"(PRO)"}`,children:o&&((M=le)==null?void 0:M.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),s.formField==="custom"&&e.jsx(ie,{onChange:l=>X(l,i,d,x),label:a("Custom Value"),className:"mr-2",type:"text",value:s.customValue,placeholder:a("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zohoFormField",value:s.zohoFormField||"",disabled:!r,onChange:l=>q(l,i,d,x,t),children:[e.jsx("option",{value:"",children:a("Select Field")}),t?((z=(_=(R=(U=d.default)==null?void 0:U.fields)==null?void 0:R[j])==null?void 0:_[u])==null?void 0:z.fileUploadFields)&&Object.values(d.default.fields[j][u].fileUploadFields).map(l=>r?l.required===!1&&e.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel):e.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel)):((E=(Z=(O=($=d.default)==null?void 0:$.fields)==null?void 0:O[j])==null?void 0:Z[u])==null?void 0:E.fields)&&Object.values(d.default.fields[j][u].fields).map(l=>r?l.required===!1&&e.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel):e.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel))]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g(i,d,x,t),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>D(i,d,x,t),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(K,{})})]})]})}function ue({formID:i,formFields:m,handleInput:t,creatorConf:s,setCreatorConf:d,isLoading:x,setisLoading:j,setSnackbar:u}){var r,F,o,v,n,h,c,N;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Application:")}),e.jsxs("select",{onChange:t,name:"applicationId",value:s.applicationId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:a("Select Application")}),((r=s==null?void 0:s.default)==null?void 0:r.applications)&&Object.values(s.default.applications).map(p=>e.jsx("option",{value:p.applicationId,children:p.applicationName},p.applicationId))]}),e.jsx("button",{onClick:()=>C(i,s,d,j,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Creator Portals"'},type:"button",disabled:x,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Form:")}),e.jsxs("select",{onChange:t,name:"formId",value:s.formId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:a("Select Form")}),((o=(F=s==null?void 0:s.default)==null?void 0:F.forms)==null?void 0:o[s.applicationId])&&Object.values(s.default.forms[s.applicationId]).map(p=>e.jsx("option",{value:p.formId,children:p.formName},p.formId))]}),e.jsx("button",{onClick:()=>ee(i,s,d,j,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Creator Departments"'},type:"button",disabled:x,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),x&&e.jsx(W,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.formId&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:a("Map Fields")}),e.jsx("button",{onClick:()=>se(i,s,d,j,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Creator Fields")}'`},type:"button",disabled:x,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),((h=(n=(v=s.default)==null?void 0:v.fields)==null?void 0:n[s==null?void 0:s.applicationId])==null?void 0:h[s==null?void 0:s.formId])&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields")})})]}),s.field_map.map((p,y)=>e.jsx(P,{i:y,field:p,creatorConf:s,formFields:m,setCreatorConf:d},`creator-m-${y+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g(s.field_map.length,s,d),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((c=s.default.fields[s.applicationId][s.formId])==null?void 0:c.fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Map File Upload Fields")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields")})})]}),(N=s==null?void 0:s.upload_field_map)==null?void 0:N.map((p,y)=>e.jsx(P,{i:y,field:p,creatorConf:s,formFields:m,setCreatorConf:d,uploadFields:!0},`creator-m-${y+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var p;return g((p=s==null?void 0:s.upload_field_map)==null?void 0:p.length,s,d,!0)},className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(ae,{creatorConf:s,setCreatorConf:d})]})]})]})}export{ue as Z};
