var bit_conversational_form=function(){"use strict";class t{#t=null;#e=0;#s=null;#i={};#n={};#r=null;#a=[];#o=[];#c=[];#p=[];#h=[];#l=null;#d=null;#u=0;#v=1;#f=[];#b=0;#S=null;#m=0;constructor(t,e){this.#r="string"==typeof t?document.querySelector(t):t,this.#r&&(this.#e=e.formId,this.#g(e),this.#S=this.#L(`#form-${this.#t}`),this.init(),this.#w(),this.#I(this.#u),this.#y())}init(){this.#a=this.#A(`.bc${this.#e}-step-wrapper`,this.#r),this.#o=this.#A(`.bc${this.#e}-step-wrapper .bc${this.#e}-fld`,this.#r),this.#c=this.#A(`.bc${this.#e}-step-wrapper .bc${this.#e}-btn`,this.#r),this.#l=this.#L(`.bc${this.#e}-nav-btn-up`),this.#d=this.#L(`.bc${this.#e}-nav-btn-down`),this.#h=this.#A(`.bc${this.#e}-step-wrapper input:not([type="checkbox"]):not([type="radio"]), .bc${this.#e}-step-wrapper textarea`,this.#r),this.#p=this.#A(`.bc${this.#e}-step-wrapper input[type="checkbox"],.bc${this.#e}-step-wrapper input[type="radio"]`,this.#r),this.#b=this.#s?.enable?this.#a.length-1:this.#a.length}#I(t){this.#a[this.#u].classList.remove("bc-step-fade-up","bc-step-fade-down"),this.#a[this.#u].classList.add("bc-step-deactive");const e=this.#a[t];e.classList.remove("bc-step-deactive"),t>=this.#u?e.classList.add("bc-step-fade-up"):e.classList.add("bc-step-fade-down");const s=this.#L(`.bc${this.#e}-focus-elm`,e);s&&s.focus(),this.#u=t,this.#$(),this.#C()}#k(){if(0===this.#u&&this.#s?.enable)return!0;if(this.#u===this.#b)return!0;const t=this.#a[this.#u],e=this.#L("input, textarea",t);return!(!e||"undefined"==typeof validateForm||!validateForm({input:e}))}#C(){0===this.#u?this.#F(this.#l,"disabled"):this.#B(this.#l,"disabled"),this.#u===this.#b?this.#F(this.#d,"disabled"):this.#B(this.#d,"disabled")}#g(t){if(t){const{contentId:e,navigationSettings:s}=t;this.#t=e,this.#n=s,this.#s=t?.stepListObject?.welcomePage}}#$(){const t=this.#L(`.bc${this.#e}-progress-lbl`),e=this.#L(`.bc${this.#e}-progress-fill`);let s=this.#n.progressLabel;const i=Math.max(0,this.#s?.enable?this.#u-1:this.#u),n=Math.ceil(i/this.#b*100);t&&(s=s.replace("${bc-step}",i),s=s.replace("${bc-total-steps}",this.#b),s=s.replace("${bc-percent}",n),t.innerHTML=s),e&&(e.style.width=`${n}%`)}#w(){this.#c.forEach(((t,e)=>{e!==this.#b&&this.#E("click",t,(t=>{t.preventDefault(),this.#v=this.#u+1,this.#I(this.#v)})),this.#E("keydown",t,(t=>{t.shiftKey||9!==t.keyCode||(t.preventDefault(),this.#v=this.#u+1,this.#I(this.#v))}))})),this.#l&&this.#E("click",this.#l,(t=>{t.preventDefault(),this.#I(this.#u-1)})),this.#d&&this.#E("click",this.#d,(t=>{t.preventDefault(),this.#I(this.#u+1)})),this.#h.forEach((t=>{this.#E("keydown",t,(t=>{t.shiftKey&&9===t.keyCode&&(t.preventDefault(),this.#I(this.#u-1)),13===t.keyCode&&(t.preventDefault(),"undefined"!=typeof validateForm&&validateForm({input:t.target})&&this.#u<this.#b&&(this.#v=this.#u+1,this.#I(this.#v)))})),this.#E("input",t,(t=>{if("undefined"!=typeof validateForm){const e=this.#x(`.bc${this.#e}-step-wrapper`,t.target),s=this.#L(`.bc${this.#e}-step-btn-wrpr`,e);validateForm({input:t.target},{otherOptions:{validateOnInput:!0}})?this.#D("bc-grid-hide",s):s.classList.contains("bc-grid-hide")||this.#W("bc-grid-hide",s)}}))})),this.#p.forEach((t=>{this.#E("change",t,(t=>{if("undefined"!=typeof validateForm){const e=this.#x(`.bc${this.#e}-step-wrapper`,t.target),s=this.#L(`.bc${this.#e}-step-btn-wrpr`,e);validateForm({input:t.target})?this.#D("bc-grid-hide",s):s.classList.contains("bc-grid-hide")||this.#W("bc-grid-hide",s)}}))})),this.#E("keydown",this.#S,(t=>{if(t.keyCode>=65&&t.keyCode<=90){const e=t.keyCode-65,s=this.#a[this.#u],i=this.#A(`.bc${this.#e}-ci`,s);if(i.length>0){const t=i[e];t&&(this.#F(t,"checked",!0),t.focus())}}}))}#P(t){let e=-1;return this.#a.forEach(((s,i)=>{s.classList.contains(t)&&(e=i)})),e}#y(){const t=this.#a[this.#a.length-1],e=this.#L(`.bc${this.#e}-btn-ok`,t);if(e){e.textContent="Submit";const t=document.createElement("span");t.classList.add("bf-spinner","d-none"),e.appendChild(t),this.#F(e,"type","submit")}}get activeFieldStep(){return this.#m}set activeFieldStep(t){this.#m=t;const e=this.#P(`bc${this.#e}-${t}`);-1!==e&&this.#I(e)}#x(t,e){return e.closest(t)}#L(t,e=document){return e.querySelector(t)}#A(t,e=document){return e.querySelectorAll(t)}#F(t,e,s=""){t?.setAttribute?.(e,s)}#B(t,e){t?.removeAttribute?.(e)}#W(t,e){e.classList.add(t)}#D(t,e){e.classList.remove(t)}#U(t,e){e.classList.toggle(t)}#E(t,e,s){e.addEventListener(t,s),this.#f.push({element:e,event:t,callback:s})}}return function(){Object.keys(window?.bf_globals||{}).forEach((e=>{const s=window.bf_globals[e],i=s.formInfo?.conversationalSettings;if(i?.enable){const{formId:n}=s,r=bfSelect(`#form-${e}`),a=bfSelect(`.bc${n}-steps-container`,r);if(!a)return;s.inits.conversational_form=new t(a,{contentId:e,formId:n,...i})}}))}}();
