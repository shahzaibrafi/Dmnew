var p=Object.defineProperty;var F=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var k=(e,s,t)=>s in e?p(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,f=(e,s)=>{for(var t in s||(s={}))y.call(s,t)&&k(e,t,s[t]);if(F)for(var t of F(s))q.call(s,t)&&k(e,t,s[t]);return e};import{_ as h,c as o,d as n}from"./main-677.js";const S=(e,s,t,r,i,a)=>{var c,_;const l=f({},s),{name:d}=e.target;switch(e.target.value!==""?l[d]=e.target.value:delete l[d],l[e.target.name]=e.target.value,e.target.name){case"listId":l.field_map=[{formField:"",acumbamailFormField:"email"}],l.listId&&!((_=(c=l.default)==null?void 0:c.allFields)!=null&&_[l.listId])&&w(a,l,t,r);break}t(f({},l))},w=(e,s,t,r,i)=>{const{listId:a}=s;if(!a)return;r(!0);const l={auth_token:s.auth_token,list_id:a};o(l,"bitforms_acumbamail_refresh_fields").then(d=>{var c,_;if(d&&d.success){const u=f({},s);if(d.data){(c=u.default)!=null&&c.allFields||(u.default.allFields={}),(_=u.default.allFields)!=null&&_[a]||(u.default.allFields[a]={}),u.default.allFields[a].fields=d.data,u.default.allFields[a].required=["email"],t(f({},u)),r(!1),n.success(h("All list field fetched successfully"));return}r(!1),n.error(h("Failed to fetch list fields"))}}).catch(()=>r(!1))},b=(e,s,t,r)=>{t(!0);const i={auth_token:e.auth_token};o(i,"bitforms_acumbamail_fetch_all_list").then(a=>{if(a&&a.success){const l=f({},e);l.default||(l.default={}),a.data&&(l.default.allLists=a.data),s(f({},l)),t(!1),n.success(h("Lists fetched successfully"));return}t(!1),n.error(h("Lists fetch failed. please try again"))}).catch(()=>t(!1))},v=(e,s,t,r,i,a)=>{if(!e.auth_token){t({auth_token:e.auth_token?"":h("Api Key can't be empty")});return}t({}),i(!0);const l={auth_token:e.auth_token};o(l,"bitforms_acumbamail_authorization_and_fetch_subscriber_list").then(d=>{if(d&&d.success){const c=f({},e);s(c),r(!0),i(!1),n.success(h("Authorized successfully"));return}i(!1),n.error(h("Authorized failed"))})},P=e=>!((e!=null&&e.field_map?e.field_map.filter(t=>{var r,i,a;return!t.formField&&t.acumbamailFormField&&((a=(i=(r=e==null?void 0:e.default)==null?void 0:r.allFields)==null?void 0:i[e.listId])==null?void 0:a.required.indexOf(t.acumbamailFormField))!==-1}):[]).length>0);export{v as a,P as c,b as f,S as h,w as r};
